import{jsx as o,jsxs as e,Fragment as t}from"react/jsx-runtime";import i from"@heroicons/react/24/outline/EnvelopeIcon";import r from"@heroicons/react/24/outline/PhoneIcon";import s from"@heroicons/react/24/outline/UserCircleIcon";import{useMemo as n,useState as m,useEffect as a}from"react";import{styled as l}from"styled-components";import{TermsAndConditions as p,BlobbyFooter as c}from"../../components/ModalFooter.mjs";import{ModalHeader as h}from"../../components/ModalHeader.mjs";import{useAppConfig as d}from"../../configuration/context.mjs";import{usePrivyInternal as g}from"../../hooks/internal-context.mjs";import{usePrivyModal as j}from"../../hooks/modal-context.mjs";import{toDisplayFromAccountType as f}from"../../lib/toDisplayFromAccountType.mjs";import{useRecentlyUsedLogin as u}from"../../recent-login/context.mjs";import{EmailOrPhone as y}from"../../svg/email-or-phone.mjs";import{AppLogoHeader as w}from"./AppLogoHeader.mjs";import{EmailButton as v}from"./EmailButton.mjs";import{EmptyWalletView as b}from"./EmptyWalletView.mjs";import{FarcasterButton as k}from"./FarcasterButton.mjs";import{PasskeyLink as C}from"./PasskeyLink.mjs";import{SmsButton as T}from"./SmsButton.mjs";import{SocialButton as x}from"./SocialButton.mjs";import{TelegramButton as A}from"./TelegramButton.mjs";import{toWalletButtons as M}from"./WalletButtonList.mjs";import{WalletOverflowButton as I}from"./WalletOverflowButton.mjs";import{Web2OverflowButton as L}from"./Web2OverflowButton.mjs";import{Subtitle as E,AlignBottom as W,LoginMethodContainer as B}from"./styles.mjs";import"../../svg/protected-by-privy.mjs";import"@heroicons/react/24/outline/ArrowLeftIcon";import"@heroicons/react/24/outline/ArrowRightIcon";import"@heroicons/react/24/outline/QuestionMarkCircleIcon";import"@heroicons/react/24/outline/XMarkIcon";import"../../config.mjs";import"../../configuration/defaultClientConfig.mjs";import"../../constants.mjs";import"../../configuration/login-methods.mjs";import"../../configuration/wallets.mjs";import"../../connectors/chains/index.mjs";import"../../connectors/chains/arbitrum.mjs";import"../../connectors/chains/arbitrumSepolia.mjs";import"../../connectors/chains/avalanche.mjs";import"../../connectors/chains/avalancheFuji.mjs";import"../../connectors/chains/base.mjs";import"../../connectors/chains/baseSepolia.mjs";import"../../connectors/chains/berachainArtio.mjs";import"../../connectors/chains/celo.mjs";import"../../connectors/chains/celoAlfajores.mjs";import"../../connectors/chains/filecoin.mjs";import"../../connectors/chains/filecoinCalibration.mjs";import"../../connectors/chains/garnetHolesky.mjs";import"../../connectors/chains/holesky.mjs";import"../../connectors/chains/linea.mjs";import"../../connectors/chains/lineaTestnet.mjs";import"../../connectors/chains/lukso.mjs";import"../../connectors/chains/mainnet.mjs";import"../../connectors/chains/optimism.mjs";import"../../connectors/chains/optimismSepolia.mjs";import"../../connectors/chains/polygon.mjs";import"../../connectors/chains/polygonAmoy.mjs";import"../../connectors/chains/redstone.mjs";import"../../connectors/chains/sepolia.mjs";import"../../connectors/chains/zora.mjs";import"../../connectors/chains/zoraSepolia.mjs";import"../../connectors/chains/zoraTestnet.mjs";import"../../connectors/chains/utils.mjs";import"../../lib/solana/index.mjs";import"../../theme.mjs";import"tinycolor2";import"../../lib/cybr53.mjs";import"../../hooks/index.mjs";import"../../components/PrefetchedImage.mjs";import"../index.mjs";import"../../hooks/events-context.mjs";import"../../storage.mjs";import"../../components/AppLogo.mjs";import"../../components/ConnectEmailForm.mjs";import"../../errors.mjs";import"ofetch";import"../../hooks/captcha-context.mjs";import"../../utils/index.mjs";import"@ethersproject/providers";import"../../connectors/get-legacy-injected-providers.mjs";import"../../connectors/is-wallet-installed.mjs";import"../../hooks/privy-context.mjs";import"../../components/Button.mjs";import"../../components/Loader.mjs";import"../../components/ui/chips/Chip.mjs";import"../../components/ui/animation/LoadingSkeleton.mjs";import"../../components/ui/forms/EmailInputForm.mjs";import"../../components/ui/typography/ErrorMessage.mjs";import"../../svg/farcaster.mjs";import"../../components/ConnectPhoneForm.mjs";import"../../PhoneCountryDropdown-BXDwBRL5.mjs";import"../../svg/apple.mjs";import"../../svg/discord.mjs";import"../../svg/github.mjs";import"../../svg/google.mjs";import"../../svg/instagram.mjs";import"../../svg/linkedin.mjs";import"../../svg/spotify.mjs";import"../../svg/tiktok.mjs";import"../../svg/twitter.mjs";import"../../svg/telegram.mjs";import"./WalletButton.mjs";import"react-device-detect";import"../../components/external-wallets/InjectedWalletIcon.mjs";import"@heroicons/react/24/outline/WalletIcon";import"../../lib/external-wallets/displayHelpers.mjs";import"../../svg/brave-browser-icon.mjs";import"../../svg/bybit.mjs";import"../../svg/coinbase-wallet.mjs";import"../../svg/cryptocom.mjs";import"../../svg/metamask.mjs";import"../../svg/phantom.mjs";import"../../svg/rabby.mjs";import"../../svg/rainbow.mjs";import"../../svg/safe.mjs";import"../../svg/uniswap.mjs";import"../../svg/universal-profile.mjs";import"../../svg/wallet-connect.mjs";import"../../svg/zerion.mjs";import"../../lib/isEmbeddedWebview.mjs";import"@heroicons/react/24/outline/ChevronRightIcon";const O=({connectOnly:i})=>{let{closePrivyModal:r,connectors:s}=g(),{data:l,onUserCloseViaDialogOrKeybindRef:y}=j(),w=d(),{accountType:O,walletClientType:U,chainType:z}=u(),D=O?f(O):null,V=l?.login,{email:G,sms:K,google:N,twitter:Q,discord:X,github:q,spotify:J,instagram:Y,tiktok:Z,linkedin:$,apple:_,wallet:oo,farcaster:eo,telegram:to}=n((()=>V?.loginMethods?((o,e=!0)=>o.reduce(((o,t)=>({...o,[t]:e})),{}))(V.loginMethods,!0):null),[V])??w.loginMethods,{passkey:io}=w.loginMethods,ro=[G&&"email",K&&"sms",N&&"google",Q&&"twitter",X&&"discord",q&&"github",J&&"spotify",Y&&"instagram",Z&&"tiktok",$&&"linkedin",_&&"apple",eo&&"farcaster",to&&"telegram"].filter((o=>!!o)),so=ro.length>0,no=n((()=>oo&&!so?"web3-first":oo&&w?.appearance.loginGroupPriority||"web2-first"),[oo,so,w?.appearance.loginGroupPriority]),mo=w?.appearance.hideDirectWeb2Inputs,[ao,lo]=m("default"),[po,co]=m(R({mostRecentlyUsedAccountType:O,smsAvailable:K,emailAvailable:G,prefilledType:V?.prefill?.type}));a((()=>{co(R({mostRecentlyUsedAccountType:O,smsAvailable:K,emailAvailable:G,prefilledType:V?.prefill?.type}))}),[G,K,O]);let ho=()=>{r({shouldCallAuthOnSuccess:!0}),setTimeout((()=>{lo("default")}),150)};y.current=ho;let go=[];U&&oo?go.push(U):D?.loginMethod&&ro.includes(D.loginMethod)&&go.push(D.loginMethod);let jo=e=>"email"===e?/*#__PURE__*/o(v,{isEditable:"email"===po,setIsEditable:()=>{co("email")},defaultValue:"email"===V?.prefill?.type?V.prefill.value:void 0},e):"sms"===e?/*#__PURE__*/o(T,{isEditable:"sms"===po,setIsEditable:()=>{co("sms")},defaultValue:"phone"===V?.prefill?.type?V.prefill.value:void 0},e):"apple"===e?/*#__PURE__*/o(x,{provider:"apple"},e):"discord"===e?/*#__PURE__*/o(x,{provider:"discord"},e):"farcaster"===e?/*#__PURE__*/o(k,{},e):"github"===e?/*#__PURE__*/o(x,{provider:"github"},e):"google"===e?/*#__PURE__*/o(x,{provider:"google"},e):"linkedin"===e?/*#__PURE__*/o(x,{provider:"linkedin"},e):"tiktok"===e?/*#__PURE__*/o(x,{provider:"tiktok"},e):"spotify"===e?/*#__PURE__*/o(x,{provider:"spotify"},e):"instagram"===e?/*#__PURE__*/o(x,{provider:"instagram"},e):"twitter"===e?/*#__PURE__*/o(x,{provider:"twitter"},e):"telegram"===e?/*#__PURE__*/o(A,{},e):M({walletList:w.appearance.walletList,walletChainType:w.appearance.walletChainType,connectors:s,connectOnly:i,ignore:[],walletConnectEnabled:w.externalWallets.walletConnect.enabled,forceWallet:{wallet:e,chainType:z??"ethereum"}}),fo=M({walletList:w.appearance.walletList.filter((o=>o!==U)),walletChainType:w.appearance.walletChainType,connectors:s,connectOnly:i,ignore:[...w.appearance.walletList,U],walletConnectEnabled:w.externalWallets.walletConnect.enabled}),uo=ro.filter((o=>o!==D?.loginMethod)).flatMap(jo),yo=go.flatMap(jo);"web3-first"===no&&"default"===ao?fo.unshift(...yo):"web2-first"===no&&uo.unshift(...yo);let wo=ro.filter((o=>"email"!==o&&"sms"!==o)),vo=S({priority:no,email:G,sms:K,social:wo}),bo=F({priority:no,email:G,sms:K,social:wo}),ko=/*#__PURE__*/o(I,{text:H({priority:no}),onClick:()=>lo("web3-overflow")}),Co=/*#__PURE__*/o(L,{text:vo,icon:bo,onClick:()=>lo("web2-overflow")}),To=mo?0:1,xo=oo&&fo.length>0,Ao=0===uo.length&&oo&&0===fo.length,Mo=5-(xo?1:0),Io=fo.length>0?fo:/*#__PURE__*/o(b,{chainType:w.appearance.walletChainType,withPadding:!0});/*#__PURE__*/return e(t,{children:[/*#__PURE__*/o(h,{title:w.appearance.landingHeader,onClose:ho,backFn:"default"===ao?void 0:()=>{lo("default")}}),"default"===ao&&/*#__PURE__*/o(P,{}),"default"===ao&&("string"==typeof w.appearance.loginMessage?/*#__PURE__*/o(E,{children:w.appearance.loginMessage}):w.appearance.loginMessage),/*#__PURE__*/o(W,{style:{overflow:"hidden",padding:2},children:/*#__PURE__*/e(B,{children:["default"===ao&&"web2-first"===no&&/*#__PURE__*/e(t,{children:[uo.length>Mo?uo.slice(0,Mo-1):uo,uo.length>Mo&&Co,xo&&ko,Ao&&/*#__PURE__*/o(b,{chainType:w.appearance.walletChainType})]}),"default"===ao&&"web3-first"===no&&/*#__PURE__*/e(t,{children:[oo&&/*#__PURE__*/e(t,{children:[fo.length>Mo?fo.slice(0,Mo-1):fo,fo.length>Mo&&ko]}),uo.length>To&&Co,uo.length===To&&uo[0],Ao&&/*#__PURE__*/o(b,{chainType:w.appearance.walletChainType})]}),"web2-overflow"===ao&&/*#__PURE__*/o(t,{children:"web3-first"===no?uo:uo.slice(3)}),"web3-overflow"===ao?Io:[],io&&"default"===ao&&/*#__PURE__*/o(C,{})]})}),w&&/*#__PURE__*/o(p,{app:w}),/*#__PURE__*/o(c,{})]})};let P=/*#__PURE__*/l(w).withConfig({displayName:"StyledAppLogoHeader",componentId:"sc-4938a02-0"})(["margin-bottom:16px;"]),S=({priority:o,email:e,sms:t,social:i})=>"web2-first"===o?"Other socials":e&&t&&i.length>0||e&&i.length>0?"Log in with email or socials":t&&i.length>0?"Log in with sms or socials":e&&t?"Continue with email or sms":e?"Continue with email":t?"Continue with sms":"Log in with a social account",F=({priority:e,email:t,sms:n,social:m})=>"web2-first"===e||m.length>0?/*#__PURE__*/o(s,{}):t&&n?/*#__PURE__*/o(y,{}):t?/*#__PURE__*/o(i,{}):n?/*#__PURE__*/o(r,{}):null,H=({priority:o})=>"web2-first"===o?"Continue with a wallet":"Other wallets",R=({mostRecentlyUsedAccountType:o,smsAvailable:e,emailAvailable:t,prefilledType:i})=>t&&("email"===o&&"phone"!==i||"email"===i)||!e||"phone"!==o&&"phone"!==i?"email":"sms";export{O as LandingScreenView};
