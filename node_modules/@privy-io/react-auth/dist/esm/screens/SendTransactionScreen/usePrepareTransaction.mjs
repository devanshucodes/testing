import{BigNumber as t}from"@ethersproject/bignumber";import{useState as e,useEffect as r}from"react";import{getAndCheckBalance as s}from"../../embedded-wallets/rpc/index.mjs";import{usePrivyInternal as o}from"../../hooks/internal-context.mjs";import{usePrivyContext as a}from"../../hooks/privy-context.mjs";import{g as i,o as m}from"../../index-B3QfI7v9.mjs";import"@ethersproject/providers";import"../../constants.mjs";import"../../ethers-Cz-frLvN.mjs";import"../../hooks/index.mjs";import"@ethersproject/abstract-signer";import"@ethersproject/contracts";import"@ethersproject/transactions";import"@ethersproject/units";import"fetch-retry";import"../../errors-9ucGZPEs.mjs";const n=(n,c,p)=>{let[l,u]=e(null),{getAccessToken:h}=a(),{walletProxy:d}=o();return r((()=>{l&&u(null),(async()=>{if(!await h()||!d||!c)return null;let e=[],r=await i(c.address,n,p).catch((t=>(e.push(t),n))),{totalGasEstimate:o,l1ExecutionFeeEstimate:a}=await m(r,p).catch((t=>(e.push(t),{totalGasEstimate:null,l1ExecutionFeeEstimate:null}))),{balance:l,hasSufficientFunds:u}=await s(c.address,r,o??t.from(0),p).catch((t=>(e.push(t),{balance:null,hasSufficientFunds:!1})));return{tx:r,totalGasEstimate:o,l1ExecutionFeeEstimate:a,balance:l,hasFunds:u,errors:e}})().then(u)}),[n]),l};export{n as usePrepareTransaction};
