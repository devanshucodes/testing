import{getImportedPrivyEthereumWallet as e}from"../client/user.mjs";import{PrivyErrorCode as r,PrivyClientError as t}from"../errors.mjs";import"@ethersproject/address";import"ofetch";const o=async({emitPrivyEvent:o,getAccessToken:i,initializeWalletProxy:n,refreshUser:a,user:s},{privateKey:c})=>{if(!s)throw o("linkAccount","onError",r.MUST_BE_AUTHENTICATED,{linkMethod:"siwe"}),new t("User must be authenticated before linking an account.");let[l,E]=await Promise.all([i(),n(15e3)]);if(!E||!l)throw o("linkAccount","onError",r.MUST_BE_AUTHENTICATED,{linkMethod:"siwe"}),new t("User must be authenticated before linking an account.");await E.import({privateKey:c,accessToken:l});let m=e(await a());if(!m)throw o("createWallet","onError",r.UNKNOWN_EMBEDDED_WALLET_ERROR),Error("Failed to import wallet");return o("createWallet","onSuccess",m),m};export{o as importWallet};
