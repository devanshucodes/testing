"use strict";var e=require("react/jsx-runtime"),r=require("@heroicons/react/24/outline/EnvelopeIcon"),i=require("@heroicons/react/24/outline/PhoneIcon"),t=require("@heroicons/react/24/outline/UserCircleIcon"),s=require("react"),o=require("styled-components"),n=require("../../components/ModalFooter.js"),a=require("../../components/ModalHeader.js"),l=require("../../configuration/context.js"),c=require("../../hooks/internal-context.js"),u=require("../../hooks/modal-context.js"),p=require("../../lib/toDisplayFromAccountType.js"),j=require("../../recent-login/context.js"),h=require("../../svg/email-or-phone.js"),d=require("./AppLogoHeader.js"),g=require("./EmailButton.js"),q=require("./EmptyWalletView.js"),m=require("./FarcasterButton.js"),f=require("./PasskeyLink.js"),y=require("./SmsButton.js"),w=require("./SocialButton.js"),v=require("./TelegramButton.js"),b=require("./WalletButtonList.js"),x=require("./WalletOverflowButton.js"),k=require("./Web2OverflowButton.js"),C=require("./styles.js");function B(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("../../svg/protected-by-privy.js"),require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../../config.js"),require("../../configuration/defaultClientConfig.js"),require("../../constants.js"),require("../../configuration/login-methods.js"),require("../../configuration/wallets.js"),require("../../connectors/chains/index.js"),require("../../connectors/chains/arbitrum.js"),require("../../connectors/chains/arbitrumSepolia.js"),require("../../connectors/chains/avalanche.js"),require("../../connectors/chains/avalancheFuji.js"),require("../../connectors/chains/base.js"),require("../../connectors/chains/baseSepolia.js"),require("../../connectors/chains/berachainArtio.js"),require("../../connectors/chains/celo.js"),require("../../connectors/chains/celoAlfajores.js"),require("../../connectors/chains/filecoin.js"),require("../../connectors/chains/filecoinCalibration.js"),require("../../connectors/chains/garnetHolesky.js"),require("../../connectors/chains/holesky.js"),require("../../connectors/chains/linea.js"),require("../../connectors/chains/lineaTestnet.js"),require("../../connectors/chains/lukso.js"),require("../../connectors/chains/mainnet.js"),require("../../connectors/chains/optimism.js"),require("../../connectors/chains/optimismSepolia.js"),require("../../connectors/chains/polygon.js"),require("../../connectors/chains/polygonAmoy.js"),require("../../connectors/chains/redstone.js"),require("../../connectors/chains/sepolia.js"),require("../../connectors/chains/zora.js"),require("../../connectors/chains/zoraSepolia.js"),require("../../connectors/chains/zoraTestnet.js"),require("../../connectors/chains/utils.js"),require("../../lib/solana/index.js"),require("../../theme.js"),require("tinycolor2"),require("../../lib/cybr53.js"),require("../../hooks/index.js"),require("../../components/PrefetchedImage.js"),require("../index.js"),require("../../hooks/events-context.js"),require("../../storage.js"),require("../../components/AppLogo.js"),require("../../components/ConnectEmailForm.js"),require("../../errors.js"),require("ofetch"),require("../../hooks/captcha-context.js"),require("../../utils/index.js"),require("@ethersproject/providers"),require("../../connectors/get-legacy-injected-providers.js"),require("../../connectors/is-wallet-installed.js"),require("../../hooks/privy-context.js"),require("../../components/Button.js"),require("../../components/Loader.js"),require("../../components/ui/chips/Chip.js"),require("../../components/ui/animation/LoadingSkeleton.js"),require("../../components/ui/forms/EmailInputForm.js"),require("../../components/ui/typography/ErrorMessage.js"),require("../../svg/farcaster.js"),require("../../components/ConnectPhoneForm.js"),require("../../PhoneCountryDropdown-JNQITU4K.js"),require("../../svg/apple.js"),require("../../svg/discord.js"),require("../../svg/github.js"),require("../../svg/google.js"),require("../../svg/instagram.js"),require("../../svg/linkedin.js"),require("../../svg/spotify.js"),require("../../svg/tiktok.js"),require("../../svg/twitter.js"),require("../../svg/telegram.js"),require("./WalletButton.js"),require("react-device-detect"),require("../../components/external-wallets/InjectedWalletIcon.js"),require("@heroicons/react/24/outline/WalletIcon"),require("../../lib/external-wallets/displayHelpers.js"),require("../../svg/brave-browser-icon.js"),require("../../svg/bybit.js"),require("../../svg/coinbase-wallet.js"),require("../../svg/cryptocom.js"),require("../../svg/metamask.js"),require("../../svg/phantom.js"),require("../../svg/rabby.js"),require("../../svg/rainbow.js"),require("../../svg/safe.js"),require("../../svg/uniswap.js"),require("../../svg/universal-profile.js"),require("../../svg/wallet-connect.js"),require("../../svg/zerion.js"),require("../../lib/isEmbeddedWebview.js"),require("@heroicons/react/24/outline/ChevronRightIcon");var T=/*#__PURE__*/B(r),A=/*#__PURE__*/B(i),M=/*#__PURE__*/B(t);let S=/*#__PURE__*/o.styled(d.AppLogoHeader).withConfig({displayName:"StyledAppLogoHeader",componentId:"sc-4938a02-0"})(["margin-bottom:16px;"]),L=({priority:e,email:r,sms:i,social:t})=>"web2-first"===e?"Other socials":r&&i&&t.length>0||r&&t.length>0?"Log in with email or socials":i&&t.length>0?"Log in with sms or socials":r&&i?"Continue with email or sms":r?"Continue with email":i?"Continue with sms":"Log in with a social account",E=({priority:r,email:i,sms:t,social:s})=>"web2-first"===r||s.length>0?/*#__PURE__*/e.jsx(M.default,{}):i&&t?/*#__PURE__*/e.jsx(h.EmailOrPhone,{}):i?/*#__PURE__*/e.jsx(T.default,{}):t?/*#__PURE__*/e.jsx(A.default,{}):null,W=({priority:e})=>"web2-first"===e?"Continue with a wallet":"Other wallets",I=({mostRecentlyUsedAccountType:e,smsAvailable:r,emailAvailable:i,prefilledType:t})=>i&&("email"===e&&"phone"!==t||"email"===t)||!r||"phone"!==e&&"phone"!==t?"email":"sms";exports.LandingScreenView=({connectOnly:r})=>{let{closePrivyModal:i,connectors:t}=c.usePrivyInternal(),{data:o,onUserCloseViaDialogOrKeybindRef:h}=u.usePrivyModal(),d=l.useAppConfig(),{accountType:B,walletClientType:T,chainType:A}=j.useRecentlyUsedLogin(),M=B?p.toDisplayFromAccountType(B):null,F=o?.login,{email:P,sms:O,google:H,twitter:V,discord:R,github:U,spotify:D,instagram:z,tiktok:G,linkedin:K,apple:N,wallet:Q,farcaster:X,telegram:J}=s.useMemo((()=>F?.loginMethods?((e,r=!0)=>e.reduce(((e,i)=>({...e,[i]:r})),{}))(F.loginMethods,!0):null),[F])??d.loginMethods,{passkey:Y}=d.loginMethods,Z=[P&&"email",O&&"sms",H&&"google",V&&"twitter",R&&"discord",U&&"github",D&&"spotify",z&&"instagram",G&&"tiktok",K&&"linkedin",N&&"apple",X&&"farcaster",J&&"telegram"].filter((e=>!!e)),$=Z.length>0,_=s.useMemo((()=>Q&&!$?"web3-first":Q&&d?.appearance.loginGroupPriority||"web2-first"),[Q,$,d?.appearance.loginGroupPriority]),ee=d?.appearance.hideDirectWeb2Inputs,[re,ie]=s.useState("default"),[te,se]=s.useState(I({mostRecentlyUsedAccountType:B,smsAvailable:O,emailAvailable:P,prefilledType:F?.prefill?.type}));s.useEffect((()=>{se(I({mostRecentlyUsedAccountType:B,smsAvailable:O,emailAvailable:P,prefilledType:F?.prefill?.type}))}),[P,O,B]);let oe=()=>{i({shouldCallAuthOnSuccess:!0}),setTimeout((()=>{ie("default")}),150)};h.current=oe;let ne=[];T&&Q?ne.push(T):M?.loginMethod&&Z.includes(M.loginMethod)&&ne.push(M.loginMethod);let ae=i=>"email"===i?/*#__PURE__*/e.jsx(g.EmailButton,{isEditable:"email"===te,setIsEditable:()=>{se("email")},defaultValue:"email"===F?.prefill?.type?F.prefill.value:void 0},i):"sms"===i?/*#__PURE__*/e.jsx(y.SmsButton,{isEditable:"sms"===te,setIsEditable:()=>{se("sms")},defaultValue:"phone"===F?.prefill?.type?F.prefill.value:void 0},i):"apple"===i?/*#__PURE__*/e.jsx(w.SocialButton,{provider:"apple"},i):"discord"===i?/*#__PURE__*/e.jsx(w.SocialButton,{provider:"discord"},i):"farcaster"===i?/*#__PURE__*/e.jsx(m.FarcasterButton,{},i):"github"===i?/*#__PURE__*/e.jsx(w.SocialButton,{provider:"github"},i):"google"===i?/*#__PURE__*/e.jsx(w.SocialButton,{provider:"google"},i):"linkedin"===i?/*#__PURE__*/e.jsx(w.SocialButton,{provider:"linkedin"},i):"tiktok"===i?/*#__PURE__*/e.jsx(w.SocialButton,{provider:"tiktok"},i):"spotify"===i?/*#__PURE__*/e.jsx(w.SocialButton,{provider:"spotify"},i):"instagram"===i?/*#__PURE__*/e.jsx(w.SocialButton,{provider:"instagram"},i):"twitter"===i?/*#__PURE__*/e.jsx(w.SocialButton,{provider:"twitter"},i):"telegram"===i?/*#__PURE__*/e.jsx(v.TelegramButton,{},i):b.toWalletButtons({walletList:d.appearance.walletList,walletChainType:d.appearance.walletChainType,connectors:t,connectOnly:r,ignore:[],walletConnectEnabled:d.externalWallets.walletConnect.enabled,forceWallet:{wallet:i,chainType:A??"ethereum"}}),le=b.toWalletButtons({walletList:d.appearance.walletList.filter((e=>e!==T)),walletChainType:d.appearance.walletChainType,connectors:t,connectOnly:r,ignore:[...d.appearance.walletList,T],walletConnectEnabled:d.externalWallets.walletConnect.enabled}),ce=Z.filter((e=>e!==M?.loginMethod)).flatMap(ae),ue=ne.flatMap(ae);"web3-first"===_&&"default"===re?le.unshift(...ue):"web2-first"===_&&ce.unshift(...ue);let pe=Z.filter((e=>"email"!==e&&"sms"!==e)),je=L({priority:_,email:P,sms:O,social:pe}),he=E({priority:_,email:P,sms:O,social:pe}),de=/*#__PURE__*/e.jsx(x.WalletOverflowButton,{text:W({priority:_}),onClick:()=>ie("web3-overflow")}),ge=/*#__PURE__*/e.jsx(k.Web2OverflowButton,{text:je,icon:he,onClick:()=>ie("web2-overflow")}),qe=ee?0:1,me=Q&&le.length>0,fe=0===ce.length&&Q&&0===le.length,ye=5-(me?1:0),we=le.length>0?le:/*#__PURE__*/e.jsx(q.EmptyWalletView,{chainType:d.appearance.walletChainType,withPadding:!0});/*#__PURE__*/return e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(a.ModalHeader,{title:d.appearance.landingHeader,onClose:oe,backFn:"default"===re?void 0:()=>{ie("default")}}),"default"===re&&/*#__PURE__*/e.jsx(S,{}),"default"===re&&("string"==typeof d.appearance.loginMessage?/*#__PURE__*/e.jsx(C.Subtitle,{children:d.appearance.loginMessage}):d.appearance.loginMessage),/*#__PURE__*/e.jsx(C.AlignBottom,{style:{overflow:"hidden",padding:2},children:/*#__PURE__*/e.jsxs(C.LoginMethodContainer,{children:["default"===re&&"web2-first"===_&&/*#__PURE__*/e.jsxs(e.Fragment,{children:[ce.length>ye?ce.slice(0,ye-1):ce,ce.length>ye&&ge,me&&de,fe&&/*#__PURE__*/e.jsx(q.EmptyWalletView,{chainType:d.appearance.walletChainType})]}),"default"===re&&"web3-first"===_&&/*#__PURE__*/e.jsxs(e.Fragment,{children:[Q&&/*#__PURE__*/e.jsxs(e.Fragment,{children:[le.length>ye?le.slice(0,ye-1):le,le.length>ye&&de]}),ce.length>qe&&ge,ce.length===qe&&ce[0],fe&&/*#__PURE__*/e.jsx(q.EmptyWalletView,{chainType:d.appearance.walletChainType})]}),"web2-overflow"===re&&/*#__PURE__*/e.jsx(e.Fragment,{children:"web3-first"===_?ce:ce.slice(3)}),"web3-overflow"===re?we:[],Y&&"default"===re&&/*#__PURE__*/e.jsx(f.PasskeyLink,{})]})}),d&&/*#__PURE__*/e.jsx(n.TermsAndConditions,{app:d}),/*#__PURE__*/e.jsx(n.BlobbyFooter,{})]})};
