"use strict";var e=require("../client/user.js"),r=require("../errors.js");require("@ethersproject/address"),require("ofetch");exports.importWallet=async({emitPrivyEvent:t,getAccessToken:i,initializeWalletProxy:o,refreshUser:a,user:n},{privateKey:l})=>{if(!n)throw t("linkAccount","onError",r.PrivyErrorCode.MUST_BE_AUTHENTICATED,{linkMethod:"siwe"}),new r.PrivyClientError("User must be authenticated before linking an account.");let[s,c]=await Promise.all([i(),o(15e3)]);if(!c||!s)throw t("linkAccount","onError",r.PrivyErrorCode.MUST_BE_AUTHENTICATED,{linkMethod:"siwe"}),new r.PrivyClientError("User must be authenticated before linking an account.");await c.import({privateKey:l,accessToken:s});let E=e.getImportedPrivyEthereumWallet(await a());if(!E)throw t("createWallet","onError",r.PrivyErrorCode.UNKNOWN_EMBEDDED_WALLET_ERROR),Error("Failed to import wallet");return t("createWallet","onSuccess",E),E};
