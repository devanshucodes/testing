"use strict";var e=require("react/jsx-runtime"),o=require("react"),r=require("styled-components"),n=require("../hooks/modal-context.js"),i=require("../recent-login/context.js"),t=require("./Button.js"),c=require("../PhoneCountryDropdown-JNQITU4K.js"),s=require("./ui/chips/Chip.js");require("./PrefetchedImage.js"),require("../configuration/context.js"),require("../config.js"),require("../configuration/defaultClientConfig.js"),require("../constants.js"),require("../configuration/login-methods.js"),require("../configuration/wallets.js"),require("../connectors/chains/index.js"),require("../connectors/chains/arbitrum.js"),require("../connectors/chains/arbitrumSepolia.js"),require("../connectors/chains/avalanche.js"),require("../connectors/chains/avalancheFuji.js"),require("../connectors/chains/base.js"),require("../connectors/chains/baseSepolia.js"),require("../connectors/chains/berachainArtio.js"),require("../connectors/chains/celo.js"),require("../connectors/chains/celoAlfajores.js"),require("../connectors/chains/filecoin.js"),require("../connectors/chains/filecoinCalibration.js"),require("../connectors/chains/garnetHolesky.js"),require("../connectors/chains/holesky.js"),require("../connectors/chains/linea.js"),require("../connectors/chains/lineaTestnet.js"),require("../connectors/chains/lukso.js"),require("../connectors/chains/mainnet.js"),require("../connectors/chains/optimism.js"),require("../connectors/chains/optimismSepolia.js"),require("../connectors/chains/polygon.js"),require("../connectors/chains/polygonAmoy.js"),require("../connectors/chains/redstone.js"),require("../connectors/chains/sepolia.js"),require("../connectors/chains/zora.js"),require("../connectors/chains/zoraSepolia.js"),require("../connectors/chains/zoraTestnet.js"),require("../connectors/chains/utils.js"),require("../lib/solana/index.js"),require("../theme.js"),require("tinycolor2"),require("../lib/cybr53.js"),require("../screens/index.js"),require("../hooks/index.js"),require("../hooks/events-context.js"),require("../storage.js"),require("./Loader.js"),require("./ui/animation/LoadingSkeleton.js");const a=/*#__PURE__*/o.forwardRef(((r,a)=>{let{app:d}=n.usePrivyModal(),[h,p]=o.useState(!1),{accountType:g}=i.useRecentlyUsedLogin(),[j,q]=o.useState(""),[x,m]=o.useState(d?.intl.defaultCountry??"US"),b=c.ee(j,x),y=c.er(x),f=c.ei(x),w=c.et(x),v=!b,[C,k]=o.useState(!1),S=w.length,P=e=>{let o=e.target.value;m(o),q(""),r.onChange&&r.onChange({rawPhoneNumber:j,qualifiedPhoneNumber:c.ed(j,o),countryCode:o,isValid:c.ee(j,x)})},N=(e,o)=>{try{let n=e.replace(/\D/g,"")===j.replace(/\D/g,"")?e:y.input(e);q(n),r.onChange&&r.onChange({rawPhoneNumber:n,qualifiedPhoneNumber:c.ed(e,o),countryCode:o,isValid:c.ee(e,o)})}catch(e){console.error("Error processing phone number:",e)}},z=()=>{k(!0);let e=c.ed(j,x);r.onSubmit({rawPhoneNumber:j,qualifiedPhoneNumber:e,countryCode:x,isValid:c.ee(j,x)}).finally((()=>k(!1)))};return o.useEffect((()=>{if(r.defaultValue){let e=c.eo(r.defaultValue);y.reset(),P({target:{value:e.countryCode}}),N(e.phone,e.countryCode)}}),[r.defaultValue]),/*#__PURE__*/e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(u,{children:/*#__PURE__*/e.jsxs(l,{$callingCodeLength:S,$stacked:r.stacked,children:[/*#__PURE__*/e.jsx(c.PhoneCountryDropdown,{value:x,onChange:P}),/*#__PURE__*/e.jsx("input",{ref:a,id:"phone-number-input",className:"login-method-button",type:"tel",placeholder:f,onFocus:()=>p(!0),onChange:e=>{N(e.target.value,x)},onKeyUp:e=>{"Enter"===e.key&&z()},value:j,autoComplete:"tel"}),"phone"!==g||h||r.hideRecent?r.stacked||r.noIncludeSubmitButton?/*#__PURE__*/e.jsx("span",{}):/*#__PURE__*/e.jsx(t.EmbeddedButton,{isSubmitting:C,onClick:z,disabled:v,children:"Submit"}):/*#__PURE__*/e.jsx(s.Chip,{color:"gray",children:"Recent"})]})}),r.stacked&&!r.noIncludeSubmitButton?/*#__PURE__*/e.jsx(t.PrimaryButton,{loading:C,loadingText:null,onClick:z,disabled:v,children:"Submit"}):null]})}));let u=/*#__PURE__*/r.styled.div.withConfig({displayName:"InputContainer",componentId:"sc-2a729487-0"})(["width:100%;"]),l=/*#__PURE__*/r.styled.label.withConfig({displayName:"PhoneNumberInput",componentId:"sc-2a729487-1"})(["--country-code-dropdown-width:calc(54px + calc(12 * ","px));--phone-input-extra-padding-left:calc(12px + calc(3 * ","px));display:block;position:relative;width:100%;@media (min-width:441px){--country-code-dropdown-width:calc(52px + calc(10 * ","px));}&& > select{font-size:16px;height:24px;position:absolute;margin:13px calc(var(--country-code-dropdown-width) / 4);line-height:24px;width:var(--country-code-dropdown-width);background-color:var(--privy-color-background);background-size:auto;background-position-x:right;cursor:pointer;@media (min-width:441px){font-size:14px;width:var(--country-code-dropdown-width);}:focus{outline:none;box-shadow:none;}}&& > input{font-size:16px;line-height:24px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:calc(100% - var(--country-code-dropdown-width));padding:12px 88px 12px calc(var(--country-code-dropdown-width) + var(--phone-input-extra-padding-left));padding-right:",";flex-grow:1;background:var(--privy-color-background);border:1px solid var(--privy-color-foreground-4);border-radius:var(--privy-border-radius-mdlg);width:100%;:focus{outline:none;border-color:var(--privy-color-accent);}:autofill,:-webkit-autofill{background:var(--privy-color-background);}@media (min-width:441px){font-size:14px;padding-right:78px;}}&& > :last-child{right:16px;position:absolute;top:50%;transform:translate(0,-50%);}&& > button:last-child{right:0px;line-height:24px;padding:13px 17px;:focus{outline:none;border-color:var(--privy-color-accent);}}&& > input::placeholder{color:var(--privy-color-foreground-3);}"],(e=>e.$callingCodeLength),(e=>e.$callingCodeLength),(e=>e.$callingCodeLength),(e=>e.$stacked?"16px":"88px"));exports.ConnectPhoneNumberForm=a;
