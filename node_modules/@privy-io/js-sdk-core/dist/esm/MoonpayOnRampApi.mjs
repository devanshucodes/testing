import t from"fetch-retry";import{MoonpayOnRampSign as r}from"@privy-io/public-api";import{MoonpayApiError as a}from"./Error.mjs";import{MoonpayEnvironments as o}from"./funding/moonpay.mjs";import"./chains/arbitrum.mjs";import"./chains/base.mjs";import"./chains/celo.mjs";import"./chains/mainnet.mjs";import"./chains/optimism.mjs";import"./chains/polygon.mjs";class i{_privyInternal;constructor(t){this._privyInternal=t}async sign(t){return await this._privyInternal.fetch(r,{body:t})}async getTransactionStatus({transactionId:r,useSandbox:i}){const s=i?"sandbox":"prod",{url:n,key:e}=o[s],m=await t(fetch,{retries:3,retryDelay:500})(`${n}/transactions/ext/${r}?apiKey=${e}`);if(!m.ok)throw new a({error:`Failed to fetch transaction status for Transaction ${r}`,code:"failed_to_fetch_moonpay_transaction_status",response:m});const c=await m.json();return Array.isArray(c)?c.at(0):void 0}}export{i as default};
