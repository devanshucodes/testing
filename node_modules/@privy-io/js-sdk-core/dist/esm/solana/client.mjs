import{v4 as t}from"uuid";class n{cluster;constructor(t){this.cluster=t}async invokeRpc({method:n,params:e}){const r=await fetch(this.cluster.rpcUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:t(),method:n,params:e})});return await r.json()}async getBalance(t){try{const n=await this.invokeRpc({method:"getBalance",params:[t]});return n.error?null:BigInt(n.result.value)}catch(t){return null}}async getTokenAccountsByOwner(t,n){try{const e=await this.invokeRpc({method:"getTokenAccountsByOwner",params:[t,{mint:n},{encoding:"jsonParsed"}]});if(e.error)return null;const r=e.result.value.at(0)?.account?.data?.parsed?.info?.tokenAmount;return r?{amount:BigInt(r.amount),decimals:r.decimals}:null}catch(t){return null}}async getAccountInfo(t){try{const n=await this.invokeRpc({method:"getAccountInfo",params:[t,{encoding:"jsonParsed"}]});if(n.error)return null;const e=n.result.value?.data?.parsed?.info;return e?{decimals:e.decimals}:null}catch(t){return null}}}export{n as SolanaClient};
