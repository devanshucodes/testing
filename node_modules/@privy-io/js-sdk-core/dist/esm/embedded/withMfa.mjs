import{PrivyIframeError as e}from"./errors.mjs";import"./types.mjs";async function t(t,r,i,n,a=!1,o,c){let s=a;const m=async o=>{if(s){o===(a?0:1)?n():i.current?.reject(new e("missing_or_invalid_mfa","MFA verification failed, retry."));const s=await new Promise(((t,n)=>{r.current={resolve:t,reject:n},setTimeout((()=>{const t=new e("mfa_timeout","Timed out waiting for MFA code");i.current?.reject(t),n(t)}),c)}));return await t(s)}return await t()};let f=null;for(let e=0;e<o;e++)try{f=await m(e),i.current?.resolve(void 0);break}catch(e){if("missing_or_invalid_mfa"!==e.type)throw i.current?.resolve(void 0),e;s=!0}if(null===f){const t=new e("mfa_verification_max_attempts_reached","Max MFA verification attempts reached");throw i.current?.reject(t),t}return f}export{t as withMfa};
