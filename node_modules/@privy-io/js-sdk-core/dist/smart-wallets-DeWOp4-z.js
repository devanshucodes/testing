"use strict";var e=require("permissionless"),t=require("viem"),n=require("@privy-io/public-api");function a(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function s(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function r(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function i(e,t){s(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const o=BigInt(2**32-1),c=BigInt(32);function u(e,t=!1){return t?{h:Number(e&o),l:Number(e>>c&o)}:{h:0|Number(e>>c&o),l:0|Number(e&o)}}function d(e,t=!1){let n=new Uint32Array(e.length),a=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:r,l:i}=u(e[s],t);[n[s],a[s]]=[r,i]}return[n,a]}const p="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,l=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),y=(e,t)=>e<<32-t|e>>>t,f=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function m(e){for(let n=0;n<e.length;n++)e[n]=(t=e[n])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}const h=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function b(e){s(e);let t="";for(let n=0;n<e.length;n++)t+=h[e[n]];return t}const g={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function w(e){return e>=g._0&&e<=g._9?e-g._0:e>=g._A&&e<=g._F?e-(g._A-10):e>=g._a&&e<=g._f?e-(g._a-10):void 0}function v(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),s(e),e}class x{clone(){return this._cloneInto()}}function A(e){const t=t=>e().update(v(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function P(e=32){if(p&&"function"==typeof p.getRandomValues)return p.getRandomValues(new Uint8Array(e));if(p&&"function"==typeof p.randomBytes)return p.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const E=[],I=[],O=[],D=BigInt(0),B=BigInt(1),S=BigInt(2),T=BigInt(7),G=BigInt(256),F=BigInt(113);for(let e=0,t=B,n=1,a=0;e<24;e++){[n,a]=[a,(2*n+3*a)%5],E.push(2*(5*a+n)),I.push((e+1)*(e+2)/2%64);let s=D;for(let e=0;e<7;e++)t=(t<<B^(t>>T)*F)%G,t&S&&(s^=B<<(B<<BigInt(e))-B);O.push(s)}const[$,C]=d(O,!0),M=(e,t,n)=>n>32?((e,t,n)=>t<<n-32|e>>>64-n)(e,t,n):((e,t,n)=>e<<n|t>>>32-n)(e,t,n),L=(e,t,n)=>n>32?((e,t,n)=>e<<n-32|t>>>64-n)(e,t,n):((e,t,n)=>t<<n|e>>>32-n)(e,t,n);class k extends x{constructor(e,t,n,s=!1,r=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,a(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){f||m(this.state32),function(e,t=24){const n=new Uint32Array(10);for(let a=24-t;a<24;a++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const a=(t+8)%10,s=(t+2)%10,r=n[s],i=n[s+1],o=M(r,i,1)^n[a],c=L(r,i,1)^n[a+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const a=I[n],r=M(t,s,a),i=L(t,s,a),o=E[n];t=e[o],s=e[o+1],e[o]=r,e[o+1]=i}for(let t=0;t<50;t+=10){for(let a=0;a<10;a++)n[a]=e[t+a];for(let a=0;a<10;a++)e[t+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=$[a],e[1]^=C[a]}n.fill(0)}(this.state32,this.rounds),f||m(this.state32),this.posOut=0,this.pos=0}update(e){r(this);const{blockLen:t,state:n}=this,a=(e=v(e)).length;for(let s=0;s<a;){const r=Math.min(t-this.pos,a-s);for(let t=0;t<r;t++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:a}=this;e[n]^=t,0!=(128&t)&&n===a-1&&this.keccak(),e[a-1]^=128,this.keccak()}writeInto(e){r(this,!1),s(e),this.finish();const t=this.state,{blockLen:n}=this;for(let a=0,s=e.length;a<s;){this.posOut>=n&&this.keccak();const r=Math.min(n-this.posOut,s-a);e.set(t.subarray(this.posOut,this.posOut+r),a),this.posOut+=r,a+=r}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return a(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(i(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:a,rounds:s,enableXOF:r}=this;return e||(e=new k(t,n,a,r,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=a,e.enableXOF=r,e.destroyed=this.destroyed,e}}const N=((e,t,n)=>A((()=>new k(t,e,n))))(1,136,32),U=BigInt(0),R=BigInt(1),_=BigInt(2);function z(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function j(e){if(!z(e))throw new Error("Uint8Array expected")}function V(e,t){if("boolean"!=typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)}const H=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function q(e){j(e);let t="";for(let n=0;n<e.length;n++)t+=H[e[n]];return t}function W(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Z(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const Y={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function K(e){return e>=Y._0&&e<=Y._9?e-Y._0:e>=Y._A&&e<=Y._F?e-(Y._A-10):e>=Y._a&&e<=Y._f?e-(Y._a-10):void 0}function X(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const a=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=K(e.charCodeAt(s)),r=K(e.charCodeAt(s+1));if(void 0===n||void 0===r){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}a[t]=16*n+r}return a}function J(e){return Z(q(e))}function Q(e){return j(e),Z(q(Uint8Array.from(e).reverse()))}function ee(e,t){return X(e.toString(16).padStart(2*t,"0"))}function te(e,t){return ee(e,t).reverse()}function ne(e,t,n){let a;if("string"==typeof t)try{a=X(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!z(t))throw new Error(`${e} must be hex string or Uint8Array`);a=Uint8Array.from(t)}const s=a.length;if("number"==typeof n&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return a}function ae(...e){let t=0;for(let n=0;n<e.length;n++){const a=e[n];j(a),t+=a.length}const n=new Uint8Array(t);for(let t=0,a=0;t<e.length;t++){const s=e[t];n.set(s,a),a+=s.length}return n}const se=e=>"bigint"==typeof e&&U<=e;function re(e,t,n){return se(e)&&se(t)&&se(n)&&t<=e&&e<n}function ie(e,t,n,a){if(!re(t,n,a))throw new Error(`expected valid ${e}: ${n} <= n < ${a}, got ${typeof t} ${t}`)}function oe(e){let t;for(t=0;e>U;e>>=R,t+=1);return t}const ce=e=>(_<<BigInt(e-1))-R,ue=e=>new Uint8Array(e),de=e=>Uint8Array.from(e);function pe(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let a=ue(e),s=ue(e),r=0;const i=()=>{a.fill(1),s.fill(0),r=0},o=(...e)=>n(s,a,...e),c=(e=ue())=>{s=o(de([0]),e),a=o(),0!==e.length&&(s=o(de([1]),e),a=o())},u=()=>{if(r++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){a=o();const t=a.slice();n.push(t),e+=a.length}return ae(...n)};return(e,t)=>{let n;for(i(),c(e);!(n=t(u()));)c();return i(),n}}const le={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||z(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function ye(e,t,n={}){const a=(t,n,a)=>{const s=le[n];if("function"!=typeof s)throw new Error(`Invalid validator "${n}", expected function`);const r=e[t];if(!(a&&void 0===r||s(r,e)))throw new Error(`Invalid param ${String(t)}=${r} (${typeof r}), expected ${n}`)};for(const[e,n]of Object.entries(t))a(e,n,!1);for(const[e,t]of Object.entries(n))a(e,t,!0);return e}function fe(e){const t=new WeakMap;return(n,...a)=>{const s=t.get(n);if(void 0!==s)return s;const r=e(n,...a);return t.set(n,r),r}}var me=Object.freeze({__proto__:null,aInRange:ie,abool:V,abytes:j,bitGet:function(e,t){return e>>BigInt(t)&R},bitLen:oe,bitMask:ce,bitSet:function(e,t,n){return e|(n?R:U)<<BigInt(t)},bytesToHex:q,bytesToNumberBE:J,bytesToNumberLE:Q,concatBytes:ae,createHmacDrbg:pe,ensureBytes:ne,equalBytes:function(e,t){if(e.length!==t.length)return!1;let n=0;for(let a=0;a<e.length;a++)n|=e[a]^t[a];return 0===n},hexToBytes:X,hexToNumber:Z,inRange:re,isBytes:z,memoized:fe,notImplemented:()=>{throw new Error("not implemented")},numberToBytesBE:ee,numberToBytesLE:te,numberToHexUnpadded:W,numberToVarBytesBE:function(e){return X(W(e))},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},validateObject:ye});function he(e){return`0x${b(e)}`}function be(e){return function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const a=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=w(e.charCodeAt(s)),r=w(e.charCodeAt(s+1));if(void 0===n||void 0===r){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}a[t]=16*n+r}return a}(e.slice(2))}const ge=(e,t,n)=>e&t^e&n^t&n;class we extends x{constructor(e,t,n,a){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=l(this.buffer)}update(e){r(this);const{view:t,buffer:n,blockLen:a}=this,s=(e=v(e)).length;for(let r=0;r<s;){const i=Math.min(a-this.pos,s-r);if(i!==a)n.set(e.subarray(r,r+i),this.pos),this.pos+=i,r+=i,this.pos===a&&(this.process(t,0),this.pos=0);else{const t=l(e);for(;a<=s-r;r+=a)this.process(t,r)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){r(this),i(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:a,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>a-o&&(this.process(n,0),o=0);for(let e=o;e<a;e++)t[e]=0;!function(e,t,n,a){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,a);const s=BigInt(32),r=BigInt(4294967295),i=Number(n>>s&r),o=Number(n&r),c=a?4:0,u=a?0:4;e.setUint32(t+c,i,a),e.setUint32(t+u,o,a)}(n,a-8,BigInt(8*this.length),s),this.process(n,0);const c=l(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=u/4,p=this.get();if(d>p.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<d;e++)c.setUint32(4*e,p[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:a,finished:s,destroyed:r,pos:i}=this;return e.length=a,e.pos=i,e.finished=s,e.destroyed=r,a%t&&e.buffer.set(n),e}}const ve=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ae=new Uint32Array(64);class Pe extends we{constructor(){super(64,32,8,!1),this.A=0|xe[0],this.B=0|xe[1],this.C=0|xe[2],this.D=0|xe[3],this.E=0|xe[4],this.F=0|xe[5],this.G=0|xe[6],this.H=0|xe[7]}get(){const{A:e,B:t,C:n,D:a,E:s,F:r,G:i,H:o}=this;return[e,t,n,a,s,r,i,o]}set(e,t,n,a,s,r,i,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|a,this.E=0|s,this.F=0|r,this.G=0|i,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)Ae[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Ae[e-15],n=Ae[e-2],a=y(t,7)^y(t,18)^t>>>3,s=y(n,17)^y(n,19)^n>>>10;Ae[e]=s+Ae[e-7]+a+Ae[e-16]|0}let{A:n,B:a,C:s,D:r,E:i,F:o,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(y(i,6)^y(i,11)^y(i,25))+((d=i)&o^~d&c)+ve[e]+Ae[e]|0,p=(y(n,2)^y(n,13)^y(n,22))+ge(n,a,s)|0;u=c,c=o,o=i,i=r+t|0,r=s,s=a,a=n,n=t+p|0}var d;n=n+this.A|0,a=a+this.B|0,s=s+this.C|0,r=r+this.D|0,i=i+this.E|0,o=o+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,a,s,r,i,o,c,u)}roundClean(){Ae.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ee=A((()=>new Pe));class Ie extends x{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");a(e.outputLen),a(e.blockLen)}(e);const n=v(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,r=new Uint8Array(s);r.set(n.length>s?e.create().update(n).digest():n);for(let e=0;e<r.length;e++)r[e]^=54;this.iHash.update(r),this.oHash=e.create();for(let e=0;e<r.length;e++)r[e]^=106;this.oHash.update(r),r.fill(0)}update(e){return r(this),this.iHash.update(e),this}digestInto(e){r(this),s(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:a,destroyed:s,blockLen:r,outputLen:i}=this;return e.finished=a,e.destroyed=s,e.blockLen=r,e.outputLen=i,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Oe=(e,t,n)=>new Ie(e,t).update(n).digest();Oe.create=(e,t)=>new Ie(e,t)
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */;const De=BigInt(0),Be=BigInt(1),Se=BigInt(2),Te=BigInt(3),Ge=BigInt(4),Fe=BigInt(5),$e=BigInt(8);function Ce(e,t){const n=e%t;return n>=De?n:t+n}function Me(e,t,n){if(n<=De||t<De)throw new Error("Expected power/modulo > 0");if(n===Be)return De;let a=Be;for(;t>De;)t&Be&&(a=a*e%n),e=e*e%n,t>>=Be;return a}function Le(e,t,n){let a=e;for(;t-- >De;)a*=a,a%=n;return a}function ke(e,t){if(e===De||t<=De)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=Ce(e,t),a=t,s=De,r=Be;for(;n!==De;){const e=a%n,t=s-r*(a/n);a=n,n=e,s=r,r=t}if(a!==Be)throw new Error("invert: does not exist");return Ce(s,t)}function Ne(e){if(e%Ge===Te){const t=(e+Be)/Ge;return function(e,n){const a=e.pow(n,t);if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}if(e%$e===Fe){const t=(e-Fe)/$e;return function(e,n){const a=e.mul(n,Se),s=e.pow(a,t),r=e.mul(n,s),i=e.mul(e.mul(r,Se),s),o=e.mul(r,e.sub(i,e.ONE));if(!e.eql(e.sqr(o),n))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-Be)/Se;let n,a,s;for(n=e-Be,a=0;n%Se===De;n/=Se,a++);for(s=Se;s<e&&Me(s,t,e)!==e-Be;s++);if(1===a){const t=(e+Be)/Ge;return function(e,n){const a=e.pow(n,t);if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}const r=(n+Be)/Se;return function(e,i){if(e.pow(i,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=a,c=e.pow(e.mul(e.ONE,s),n),u=e.pow(i,r),d=e.pow(i,n);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(d);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,Be<<BigInt(o-t-1));c=e.sqr(n),u=e.mul(u,n),d=e.mul(d,c),o=t}return u}}(e)}BigInt(9),BigInt(16);const Ue=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Re(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function _e(e,t,n=!1,a={}){if(e<=De)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:r}=Re(e,t);if(r>2048)throw new Error("Field lengths over 2048 bytes are not supported");const i=Ne(e),o=Object.freeze({ORDER:e,BITS:s,BYTES:r,MASK:ce(s),ZERO:De,ONE:Be,create:t=>Ce(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return De<=t&&t<e},is0:e=>e===De,isOdd:e=>(e&Be)===Be,neg:t=>Ce(-t,e),eql:(e,t)=>e===t,sqr:t=>Ce(t*t,e),add:(t,n)=>Ce(t+n,e),sub:(t,n)=>Ce(t-n,e),mul:(t,n)=>Ce(t*n,e),pow:(e,t)=>function(e,t,n){if(n<De)throw new Error("Expected power > 0");if(n===De)return e.ONE;if(n===Be)return t;let a=e.ONE,s=t;for(;n>De;)n&Be&&(a=e.mul(a,s)),s=e.sqr(s),n>>=Be;return a}(o,e,t),div:(t,n)=>Ce(t*ke(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ke(t,e),sqrt:a.sqrt||(e=>i(o,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),a=t.reduce(((t,a,s)=>e.is0(a)?t:(n[s]=t,e.mul(t,a))),e.ONE),s=e.inv(a);return t.reduceRight(((t,a,s)=>e.is0(a)?t:(n[s]=e.mul(t,n[s]),e.mul(t,a))),s),n}(o,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?te(e,r):ee(e,r),fromBytes:e=>{if(e.length!==r)throw new Error(`Fp.fromBytes: expected ${r}, got ${e.length}`);return n?Q(e):J(e)}});return Object.freeze(o)}function ze(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function je(e){const t=ze(e);return t+Math.ceil(t/2)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Ve=BigInt(0),He=BigInt(1),qe=new WeakMap,We=new WeakMap;function Ze(e){return ye(e.Fp,Ue.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),ye(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Re(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ye(e){void 0!==e.lowS&&V("lowS",e.lowS),void 0!==e.prehash&&V("prehash",e.prehash)}const{bytesToNumberBE:Ke,hexToBytes:Xe}=me,Je={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{const{Err:n}=Je;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const a=t.length/2,s=W(a);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const r=a>127?W(s.length/2|128):"";return`${W(e)}${r}${s}${t}`},decode(e,t){const{Err:n}=Je;let a=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[a++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[a++];let r=0;if(!!(128&s)){const e=127&s;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const i=t.subarray(a,a+e);if(i.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===i[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of i)r=r<<8|e;if(a+=e,r<128)throw new n("tlv.decode(long): not minimal encoding")}else r=s;const i=t.subarray(a,a+r);if(i.length!==r)throw new n("tlv.decode: wrong value length");return{v:i,l:t.subarray(a+r)}}},_int:{encode(e){const{Err:t}=Je;if(e<Qe)throw new t("integer: negative integers are not allowed");let n=W(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected assertion");return n},decode(e){const{Err:t}=Je;if(128&e[0])throw new t("Invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("Invalid signature integer: unnecessary leading zero");return Ke(e)}},toSig(e){const{Err:t,_int:n,_tlv:a}=Je,s="string"==typeof e?Xe(e):e;j(s);const{v:r,l:i}=a.decode(48,s);if(i.length)throw new t("Invalid signature: left bytes after parsing");const{v:o,l:c}=a.decode(2,r),{v:u,l:d}=a.decode(2,c);if(d.length)throw new t("Invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=Je,a=`${t.encode(2,n.encode(e.r))}${t.encode(2,n.encode(e.s))}`;return t.encode(48,a)}},Qe=BigInt(0),et=BigInt(1);BigInt(2);const tt=BigInt(3);function nt(e){const t=function(e){const t=Ze(e);ye(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:a,a:s}=t;if(n){if(!a.eql(s,a.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,a=_e(t.n,t.nBitLength),s=t.toBytes||((e,t,a)=>{const s=t.toAffine();return ae(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),r=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function i(e){const{a:a,b:s}=t,r=n.sqr(e),i=n.mul(r,e);return n.add(n.add(i,n.mul(e,a)),s)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){const{allowedPrivateKeyLengths:n,nByteLength:a,wrapPrivateKey:s,n:r}=t;if(n&&"bigint"!=typeof e){if(z(e)&&(e=q(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*a,"0")}let i;try{i="bigint"==typeof e?e:J(ne("private key",e,a))}catch(t){throw new Error(`private key must be ${a} bytes, hex or bigint, not ${typeof e}`)}return s&&(i=Ce(i,r)),ie("private key",i,et,r),i}function c(e){if(!(e instanceof p))throw new Error("ProjectivePoint expected")}const u=fe(((e,t)=>{const{px:a,py:s,pz:r}=e;if(n.eql(r,n.ONE))return{x:a,y:s};const i=e.is0();null==t&&(t=i?n.ONE:n.inv(r));const o=n.mul(a,t),c=n.mul(s,t),u=n.mul(r,t);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:o,y:c}})),d=fe((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:a,y:s}=e.toAffine();if(!n.isValid(a)||!n.isValid(s))throw new Error("bad point: x or y not FE");const r=n.sqr(s),o=i(a);if(!n.eql(r,o))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class p{constructor(e,t,a){if(this.px=e,this.py=t,this.pz=a,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==a||!n.isValid(a))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:a}=e||{};if(!e||!n.isValid(t)||!n.isValid(a))throw new Error("invalid affine point");if(e instanceof p)throw new Error("projective point not allowed");const s=e=>n.eql(e,n.ZERO);return s(t)&&s(a)?p.ZERO:new p(t,a,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(p.fromAffine)}static fromHex(e){const t=p.fromAffine(r(ne("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return p.BASE.multiply(o(e))}static msm(e,t){return function(e,t,n,a){if(!Array.isArray(n)||!Array.isArray(a)||a.length!==n.length)throw new Error("arrays of points and scalars must have equal length");a.forEach(((e,n)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${n}`)})),n.forEach(((t,n)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${n}`)}));const s=oe(BigInt(n.length)),r=s>12?s-3:s>4?s-2:s?2:1,i=(1<<r)-1,o=new Array(i+1).fill(e.ZERO),c=Math.floor((t.BITS-1)/r)*r;let u=e.ZERO;for(let t=c;t>=0;t-=r){o.fill(e.ZERO);for(let e=0;e<a.length;e++){const s=a[e],r=Number(s>>BigInt(t)&BigInt(i));o[r]=o[r].add(n[e])}let s=e.ZERO;for(let t=o.length-1,n=e.ZERO;t>0;t--)n=n.add(o[t]),s=s.add(n);if(u=u.add(s),0!==t)for(let e=0;e<r;e++)u=u.double()}return u}(p,a,e,t)}_setWindowSize(e){y.setWindowSize(this,e)}assertValidity(){d(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:a,pz:s}=this,{px:r,py:i,pz:o}=e,u=n.eql(n.mul(t,o),n.mul(r,s)),d=n.eql(n.mul(a,o),n.mul(i,s));return u&&d}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:a}=t,s=n.mul(a,tt),{px:r,py:i,pz:o}=this;let c=n.ZERO,u=n.ZERO,d=n.ZERO,l=n.mul(r,r),y=n.mul(i,i),f=n.mul(o,o),m=n.mul(r,i);return m=n.add(m,m),d=n.mul(r,o),d=n.add(d,d),c=n.mul(e,d),u=n.mul(s,f),u=n.add(c,u),c=n.sub(y,u),u=n.add(y,u),u=n.mul(c,u),c=n.mul(m,c),d=n.mul(s,d),f=n.mul(e,f),m=n.sub(l,f),m=n.mul(e,m),m=n.add(m,d),d=n.add(l,l),l=n.add(d,l),l=n.add(l,f),l=n.mul(l,m),u=n.add(u,l),f=n.mul(i,o),f=n.add(f,f),l=n.mul(f,m),c=n.sub(c,l),d=n.mul(f,y),d=n.add(d,d),d=n.add(d,d),new p(c,u,d)}add(e){c(e);const{px:a,py:s,pz:r}=this,{px:i,py:o,pz:u}=e;let d=n.ZERO,l=n.ZERO,y=n.ZERO;const f=t.a,m=n.mul(t.b,tt);let h=n.mul(a,i),b=n.mul(s,o),g=n.mul(r,u),w=n.add(a,s),v=n.add(i,o);w=n.mul(w,v),v=n.add(h,b),w=n.sub(w,v),v=n.add(a,r);let x=n.add(i,u);return v=n.mul(v,x),x=n.add(h,g),v=n.sub(v,x),x=n.add(s,r),d=n.add(o,u),x=n.mul(x,d),d=n.add(b,g),x=n.sub(x,d),y=n.mul(f,v),d=n.mul(m,g),y=n.add(d,y),d=n.sub(b,y),y=n.add(b,y),l=n.mul(d,y),b=n.add(h,h),b=n.add(b,h),g=n.mul(f,g),v=n.mul(m,v),b=n.add(b,g),g=n.sub(h,g),g=n.mul(f,g),v=n.add(v,g),h=n.mul(b,v),l=n.add(l,h),h=n.mul(x,v),d=n.mul(w,d),d=n.sub(d,h),h=n.mul(w,b),y=n.mul(x,y),y=n.add(y,h),new p(d,l,y)}subtract(e){return this.add(e.negate())}is0(){return this.equals(p.ZERO)}wNAF(e){return y.wNAFCached(this,e,p.normalizeZ)}multiplyUnsafe(e){ie("scalar",e,Qe,t.n);const a=p.ZERO;if(e===Qe)return a;if(e===et)return this;const{endo:s}=t;if(!s)return y.unsafeLadder(this,e);let{k1neg:r,k1:i,k2neg:o,k2:c}=s.splitScalar(e),u=a,d=a,l=this;for(;i>Qe||c>Qe;)i&et&&(u=u.add(l)),c&et&&(d=d.add(l)),l=l.double(),i>>=et,c>>=et;return r&&(u=u.negate()),o&&(d=d.negate()),d=new p(n.mul(d.px,s.beta),d.py,d.pz),u.add(d)}multiply(e){const{endo:a,n:s}=t;let r,i;if(ie("scalar",e,et,s),a){const{k1neg:t,k1:s,k2neg:o,k2:c}=a.splitScalar(e);let{p:u,f:d}=this.wNAF(s),{p:l,f:f}=this.wNAF(c);u=y.constTimeNegate(t,u),l=y.constTimeNegate(o,l),l=new p(n.mul(l.px,a.beta),l.py,l.pz),r=u.add(l),i=d.add(f)}else{const{p:t,f:n}=this.wNAF(e);r=t,i=n}return p.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const a=p.BASE,s=(e,t)=>t!==Qe&&t!==et&&e.equals(a)?e.multiply(t):e.multiplyUnsafe(t),r=s(this,t).add(s(e,n));return r.is0()?void 0:r}toAffine(e){return u(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===et)return!0;if(n)return n(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===et?this:n?n(p,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return V("isCompressed",e),this.assertValidity(),s(p,this,e)}toHex(e=!0){return V("isCompressed",e),q(this.toRawBytes(e))}}p.BASE=new p(t.Gx,t.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const l=t.nBitLength,y=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},a=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},s=e=>(a(e),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let a=e.ZERO,s=t;for(;n>Ve;)n&He&&(a=a.add(s)),s=s.double(),n>>=He;return a},precomputeWindow(e,t){const{windows:n,windowSize:a}=s(t),r=[];let i=e,o=i;for(let e=0;e<n;e++){o=i,r.push(o);for(let e=1;e<a;e++)o=o.add(i),r.push(o);i=o.double()}return r},wNAF(t,a,r){const{windows:i,windowSize:o}=s(t);let c=e.ZERO,u=e.BASE;const d=BigInt(2**t-1),p=2**t,l=BigInt(t);for(let e=0;e<i;e++){const t=e*o;let s=Number(r&d);r>>=l,s>o&&(s-=p,r+=He);const i=t,y=t+Math.abs(s)-1,f=e%2!=0,m=s<0;0===s?u=u.add(n(f,a[i])):c=c.add(n(m,a[y]))}return{p:c,f:u}},wNAFCached(e,t,n){const a=We.get(e)||1;let s=qe.get(e);return s||(s=this.precomputeWindow(e,a),1!==a&&qe.set(e,n(s))),this.wNAF(a,s,t)},setWindowSize(e,t){a(t),We.set(e,t),qe.delete(e)}}}(p,t.endo?Math.ceil(l/2):l);return{CURVE:t,ProjectivePoint:p,normPrivateKeyToScalar:o,weierstrassEquation:i,isWithinCurveOrder:function(e){return re(e,et,t.n)}}}function at(e){const t=function(e){const t=Ze(e);return ye(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:a}=t,s=n.BYTES+1,r=2*n.BYTES+1;function i(e){return Ce(e,a)}function o(e){return ke(e,a)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:p}=nt({...t,toBytes(e,t,a){const s=t.toAffine(),r=n.toBytes(s.x),i=ae;return V("isCompressed",a),a?i(Uint8Array.from([t.hasEvenY()?2:3]),r):i(Uint8Array.from([4]),r,n.toBytes(s.y))},fromBytes(e){const t=e.length,a=e[0],i=e.subarray(1);if(t!==s||2!==a&&3!==a){if(t===r&&4===a){return{x:n.fromBytes(i.subarray(0,n.BYTES)),y:n.fromBytes(i.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${s} compressed bytes or ${r} uncompressed bytes`)}{const e=J(i);if(!re(e,et,n.ORDER))throw new Error("Point is not on curve");const t=d(e);let s;try{s=n.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return 1==(1&a)!==((s&et)===et)&&(s=n.neg(s)),{x:e,y:s}}}}),l=e=>q(ee(e,t.nByteLength));function y(e){return e>a>>et}const f=(e,t,n)=>J(e.slice(t,n));class m{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=ne("compactSignature",e,2*n),new m(f(e,0,n),f(e,n,2*n))}static fromDER(e){const{r:t,s:n}=Je.toSig(ne("DER",e));return new m(t,n)}assertValidity(){ie("r",this.r,et,a),ie("s",this.s,et,a)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:a,s:s,recovery:r}=this,u=w(ne("msgHash",e));if(null==r||![0,1,2,3].includes(r))throw new Error("recovery id invalid");const d=2===r||3===r?a+t.n:a;if(d>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const p=0==(1&r)?"02":"03",y=c.fromHex(p+l(d)),f=o(d),m=i(-u*f),h=i(s*f),b=c.BASE.multiplyAndAddUnsafe(y,m,h);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return X(this.toDERHex())}toDERHex(){return Je.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return X(this.toCompactHex())}toCompactHex(){return l(this.r)+l(this.s)}}const h={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=je(t.n);return function(e,t,n=!1){const a=e.length,s=ze(t),r=je(t);if(a<16||a<r||a>1024)throw new Error(`expected ${r}-1024 bytes of input, got ${a}`);const i=Ce(n?J(e):Q(e),t-Be)+Be;return n?te(i,s):ee(i,s)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function b(e){const t=z(e),n="string"==typeof e,a=(t||n)&&e.length;return t?a===s||a===r:n?a===2*s||a===2*r:e instanceof c}const g=t.bits2int||function(e){const n=J(e),a=8*e.length-t.nBitLength;return a>0?n>>BigInt(a):n},w=t.bits2int_modN||function(e){return i(g(e))},v=ce(t.nBitLength);function x(e){return ie(`num < 2^${t.nBitLength}`,e,Qe,v),ee(e,t.nByteLength)}function A(e,a,s=P){if(["recovered","canonical"].some((e=>e in s)))throw new Error("sign() legacy options not supported");const{hash:r,randomBytes:d}=t;let{lowS:l,prehash:f,extraEntropy:h}=s;null==l&&(l=!0),e=ne("msgHash",e),Ye(s),f&&(e=ne("prehashed msgHash",r(e)));const b=w(e),v=u(a),A=[x(v),x(b)];if(null!=h&&!1!==h){const e=!0===h?d(n.BYTES):h;A.push(ne("extraEntropy",e))}const E=ae(...A),I=b;return{seed:E,k2sig:function(e){const t=g(e);if(!p(t))return;const n=o(t),a=c.BASE.multiply(t).toAffine(),s=i(a.x);if(s===Qe)return;const r=i(n*i(I+s*v));if(r===Qe)return;let u=(a.x===s?0:2)|Number(a.y&et),d=r;return l&&y(r)&&(d=function(e){return y(e)?i(-e):e}(r),u^=1),new m(s,d,u)}}}const P={lowS:t.lowS,prehash:!1},E={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(b(e))throw new Error("first arg must be private key");if(!b(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(n)},sign:function(e,n,a=P){const{seed:s,k2sig:r}=A(e,n,a),i=t;return pe(i.hash.outputLen,i.nByteLength,i.hmac)(s,r)},verify:function(e,n,a,s=E){const r=e;if(n=ne("msgHash",n),a=ne("publicKey",a),"strict"in s)throw new Error("options.strict was renamed to lowS");Ye(s);const{lowS:u,prehash:d}=s;let p,l;try{if("string"==typeof r||z(r))try{p=m.fromDER(r)}catch(e){if(!(e instanceof Je.Err))throw e;p=m.fromCompact(r)}else{if("object"!=typeof r||"bigint"!=typeof r.r||"bigint"!=typeof r.s)throw new Error("PARSE");{const{r:e,s:t}=r;p=new m(e,t)}}l=c.fromHex(a)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&p.hasHighS())return!1;d&&(n=t.hash(n));const{r:y,s:f}=p,h=w(n),b=o(f),g=i(h*b),v=i(y*b),x=c.BASE.multiplyAndAddUnsafe(l,g,v)?.toAffine();return!!x&&i(x.x)===y},ProjectivePoint:c,Signature:m,utils:h}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function st(e){return{hash:e,hmac:(t,...n)=>Oe(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const a=e[n];s(a),t+=a.length}const n=new Uint8Array(t);for(let t=0,a=0;t<e.length;t++){const s=e[t];n.set(s,a),a+=s.length}return n}(...n)),randomBytes:P}}function rt(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new Tt(e.type);return`${e.name}(${it(e.inputs,{includeName:t})})`}function it(e,{includeName:t=!1}={}){return e?e.map((e=>function(e,{includeName:t}){if(e.type.startsWith("tuple"))return`(${it(e.components,{includeName:t})})${e.type.slice(5)}`;return e.type+(t&&e.name?` ${e.name}`:"")}(e,{includeName:t}))).join(t?", ":","):""}function ot(e,{strict:t=!0}={}){return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}function ct(e){return ot(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}BigInt(4);const ut="2.21.36";let dt=({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,pt=`viem@${ut}`,lt=class e extends Error{constructor(t,n={}){const a=n.cause instanceof e?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof e&&n.cause.docsPath||n.docsPath,r=dt?.({...n,docsPath:s});super([t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...r?[`Docs: ${r}`]:[],...a?[`Details: ${a}`]:[],...pt?[`Version: ${pt}`]:[]].join("\n"),n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=a,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=ut}walk(e){return yt(this,e)}};function yt(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e?yt(e.cause,t):t?null:e}class ft extends lt{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class mt extends lt{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class ht extends lt{constructor({data:e,params:t,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${it(t,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=n}}class bt extends lt{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class gt extends lt{constructor({expectedLength:e,givenLength:t,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${t}`].join("\n"),{name:"AbiEncodingArrayLengthMismatchError"})}}class wt extends lt{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${ct(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class vt extends lt{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join("\n"),{name:"AbiEncodingLengthMismatchError"})}}class xt extends lt{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class At extends lt{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionNotFoundError"})}}class Pt extends lt{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}}class Et extends lt{constructor(e,{docsPath:t}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiFunctionSignatureNotFoundError"})}}class It extends lt{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${rt(e.abiItem)}\`, and`,`\`${t.type}\` in \`${rt(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class Ot extends lt{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}}class Dt extends lt{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiEncodingType"})}}class Bt extends lt{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiDecodingType"})}}class St extends lt{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n"),{name:"InvalidArrayError"})}}class Tt extends lt{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n"),{name:"InvalidDefinitionTypeError"})}}class Gt extends lt{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}class Ft extends lt{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class $t extends lt{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class Ct extends lt{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}class Mt extends lt{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${t} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function Lt(e,{dir:t,size:n=32}={}){return"string"==typeof e?kt(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new Ct({size:e.length,targetSize:n,type:"bytes"});const a=new Uint8Array(n);for(let s=0;s<n;s++){const r="right"===t;a[r?s:n-s-1]=e[r?s:e.length-s-1]}return a}(e,{dir:t,size:n})}function kt(e,{dir:t,size:n=32}={}){if(null===n)return e;const a=e.replace("0x","");if(a.length>2*n)throw new Ct({size:Math.ceil(a.length/2),targetSize:n,type:"hex"});return`0x${a["right"===t?"padEnd":"padStart"](2*n,"0")}`}class Nt extends lt{constructor({max:e,min:t,signed:n,size:a,value:s}){super(`Number "${s}" is not in safe ${a?`${8*a}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class Ut extends lt{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Rt extends lt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function _t(e,{dir:t="left"}={}){let n="string"==typeof e?e.replace("0x",""):e,a=0;for(let e=0;e<n.length-1&&"0"===n["left"===t?e:n.length-e-1].toString();e++)a++;return n="left"===t?n.slice(a):n.slice(0,n.length-a),"string"==typeof e?(1===n.length&&"right"===t&&(n=`${n}0`),`0x${n.length%2==1?`0${n}`:n}`):n}function zt(e,{size:t}){if(ct(e)>t)throw new Rt({givenSize:ct(e),maxSize:t})}function jt(e,t={}){const{signed:n}=t;t.size&&zt(e,{size:t.size});const a=BigInt(e);if(!n)return a;const s=(e.length-2)/2;return a<=(1n<<8n*BigInt(s)-1n)-1n?a:a-BigInt(`0x${"f".padStart(2*s,"f")}`)-1n}function Vt(e,t={}){return Number(jt(e,t))}const Ht=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function qt(e,t={}){return"number"==typeof e||"bigint"==typeof e?Yt(e,t):"string"==typeof e?Xt(e,t):"boolean"==typeof e?Wt(e,t):Zt(e,t)}function Wt(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?(zt(n,{size:t.size}),Lt(n,{size:t.size})):n}function Zt(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=Ht[e[t]];const a=`0x${n}`;return"number"==typeof t.size?(zt(a,{size:t.size}),Lt(a,{dir:"right",size:t.size})):a}function Yt(e,t={}){const{signed:n,size:a}=t,s=BigInt(e);let r;a?r=n?(1n<<8n*BigInt(a)-1n)-1n:2n**(8n*BigInt(a))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));const i="bigint"==typeof r&&n?-r-1n:0;if(r&&s>r||s<i){const t="bigint"==typeof e?"n":"";throw new Nt({max:r?`${r}${t}`:void 0,min:`${i}${t}`,signed:n,size:a,value:`${e}${t}`})}const o=`0x${(n&&s<0?(1n<<BigInt(8*a))+BigInt(s):s).toString(16)}`;return a?Lt(o,{size:a}):o}const Kt=new TextEncoder;function Xt(e,t={}){return Zt(Kt.encode(e),t)}const Jt=new TextEncoder;function Qt(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){const n=Yt(e,t);return nn(n)}(e,t):"boolean"==typeof e?function(e,t={}){const n=new Uint8Array(1);if(n[0]=Number(e),"number"==typeof t.size)return zt(n,{size:t.size}),Lt(n,{size:t.size});return n}(e,t):ot(e)?nn(e,t):an(e,t)}const en={zero:48,nine:57,A:65,F:70,a:97,f:102};function tn(e){return e>=en.zero&&e<=en.nine?e-en.zero:e>=en.A&&e<=en.F?e-(en.A-10):e>=en.a&&e<=en.f?e-(en.a-10):void 0}function nn(e,t={}){let n=e;t.size&&(zt(n,{size:t.size}),n=Lt(n,{dir:"right",size:t.size}));let a=n.slice(2);a.length%2&&(a=`0${a}`);const s=a.length/2,r=new Uint8Array(s);for(let e=0,t=0;e<s;e++){const n=tn(a.charCodeAt(t++)),s=tn(a.charCodeAt(t++));if(void 0===n||void 0===s)throw new lt(`Invalid byte sequence ("${a[t-2]}${a[t-1]}" in "${a}").`);r[e]=16*n+s}return r}function an(e,t={}){const n=Jt.encode(e);return"number"==typeof t.size?(zt(n,{size:t.size}),Lt(n,{dir:"right",size:t.size})):n}function sn(e,t){const n=t||"hex",a=N(ot(e,{strict:!1})?Qt(e):e);return"bytes"===n?a:qt(a)}class rn extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const on=/^0x[a-fA-F0-9]{40}$/,cn=new rn(8192);function un(e,t){const{strict:n=!0}=t??{},a=`${e}.${n}`;if(cn.has(a))return cn.get(a);const s=!(!on.test(e)||e.toLowerCase()!==e&&n&&pn(e)!==e);return cn.set(a,s),s}const dn=new rn(8192);function pn(e,t){if(dn.has(`${e}.${t}`))return dn.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),a=sn(an(n),"bytes"),s=n.split("");for(let e=0;e<40;e+=2)a[e>>1]>>4>=8&&s[e]&&(s[e]=s[e].toUpperCase()),(15&a[e>>1])>=8&&s[e+1]&&(s[e+1]=s[e+1].toUpperCase());const r=`0x${s.join("")}`;return dn.set(`${e}.${t}`,r),r}class ln extends lt{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class yn extends lt{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class fn extends lt{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const mn={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new fn({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new yn({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new ln({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new ln({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function hn(e,t,n,{strict:a}={}){return ot(e,{strict:!1})?function(e,t,n,{strict:a}={}){bn(e,t);const s=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;a&&gn(s,t,n);return s}(e,t,n,{strict:a}):wn(e,t,n,{strict:a})}function bn(e,t){if("number"==typeof t&&t>0&&t>ct(e)-1)throw new $t({offset:t,position:"start",size:ct(e)})}function gn(e,t,n){if("number"==typeof t&&"number"==typeof n&&ct(e)!==n-t)throw new $t({offset:n,position:"end",size:ct(e)})}function wn(e,t,n,{strict:a}={}){bn(e,t);const s=e.slice(t,n);return a&&gn(s,t,n),s}function vn(e,t={}){void 0!==t.size&&zt(e,{size:t.size});return jt(Zt(e,t),t)}function xn(e,t={}){let n=e;if(void 0!==t.size&&(zt(n,{size:t.size}),n=_t(n)),n.length>1||n[0]>1)throw new Ut(n);return Boolean(n[0])}function An(e,t={}){void 0!==t.size&&zt(e,{size:t.size});return Vt(Zt(e,t),t)}function Pn(e){return"string"==typeof e[0]?En(e):function(e){let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);let a=0;for(const t of e)n.set(t,a),a+=t.length;return n}(e)}function En(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}function In(e,t){if(e.length!==t.length)throw new vt({expectedLength:e.length,givenLength:t.length});const n=function({params:e,values:t}){const n=[];for(let a=0;a<e.length;a++)n.push(On({param:e[a],value:t[a]}));return n}({params:e,values:t}),a=Dn(n);return 0===a.length?"0x":a}function On({param:e,value:t}){const n=Bn(e.type);if(n){const[a,s]=n;return function(e,{length:t,param:n}){const a=null===t;if(!Array.isArray(e))throw new St(e);if(!a&&e.length!==t)throw new gt({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const r=[];for(let t=0;t<e.length;t++){const a=On({param:n,value:e[t]});a.dynamic&&(s=!0),r.push(a)}if(a||s){const e=Dn(r);if(a){const t=Yt(r.length,{size:32});return{dynamic:!0,encoded:r.length>0?Pn([t,e]):t}}if(s)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:Pn(r.map((({encoded:e})=>e)))}}(t,{length:a,param:{...e,type:s}})}if("tuple"===e.type)return function(e,{param:t}){let n=!1;const a=[];for(let s=0;s<t.components.length;s++){const r=t.components[s],i=On({param:r,value:e[Array.isArray(e)?s:r.name]});a.push(i),i.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Dn(a):Pn(a.map((({encoded:e})=>e)))}}(t,{param:e});if("address"===e.type)return function(e){if(!un(e))throw new Ft({address:e});return{dynamic:!1,encoded:kt(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){if("boolean"!=typeof e)throw new lt(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:kt(Wt(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){return function(e,{signed:t}){return{dynamic:!1,encoded:Yt(e,{size:32,signed:t})}}(t,{signed:e.type.startsWith("int")})}if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,n]=t.type.split("bytes"),a=ct(e);if(!n){let t=e;return a%32!=0&&(t=kt(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:Pn([kt(Yt(a,{size:32})),t])}}if(a!==Number.parseInt(n))throw new wt({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:kt(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=Xt(e),n=Math.ceil(ct(t)/32),a=[];for(let e=0;e<n;e++)a.push(kt(hn(t,32*e,32*(e+1)),{dir:"right"}));return{dynamic:!0,encoded:Pn([kt(Yt(ct(t),{size:32})),...a])}}(t);throw new Dt(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Dn(e){let t=0;for(let n=0;n<e.length;n++){const{dynamic:a,encoded:s}=e[n];t+=a?32:ct(s)}const n=[],a=[];let s=0;for(let r=0;r<e.length;r++){const{dynamic:i,encoded:o}=e[r];i?(n.push(Yt(t+s,{size:32})),a.push(o),s+=ct(o)):n.push(o)}return Pn([...n,...a])}function Bn(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Sn(e,t){const n="string"==typeof t?nn(t):t,a=function(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(mn);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}(n);if(0===ct(n)&&e.length>0)throw new bt;if(ct(t)&&ct(t)<32)throw new ht({data:"string"==typeof t?t:Zt(t),params:e,size:ct(t)});let s=0;const r=[];for(let t=0;t<e.length;++t){const n=e[t];a.setPosition(s);const[i,o]=Tn(a,n,{staticPosition:0});s+=o,r.push(i)}return r}function Tn(e,t,{staticPosition:n}){const a=Bn(t.type);if(a){const[s,r]=a;return function(e,t,{length:n,staticPosition:a}){if(!n){const n=a+An(e.readBytes(Fn)),s=n+Gn;e.setPosition(n);const r=An(e.readBytes(Gn)),i=$n(t);let o=0;const c=[];for(let n=0;n<r;++n){e.setPosition(s+(i?32*n:o));const[a,r]=Tn(e,t,{staticPosition:s});o+=r,c.push(a)}return e.setPosition(a+32),[c,32]}if($n(t)){const s=a+An(e.readBytes(Fn)),r=[];for(let a=0;a<n;++a){e.setPosition(s+32*a);const[n]=Tn(e,t,{staticPosition:s});r.push(n)}return e.setPosition(a+32),[r,32]}let s=0;const r=[];for(let i=0;i<n;++i){const[n,i]=Tn(e,t,{staticPosition:a+s});s+=i,r.push(n)}return[r,s]}(e,{...t,type:r},{length:s,staticPosition:n})}if("tuple"===t.type)return function(e,t,{staticPosition:n}){const a=0===t.components.length||t.components.some((({name:e})=>!e)),s=a?[]:{};let r=0;if($n(t)){const i=n+An(e.readBytes(Fn));for(let n=0;n<t.components.length;++n){const o=t.components[n];e.setPosition(i+r);const[c,u]=Tn(e,o,{staticPosition:i});r+=u,s[a?n:o?.name]=c}return e.setPosition(n+32),[s,32]}for(let i=0;i<t.components.length;++i){const o=t.components[i],[c,u]=Tn(e,o,{staticPosition:n});s[a?i:o?.name]=c,r+=u}return[s,r]}(e,t,{staticPosition:n});if("address"===t.type)return function(e){const t=e.readBytes(32);return[pn(Zt(wn(t,-20))),32]}(e);if("bool"===t.type)return function(e){return[xn(e.readBytes(32),{size:32}),32]}(e);if(t.type.startsWith("bytes"))return function(e,t,{staticPosition:n}){const[a,s]=t.type.split("bytes");if(!s){const t=An(e.readBytes(32));e.setPosition(n+t);const a=An(e.readBytes(32));if(0===a)return e.setPosition(n+32),["0x",32];const s=e.readBytes(a);return e.setPosition(n+32),[Zt(s),32]}const r=Zt(e.readBytes(Number.parseInt(s),32));return[r,32]}(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,t){const n=t.type.startsWith("int"),a=Number.parseInt(t.type.split("int")[1]||"256"),s=e.readBytes(32);return[a>48?vn(s,{signed:n}):An(s,{signed:n}),32]}(e,t);if("string"===t.type)return function(e,{staticPosition:t}){const n=An(e.readBytes(32)),a=t+n;e.setPosition(a);const s=An(e.readBytes(32));if(0===s)return e.setPosition(t+32),["",32];const r=e.readBytes(s,32),i=function(e,t={}){let n=e;return void 0!==t.size&&(zt(n,{size:t.size}),n=_t(n,{dir:"right"})),(new TextDecoder).decode(n)}(_t(r));return e.setPosition(t+32),[i,32]}(e,{staticPosition:n});throw new Bt(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Gn=32,Fn=32;function $n(e){const{type:t}=e;if("string"===t)return!0;if("bytes"===t)return!0;if(t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some($n);const n=Bn(e.type);return!(!n||!$n({...e,type:n[1]}))}const Cn=e=>sn(Qt(e));class Mn extends Error{constructor(e,t={}){const n=t.cause instanceof Mn?t.cause.details:t.cause?.message?t.cause.message:t.details,a=t.cause instanceof Mn&&t.cause.docsPath||t.docsPath;super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: https://abitype.dev${a}`]:[],...n?[`Details: ${n}`]:[],"Version: abitype@1.0.6"].join("\n")),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=a,this.metaMessages=t.metaMessages,this.shortMessage=e}}function Ln(e,t){const n=e.exec(t);return n?.groups}const kn=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Nn=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Un=/^\(.+?\).*?$/,Rn=/^tuple(?<array>(\[(\d*)\])*)$/;function _n(e){let t=e.type;if(Rn.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let a=0;a<n;a++){t+=_n(e.components[a]),a<n-1&&(t+=", ")}const a=Ln(Rn,e.type);return t+=`)${a?.array??""}`,_n({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function zn(e){let t="";const n=e.length;for(let a=0;a<n;a++){t+=_n(e[a]),a!==n-1&&(t+=", ")}return t}const jn=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;const Vn=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;const Hn=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;const qn=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Wn(e){return qn.test(e)}function Zn(e){return Ln(qn,e)}const Yn=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;const Kn=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;const Xn=/^receive\(\) external payable$/;const Jn=new Set(["indexed"]),Qn=new Set(["calldata","memory","storage"]);class ea extends Mn{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class ta extends Mn{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class na extends Mn{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class aa extends Mn{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class sa extends Mn{constructor({param:e,type:t,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class ra extends Mn{constructor({param:e,type:t,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${n}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class ia extends Mn{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class oa extends Mn{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class ca extends Mn{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class ua extends Mn{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class da extends Mn{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class pa extends Mn{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}const la=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function ya(e,t={}){if(function(e){return Hn.test(e)}(e)){const n=function(e){return Ln(Hn,e)}(e);if(!n)throw new oa({signature:e,type:"function"});const a=ga(n.parameters),s=[],r=a.length;for(let e=0;e<r;e++)s.push(ba(a[e],{modifiers:Qn,structs:t,type:"function"}));const i=[];if(n.returns){const e=ga(n.returns),a=e.length;for(let n=0;n<a;n++)i.push(ba(e[n],{modifiers:Qn,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:i}}if(function(e){return Vn.test(e)}(e)){const n=function(e){return Ln(Vn,e)}(e);if(!n)throw new oa({signature:e,type:"event"});const a=ga(n.parameters),s=[],r=a.length;for(let e=0;e<r;e++)s.push(ba(a[e],{modifiers:Jn,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}if(function(e){return jn.test(e)}(e)){const n=function(e){return Ln(jn,e)}(e);if(!n)throw new oa({signature:e,type:"error"});const a=ga(n.parameters),s=[],r=a.length;for(let e=0;e<r;e++)s.push(ba(a[e],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}if(function(e){return Yn.test(e)}(e)){const n=function(e){return Ln(Yn,e)}(e);if(!n)throw new oa({signature:e,type:"constructor"});const a=ga(n.parameters),s=[],r=a.length;for(let e=0;e<r;e++)s.push(ba(a[e],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}if(function(e){return Kn.test(e)}(e))return{type:"fallback"};if(function(e){return Xn.test(e)}(e))return{type:"receive",stateMutability:"payable"};throw new ca({signature:e})}const fa=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,ma=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,ha=/^u?int$/;function ba(e,t){const n=function(e,t){return t?`${t}:${e}`:e}(e,t?.type);if(la.has(n))return la.get(n);const a=Un.test(e),s=Ln(a?ma:fa,e);if(!s)throw new na({param:e});if(s.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||kn.test(e)||Nn.test(e)||va.test(e)}(s.name))throw new aa({param:e,name:s.name});const r=s.name?{name:s.name}:{},i="indexed"===s.modifier?{indexed:!0}:{},o=t?.structs??{};let c,u={};if(a){c="tuple";const e=ga(s.type),t=[],n=e.length;for(let a=0;a<n;a++)t.push(ba(e[a],{structs:o}));u={components:t}}else if(s.type in o)c="tuple",u={components:o[s.type]};else if(ha.test(s.type))c=`${s.type}256`;else if(c=s.type,"struct"!==t?.type&&!wa(c))throw new ta({type:c});if(s.modifier){if(!t?.modifiers?.has?.(s.modifier))throw new sa({param:e,type:t?.type,modifier:s.modifier});if(Qn.has(s.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(c,!!s.array))throw new ra({param:e,type:t?.type,modifier:s.modifier})}const d={type:`${c}${s.array??""}`,...r,...i,...u};return la.set(n,d),d}function ga(e,t=[],n="",a=0){const s=e.trim().length;for(let r=0;r<s;r++){const s=e[r],i=e.slice(r+1);switch(s){case",":return 0===a?ga(i,[...t,n.trim()]):ga(i,t,`${n}${s}`,a);case"(":return ga(i,t,`${n}${s}`,a+1);case")":return ga(i,t,`${n}${s}`,a-1);default:return ga(i,t,`${n}${s}`,a)}}if(""===n)return t;if(0!==a)throw new pa({current:n,depth:a});return t.push(n.trim()),t}function wa(e){return"address"===e||"bool"===e||"function"===e||"string"===e||kn.test(e)||Nn.test(e)}const va=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;const xa=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Aa(e,t,n=new Set){const a=[],s=e.length;for(let r=0;r<s;r++){const s=e[r];if(Un.test(s.type))a.push(s);else{const e=Ln(xa,s.type);if(!e?.type)throw new ia({abiParameter:s});const{array:r,type:i}=e;if(i in t){if(n.has(i))throw new da({type:i});a.push({...s,type:`tuple${r??""}`,components:Aa(t[i]??[],t,new Set([...n,i]))})}else{if(!wa(i))throw new ea({type:i});a.push(s)}}}return a}function Pa(e){const t=function(e){const t={},n=e.length;for(let a=0;a<n;a++){const n=e[a];if(!Wn(n))continue;const s=Zn(n);if(!s)throw new oa({signature:n,type:"struct"});const r=s.properties.split(";"),i=[],o=r.length;for(let e=0;e<o;e++){const t=r[e].trim();if(!t)continue;const n=ba(t,{type:"struct"});i.push(n)}if(!i.length)throw new ua({signature:n});t[s.name]=i}const a={},s=Object.entries(t),r=s.length;for(let e=0;e<r;e++){const[n,r]=s[e];a[n]=Aa(r,t)}return a}(e),n=[],a=e.length;for(let s=0;s<a;s++){const a=e[s];Wn(a)||n.push(ya(a,t))}return n}const Ea=e=>{var t;return function(e){let t=!0,n="",a=0,s="",r=!1;for(let i=0;i<e.length;i++){const o=e[i];if(["(",")",","].includes(o)&&(t=!0),"("===o&&a++,")"===o&&a--,t)if(0!==a)" "!==o?(s+=o,n+=o):","!==e[i-1]&&","!==n&&",("!==n&&(n="",t=!1);else if(" "===o&&["event","function",""].includes(s))s="";else if(s+=o,")"===o){r=!0;break}}if(!r)throw new lt("Unable to normalize signature.");return s}("string"==typeof e?e:"function"===(t=e).type?`function ${t.name}(${zn(t.inputs)})${t.stateMutability&&"nonpayable"!==t.stateMutability?` ${t.stateMutability}`:""}${t.outputs.length?` returns (${zn(t.outputs)})`:""}`:"event"===t.type?`event ${t.name}(${zn(t.inputs)})`:"error"===t.type?`error ${t.name}(${zn(t.inputs)})`:"constructor"===t.type?`constructor(${zn(t.inputs)})${"payable"===t.stateMutability?" payable":""}`:"fallback"===t.type?"fallback()":"receive() external payable")};function Ia(e){return t=Ea(e),Cn(t);var t}const Oa=Ia,Da=e=>hn(Ia(e),0,4);function Ba(e){const{abi:t,args:n=[],name:a}=e,s=ot(a,{strict:!1}),r=t.filter((e=>s?"function"===e.type?Da(e)===a:"event"===e.type&&Oa(e)===a:"name"in e&&e.name===a));if(0===r.length)return;if(1===r.length)return r[0];let i;for(const e of r){if(!("inputs"in e))continue;if(!n||0===n.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(!e.inputs)continue;if(0===e.inputs.length)continue;if(e.inputs.length!==n.length)continue;if(n.every(((t,n)=>{const a="inputs"in e&&e.inputs[n];return!!a&&Sa(t,a)}))){if(i&&"inputs"in i&&i.inputs){const t=Ta(e.inputs,i.inputs,n);if(t)throw new It({abiItem:e,type:t[0]},{abiItem:i,type:t[1]})}i=e}}return i||r[0]}function Sa(e,t){const n=typeof e,a=t.type;switch(a){case"address":return un(e,{strict:!1});case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===a&&"components"in t?Object.values(t.components).every(((t,n)=>Sa(Object.values(e)[n],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(a)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(a)?"string"===n||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(a)&&(Array.isArray(e)&&e.every((e=>Sa(e,{...t,type:a.replace(/(\[[0-9]{0,}\])$/,"")}))))}}function Ta(e,t,n){for(const a in e){const s=e[a],r=t[a];if("tuple"===s.type&&"tuple"===r.type&&"components"in s&&"components"in r)return Ta(s.components,r.components,n[a]);const i=[s.type,r.type];if(!(!i.includes("address")||!i.includes("bytes20"))||(i.includes("address")&&i.includes("string")||!(!i.includes("address")||!i.includes("bytes")))&&un(n[a],{strict:!1}))return i}}const Ga="/docs/contract/decodeFunctionResult";function Fa(e){const{abi:t,args:n,functionName:a,data:s}=e;let r=t[0];if(a){const e=Ba({abi:t,args:n,name:a});if(!e)throw new At(a,{docsPath:Ga});r=e}if("function"!==r.type)throw new At(void 0,{docsPath:Ga});if(!r.outputs)throw new Pt(r.name,{docsPath:Ga});const i=Sn(r.outputs,s);return i&&i.length>1?i:i&&1===i.length?i[0]:void 0}const $a="/docs/contract/encodeFunctionData";function Ca(e){const{args:t}=e,{abi:n,functionName:a}=1===e.abi.length&&e.functionName?.startsWith("0x")?e:function(e){const{abi:t,args:n,functionName:a}=e;let s=t[0];if(a){const e=Ba({abi:t,args:n,name:a});if(!e)throw new At(a,{docsPath:$a});s=e}if("function"!==s.type)throw new At(void 0,{docsPath:$a});return{abi:[s],functionName:Da(rt(s))}}(e),s=n[0];return En([a,("inputs"in s&&s.inputs?In(s.inputs,t??[]):void 0)??"0x"])}function Ma(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}const La={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},ka={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Na={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Ua(e){const{abi:t,data:n}=e,a=hn(n,0,4);if("0x"===a)throw new bt;const s=[...t||[],ka,Na].find((e=>"error"===e.type&&a===Da(rt(e))));if(!s)throw new xt(a,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Sn(s.inputs,hn(n,4)):void 0,errorName:s.name}}const Ra=(e,t,n)=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t),n);function _a({abiItem:e,args:t,includeFunctionName:n=!0,includeName:a=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map(((e,n)=>`${a&&e.name?`${e.name}: `:""}${"object"==typeof t[n]?Ra(t[n]):t[n]}`)).join(", ")})`}const za={gwei:9,wei:18},ja={ether:-9,wei:9};function Va(e,t){let n=e.toString();const a=n.startsWith("-");a&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,r]=[n.slice(0,n.length-t),n.slice(n.length-t)];return r=r.replace(/(0+)$/,""),`${a?"-":""}${s||"0"}${r?`.${r}`:""}`}function Ha(e,t="wei"){return Va(e,za[t])}function qa(e,t="wei"){return Va(e,ja[t])}class Wa extends lt{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Za extends lt{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Ya(e){return e.reduce(((e,{slot:t,value:n})=>`${e}        ${t}: ${n}\n`),"")}function Ka(e){const t=Object.entries(e).map((([e,t])=>void 0===t||!1===t?null:[e,t])).filter(Boolean),n=t.reduce(((e,[t])=>Math.max(e,t.length)),0);return t.map((([e,t])=>`  ${`${e}:`.padEnd(n+1)}  ${t}`)).join("\n")}class Xa extends lt{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n"),{name:"FeeConflictError"})}}const Ja=e=>e;class Qa extends lt{constructor(e,{account:t,docsPath:n,chain:a,data:s,gas:r,gasPrice:i,maxFeePerGas:o,maxPriorityFeePerGas:c,nonce:u,to:d,value:p,stateOverride:l}){const y=t?Ma(t):void 0;let f=Ka({from:y?.address,to:d,value:void 0!==p&&`${Ha(p)} ${a?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:r,gasPrice:void 0!==i&&`${qa(i)} gwei`,maxFeePerGas:void 0!==o&&`${qa(o)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${qa(c)} gwei`,nonce:u});l&&(f+=`\n${function(e){return e.reduce(((e,{address:t,...n})=>{let a=`${e}    ${t}:\n`;return n.nonce&&(a+=`      nonce: ${n.nonce}\n`),n.balance&&(a+=`      balance: ${n.balance}\n`),n.code&&(a+=`      code: ${n.code}\n`),n.state&&(a+="      state:\n",a+=Ya(n.state)),n.stateDiff&&(a+="      stateDiff:\n",a+=Ya(n.stateDiff)),a}),"  State Override:\n").slice(0,-1)}(l)}`),super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",f].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class es extends lt{constructor(e,{abi:t,args:n,contractAddress:a,docsPath:s,functionName:r,sender:i}){const o=Ba({abi:t,args:n,name:r}),c=o?_a({abiItem:o,args:n,includeFunctionName:!1,includeName:!1}):void 0,u=Ka({address:a&&a,function:o?rt(o,{includeName:!0}):void 0,args:c&&"()"!==c&&`${[...Array(r?.length??0).keys()].map((()=>" ")).join("")}${c}`,sender:i});super(e.shortMessage||`An unknown error occurred while executing the contract function "${r}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],u&&"Contract Call:",u].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=n,this.cause=e,this.contractAddress=a,this.functionName=r,this.sender=i}}class ts extends lt{constructor({abi:e,data:t,functionName:n,message:a}){let s,r,i,o,c;if(t&&"0x"!==t)try{r=Ua({abi:e,data:t});const{abiItem:n,errorName:a,args:s}=r;if("Error"===a)o=s[0];else if("Panic"===a){const[e]=s;o=La[e]}else{const e=n?rt(n,{includeName:!0}):void 0,t=n&&s?_a({abiItem:n,args:s,includeFunctionName:!1,includeName:!1}):void 0;i=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array(a?.length??0).keys()].map((()=>" ")).join("")}${t}`:""]}}catch(e){s=e}else a&&(o=a);s instanceof xt&&(c=s.signature,i=[`Unable to decode signature "${c}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${c}.`]),super(o&&"execution reverted"!==o||c?[`The contract function "${n}" reverted with the following ${c?"signature":"reason"}:`,o||c].join("\n"):`The contract function "${n}" reverted.`,{cause:s,metaMessages:i,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r,this.reason=o,this.signature=c}}class ns extends lt{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class as extends lt{constructor({factory:e}){super("Deployment for counterfactual contract call failed"+(e?` for factory "${e}".`:""),{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class ss extends lt{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class rs extends lt{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${n}`,`Request body: ${Ra(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code}}class is extends lt{constructor(e,{code:t,docsPath:n,metaMessages:a,name:s,shortMessage:r}){super(r,{cause:e,docsPath:n,metaMessages:a||e?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof rs?e.code:t??-1}}class os extends is{constructor(e){super(e,{code:os.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(os,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});const cs=3;function us(e,t,n){const a=e[t.name];if("function"==typeof a)return a;const s=e[n];return"function"==typeof s?s:n=>t(e,n)}const ds=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],ps="0x82ad56cb",ls="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",ys="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";class fs extends lt{constructor({blockNumber:e,chain:t,contract:n}){super(`Chain "${t.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class ms extends lt{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const hs="/docs/contract/encodeDeployData";function bs(e){const{abi:t,args:n,bytecode:a}=e;if(!n||0===n.length)return a;const s=t.find((e=>"type"in e&&"constructor"===e.type));if(!s)throw new ft({docsPath:hs});if(!("inputs"in s))throw new mt({docsPath:hs});if(!s.inputs||0===s.inputs.length)throw new mt({docsPath:hs});return En([a,In(s.inputs,n)])}let gs=class extends lt{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}};Object.defineProperty(gs,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(gs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class ws extends lt{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${qa(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(ws,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class vs extends lt{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${qa(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(vs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class xs extends lt{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(xs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class As extends lt{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(As,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Ps extends lt{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Ps,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Es extends lt{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Es,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Is extends lt{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Is,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Os extends lt{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Os,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Ds extends lt{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Ds,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Bs extends lt{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${qa(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${qa(n)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Bs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Ss extends lt{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Ts(e,{docsPath:t,...n}){const a=(()=>{const t=function(e,t){const n=(e.details||"").toLowerCase(),a=e instanceof lt?e.walk((e=>e?.code===gs.code)):e;return a instanceof lt?new gs({cause:e,message:a.details}):gs.nodeMessage.test(n)?new gs({cause:e,message:e.details}):ws.nodeMessage.test(n)?new ws({cause:e,maxFeePerGas:t?.maxFeePerGas}):vs.nodeMessage.test(n)?new vs({cause:e,maxFeePerGas:t?.maxFeePerGas}):xs.nodeMessage.test(n)?new xs({cause:e,nonce:t?.nonce}):As.nodeMessage.test(n)?new As({cause:e,nonce:t?.nonce}):Ps.nodeMessage.test(n)?new Ps({cause:e,nonce:t?.nonce}):Es.nodeMessage.test(n)?new Es({cause:e}):Is.nodeMessage.test(n)?new Is({cause:e,gas:t?.gas}):Os.nodeMessage.test(n)?new Os({cause:e,gas:t?.gas}):Ds.nodeMessage.test(n)?new Ds({cause:e}):Bs.nodeMessage.test(n)?new Bs({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new Ss({cause:e})}(e,n);return t instanceof Ss?e:t})();return new Qa(a,{docsPath:t,...n})}function Gs(e,{format:t}){if(!t)return{};const n={};return function t(a){const s=Object.keys(a);for(const r of s)r in e&&(n[r]=e[r]),a[r]&&"object"==typeof a[r]&&!Array.isArray(a[r])&&t(a[r])}(t(e||{})),n}const Fs={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function $s(e){const t={};return void 0!==e.authorizationList&&(t.authorizationList=e.authorizationList.map((e=>({address:e.contractAddress,r:e.r,s:e.s,chainId:Yt(e.chainId),nonce:Yt(e.nonce),...void 0!==e.yParity?{yParity:Yt(e.yParity)}:{},...void 0!==e.v&&void 0===e.yParity?{v:Yt(e.v)}:{}})))),void 0!==e.accessList&&(t.accessList=e.accessList),void 0!==e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),void 0!==e.blobs&&("string"!=typeof e.blobs[0]?t.blobs=e.blobs.map((e=>Zt(e))):t.blobs=e.blobs),void 0!==e.data&&(t.data=e.data),void 0!==e.from&&(t.from=e.from),void 0!==e.gas&&(t.gas=Yt(e.gas)),void 0!==e.gasPrice&&(t.gasPrice=Yt(e.gasPrice)),void 0!==e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=Yt(e.maxFeePerBlobGas)),void 0!==e.maxFeePerGas&&(t.maxFeePerGas=Yt(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=Yt(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(t.nonce=Yt(e.nonce)),void 0!==e.to&&(t.to=e.to),void 0!==e.type&&(t.type=Fs[e.type]),void 0!==e.value&&(t.value=Yt(e.value)),t}const Cs=new Map;function Ms({fn:e,id:t,shouldSplitBatch:n,wait:a=0,sort:s}){const r=async()=>{const t=o();i();const n=t.map((({args:e})=>e));0!==n.length&&e(n).then((e=>{s&&Array.isArray(e)&&e.sort(s);for(let n=0;n<t.length;n++){const{resolve:a}=t[n];a?.([e[n],e])}})).catch((e=>{for(let n=0;n<t.length;n++){const{reject:a}=t[n];a?.(e)}}))},i=()=>Cs.delete(t),o=()=>Cs.get(t)||[],c=e=>Cs.set(t,[...o(),e]);return{flush:i,async schedule(e){const{promise:t,resolve:s,reject:i}=function(){let e=()=>{},t=()=>{};return{promise:new Promise(((n,a)=>{e=n,t=a})),resolve:e,reject:t}}(),u=n?.([...o().map((({args:e})=>e)),e]);u&&r();return o().length>0?(c({args:e,resolve:s,reject:i}),t):(c({args:e,resolve:s,reject:i}),setTimeout(r,a),t)}}}function Ls(e){if(e&&0!==e.length)return e.reduce(((e,{slot:t,value:n})=>{if(66!==t.length)throw new Mt({size:t.length,targetSize:66,type:"hex"});if(66!==n.length)throw new Mt({size:n.length,targetSize:66,type:"hex"});return e[t]=n,e}),{})}function ks(e){const{balance:t,nonce:n,state:a,stateDiff:s,code:r}=e,i={};if(void 0!==r&&(i.code=r),void 0!==t&&(i.balance=Yt(t)),void 0!==n&&(i.nonce=Yt(n)),void 0!==a&&(i.state=Ls(a)),void 0!==s){if(i.state)throw new Za;i.stateDiff=Ls(s)}return i}function Ns(e){if(!e)return;const t={};for(const{address:n,...a}of e){if(!un(n,{strict:!1}))throw new Ft({address:n});if(t[n])throw new Wa({address:n});t[n]=ks(a)}return t}const Us=2n**256n-1n;async function Rs(e,t){const{account:n=e.account,batch:a=Boolean(e.batch?.multicall),blockNumber:s,blockTag:r="latest",accessList:i,blobs:o,code:c,data:u,factory:d,factoryData:p,gas:l,gasPrice:y,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:h,nonce:b,to:g,value:w,stateOverride:v,...x}=t,A=n?Ma(n):void 0;if(c&&(d||p))throw new lt("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(c&&g)throw new lt("Cannot provide both `code` & `to` as parameters.");const P=c&&u,E=d&&p&&g&&u,I=P||E,O=P?function(e){const{code:t,data:n}=e;return bs({abi:Pa(["constructor(bytes, bytes)"]),bytecode:ls,args:[t,n]})}({code:c,data:u}):E?function(e){const{data:t,factory:n,factoryData:a,to:s}=e;return bs({abi:Pa(["constructor(address, bytes, address, bytes)"]),bytecode:ys,args:[s,t,n,a]})}({data:u,factory:d,factoryData:p,to:g}):u;try{!function(e){const{account:t,gasPrice:n,maxFeePerGas:a,maxPriorityFeePerGas:s,to:r}=e,i=t?Ma(t):void 0;if(i&&!un(i.address))throw new Ft({address:i.address});if(r&&!un(r))throw new Ft({address:r});if(void 0!==n&&(void 0!==a||void 0!==s))throw new Xa;if(a&&a>Us)throw new ws({maxFeePerGas:a});if(s&&a&&s>a)throw new Bs({maxFeePerGas:a,maxPriorityFeePerGas:s})}(t);const n=(s?Yt(s):void 0)||r,c=Ns(v),u=e.chain?.formatters?.transactionRequest?.format,d=(u||$s)({...Gs(x,{format:u}),from:A?.address,accessList:i,blobs:o,data:O,gas:l,gasPrice:y,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:h,nonce:b,to:I?void 0:g,value:w});if(a&&function({request:e}){const{data:t,to:n,...a}=e;return!!t&&(!t.startsWith(ps)&&(!!n&&!(Object.values(a).filter((e=>void 0!==e)).length>0)))}({request:d})&&!c)try{return await async function(e,t){const{batchSize:n=1024,wait:a=0}="object"==typeof e.batch?.multicall?e.batch.multicall:{},{blockNumber:s,blockTag:r="latest",data:i,multicallAddress:o,to:c}=t;let u=o;if(!u){if(!e.chain)throw new ms;u=function({blockNumber:e,chain:t,contract:n}){const a=t?.contracts?.[n];if(!a)throw new fs({chain:t,contract:{name:n}});if(e&&a.blockCreated&&a.blockCreated>e)throw new fs({blockNumber:e,chain:t,contract:{name:n,blockCreated:a.blockCreated}});return a.address}({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=s?Yt(s):void 0,p=d||r,{schedule:l}=Ms({id:`${e.uid}.${p}`,wait:a,shouldSplitBatch(e){const t=e.reduce(((e,{data:t})=>e+(t.length-2)),0);return t>2*n},fn:async t=>{const n=t.map((e=>({allowFailure:!0,callData:e.data,target:e.to}))),a=Ca({abi:ds,args:[n],functionName:"aggregate3"}),s=await e.request({method:"eth_call",params:[{data:a,to:u},p]});return Fa({abi:ds,args:[n],functionName:"aggregate3",data:s||"0x"})}}),[{returnData:y,success:f}]=await l({data:i,to:c});if(!f)throw new ss({data:y});return"0x"===y?{data:void 0}:{data:y}}(e,{...d,blockNumber:s,blockTag:r})}catch(e){if(!(e instanceof ms||e instanceof fs))throw e}const p=await e.request({method:"eth_call",params:c?[d,n,c]:[d,n]});return"0x"===p?{data:void 0}:{data:p}}catch(n){const a=function(e){if(!(e instanceof lt))return;const t=e.walk();return"object"==typeof t?.data?t.data?.data:t.data}(n),{offchainLookup:s,offchainLookupSignature:r}=await Promise.resolve().then((function(){return require("./ccip-BAt3txEk.js")}));if(!1!==e.ccipRead&&a?.slice(0,10)===r&&g)return{data:await s(e,{data:a,to:g})};if(I&&"0x101bb98d"===a?.slice(0,10))throw new as({factory:d});throw Ts(n,{...t,account:A,chain:e.chain})}}async function _s(e,t){const{abi:n,address:a,args:s,functionName:r,...i}=t,o=Ca({abi:n,args:s,functionName:r});try{const{data:t}=await us(e,Rs,"call")({...i,data:o,to:a});return Fa({abi:n,args:s,functionName:r,data:t||"0x"})}catch(e){throw function(e,{abi:t,address:n,args:a,docsPath:s,functionName:r,sender:i}){const{code:o,data:c,message:u,shortMessage:d}=e instanceof ss?e:e instanceof lt?e.walk((e=>"data"in e))||e.walk():{},p=e instanceof bt?new ns({functionName:r}):[cs,os.code].includes(o)&&(c||u||d)?new ts({abi:t,data:"object"==typeof c?c.data:c,functionName:r,message:d??u}):e;return new es(p,{abi:t,args:a,contractAddress:n,docsPath:s,functionName:r,sender:i})}(e,{abi:n,address:a,args:s,docsPath:"/docs/contract/readContract",functionName:r})}}const zs="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789";const js=/^(.*)\[([0-9]*)\]$/,Vs=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Hs=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function qs(e,t,n=!1){if("address"===e){const e=t;if(!un(e))throw new Ft({address:e});return Lt(e.toLowerCase(),{size:n?32:null})}if("string"===e)return Xt(t);if("bytes"===e)return t;if("bool"===e)return Lt(Wt(t),{size:n?32:1});const a=e.match(Hs);if(a){const[e,s,r="256"]=a,i=Number.parseInt(r)/8;return Yt(t,{size:n?32:i,signed:"int"===s})}const s=e.match(Vs);if(s){const[e,a]=s;if(Number.parseInt(a)!==(t.length-2)/2)throw new Ot({expectedSize:Number.parseInt(a),givenSize:(t.length-2)/2});return Lt(t,{dir:"right",size:n?32:null})}const r=e.match(js);if(r&&Array.isArray(t)){const[e,n]=r,a=[];for(let e=0;e<t.length;e++)a.push(qs(n,t[e],!0));return 0===a.length?"0x":En(a)}throw new Gt(e)}const Ws="Ethereum Signed Message:\n";function Zs(e,t){return sn(function(e){const t="string"==typeof e?Xt(e):"string"==typeof e.raw?e.raw:Zt(e.raw);return Pn([Xt(`${Ws}${ct(t)}`),t])}(e),t)}class Ys extends lt{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Ks extends lt{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Xs(e){const{domain:t,message:n,primaryType:a,types:s}=e,r=(e,t)=>{for(const n of e){const{name:e,type:a}=n,i=t[e],o=a.match(Hs);if(o&&("number"==typeof i||"bigint"==typeof i)){const[e,t,n]=o;Yt(i,{signed:"int"===t,size:Number.parseInt(n)/8})}if("address"===a&&"string"==typeof i&&!un(i))throw new Ft({address:i});const c=a.match(Vs);if(c){const[e,t]=c;if(t&&ct(i)!==Number.parseInt(t))throw new Ot({expectedSize:Number.parseInt(t),givenSize:ct(i)})}const u=s[a];u&&(Qs(a),r(u,i))}};if(s.EIP712Domain&&t&&r(s.EIP712Domain,t),"EIP712Domain"!==a){if(!s[a])throw new Ys({primaryType:a,types:s});r(s[a],n)}}function Js({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Qs(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Ks({type:e})}function er(e){const{domain:t={},message:n,primaryType:a}=e,s={EIP712Domain:Js({domain:t}),...e.types};Xs({domain:t,message:n,primaryType:a,types:s});const r=["0x1901"];return t&&r.push(function({domain:e,types:t}){return tr({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:s})),"EIP712Domain"!==a&&r.push(tr({data:n,primaryType:a,types:s})),sn(Pn(r))}function tr({data:e,primaryType:t,types:n}){return sn(nr({data:e,primaryType:t,types:n}))}function nr({data:e,primaryType:t,types:n}){const a=[{type:"bytes32"}],s=[ar({primaryType:t,types:n})];for(const r of n[t]){const[t,i]=rr({types:n,name:r.name,type:r.type,value:e[r.name]});a.push(t),s.push(i)}return In(a,s)}function ar({primaryType:e,types:t}){const n=qt(function({primaryType:e,types:t}){let n="";const a=sr({primaryType:e,types:t});a.delete(e);const s=[e,...Array.from(a).sort()];for(const e of s)n+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`;return n}({primaryType:e,types:t}));return sn(n)}function sr({primaryType:e,types:t},n=new Set){const a=e.match(/^\w*/u),s=a?.[0];if(n.has(s)||void 0===t[s])return n;n.add(s);for(const e of t[s])sr({primaryType:e.type,types:t},n);return n}function rr({types:e,name:t,type:n,value:a}){if(void 0!==e[n])return[{type:"bytes32"},sn(nr({data:a,primaryType:n,types:e}))];if("bytes"===n){return[{type:"bytes32"},sn(a=`0x${(a.length%2?"0":"")+a.slice(2)}`)]}if("string"===n)return[{type:"bytes32"},sn(qt(a))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),r=a.map((n=>rr({name:t,type:s,types:e,value:n})));return[{type:"bytes32"},sn(In(r.map((([e])=>e)),r.map((([,e])=>e))))]}return[{type:n},a]}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ir=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),or=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),cr=BigInt(1),ur=BigInt(2),dr=(e,t)=>(e+t/ur)/t;const pr=_e(ir,void 0,void 0,{sqrt:function(e){const t=ir,n=BigInt(3),a=BigInt(6),s=BigInt(11),r=BigInt(22),i=BigInt(23),o=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,p=Le(d,n,t)*d%t,l=Le(p,n,t)*d%t,y=Le(l,ur,t)*u%t,f=Le(y,s,t)*y%t,m=Le(f,r,t)*f%t,h=Le(m,o,t)*m%t,b=Le(h,c,t)*h%t,g=Le(b,o,t)*m%t,w=Le(g,n,t)*d%t,v=Le(w,i,t)*f%t,x=Le(v,a,t)*u%t,A=Le(x,ur,t);if(!pr.eql(pr.sqr(A),e))throw new Error("Cannot find square root");return A}}),lr=function(e,t){const n=t=>at({...e,...st(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:pr,n:or,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=or,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),a=-cr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),r=n,i=BigInt("0x100000000000000000000000000000000"),o=dr(r*e,t),c=dr(-a*e,t);let u=Ce(e-o*n-c*s,t),d=Ce(-o*a-c*r,t);const p=u>i,l=d>i;if(p&&(u=t-u),l&&(d=t-d),u>i||d>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:p,k1:u,k2neg:l,k2:d}}}},Ee);BigInt(0),lr.ProjectivePoint;const yr=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],fr=[{inputs:[{name:"success",type:"bool"},{name:"ret",type:"bytes"}],name:"DelegateAndRevert",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"},{name:"inner",type:"bytes"}],name:"FailedOpWithRevert",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"PostOpReverted",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"PostOpRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"}],name:"UserOperationPrefundTooLow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"data",type:"bytes"}],name:"delegateAndRevert",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint256"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint256"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"paymasterVerificationGasLimit",type:"uint256"},{name:"paymasterPostOpGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function mr(e){const{chainId:t,entryPointAddress:n,entryPointVersion:a}=e,s=e.userOperation,{callData:r,callGasLimit:i,initCode:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:d,paymasterAndData:p,preVerificationGas:l,sender:y,verificationGasLimit:f}=s,m=(()=>{if("0.6"===a)return In([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[y,d,sn(o??"0x"),sn(r??"0x"),i,f,l,c,u,sn(p??"0x")]);if("0.7"===a){const e=Pn([Lt(Yt(s.verificationGasLimit),{size:16}),Lt(Yt(s.callGasLimit),{size:16})]),t=sn(r),n=Pn([Lt(Yt(s.maxPriorityFeePerGas),{size:16}),Lt(Yt(s.maxFeePerGas),{size:16})]),a=sn(s.factory&&s.factoryData?Pn([s.factory,s.factoryData]):"0x"),i=sn(s.paymaster?Pn([s.paymaster,Lt(Yt(s.paymasterVerificationGasLimit||0),{size:16}),Lt(Yt(s.paymasterPostOpGasLimit||0),{size:16}),s.paymasterData||"0x"]):"0x");return In([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[y,d,a,t,e,l,n,i])}throw new Error(`entryPointVersion "${a}" not supported.`)})();return sn(In([{type:"bytes32"},{type:"address"},{type:"uint256"}],[sn(m),n,BigInt(t)]))}async function hr(e,{address:t,blockNumber:n,blockTag:a="latest"}){const s=void 0!==n?Yt(n):void 0,r=await e.request({method:"eth_getCode",params:[t,s||a]},{dedupe:Boolean(s)});if("0x"!==r)return r}function br(e){const{source:t}=e,n=new Map,a=new rn(8192),s=new Map,r=({address:e,chainId:t})=>`${e}.${t}`;return{async consume({address:e,chainId:n,client:s}){const i=r({address:e,chainId:n}),o=this.get({address:e,chainId:n,client:s});this.increment({address:e,chainId:n});const c=await o;return await t.set({address:e,chainId:n},c),a.set(i,c),c},async increment({address:e,chainId:t}){const a=r({address:e,chainId:t}),s=n.get(a)??0;n.set(a,s+1)},async get({address:e,chainId:i,client:o}){const c=r({address:e,chainId:i});let u=s.get(c);u||(u=(async()=>{try{const n=await t.get({address:e,chainId:i,client:o}),s=a.get(c)??0;return s>0&&n<=s?s+1:(a.delete(c),n)}finally{this.reset({address:e,chainId:i})}})(),s.set(c,u));return(n.get(c)??0)+await u},reset({address:e,chainId:t}){const a=r({address:e,chainId:t});n.delete(a),s.delete(a)}}}const gr="0x6492649264926492649264926492649264926492649264926492649264926492";function wr(e){const{address:t,data:n,signature:a,to:s="hex"}=e,r=En([In([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,a]),gr]);return"hex"===s?r:nn(r)}async function vr(e){const{extend:t,nonceKeyManager:n=br({source:{get:()=>Date.now(),set(){}}}),...a}=e;let s=!1;const r=await e.getAddress();return{...t,...a,address:r,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(t){const a=t?.key??BigInt(await n.consume({address:r,chainId:e.client.chain.id,client:e.client}));if(e.getNonce)return await e.getNonce({...t,key:a});return await _s(e.client,{abi:Pa(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[r,a]})},async isDeployed(){if(s)return!0;const t=await us(e.client,hr,"getCode")({address:r});return s=Boolean(t),s},...e.sign?{async sign(t){const[{factory:n,factoryData:a},s]=await Promise.all([this.getFactoryArgs(),e.sign(t)]);return n&&a?wr({address:n,data:a,signature:s}):s}}:{},async signMessage(t){const[{factory:n,factoryData:a},s]=await Promise.all([this.getFactoryArgs(),e.signMessage(t)]);return n&&a?wr({address:n,data:a,signature:s}):s},async signTypedData(t){const[{factory:n,factoryData:a},s]=await Promise.all([this.getFactoryArgs(),e.signTypedData(t)]);return n&&a?wr({address:n,data:a,signature:s}):s},type:"smart"}}async function xr(e){const{client:t,owners:n,nonce:a=0n}=e;let s=e.address;const r={abi:yr,address:zs,version:"0.6"},i={abi:Or,address:"0x0ba5ed0c6aa8c49038f819e587e2633c4a9f428a"},o=n.map((e=>"webAuthn"===e.type?e.publicKey:Lt(e.address))),c=n[0];return vr({client:t,entryPoint:r,extend:{abi:Ir,factory:i},async decodeCalls(e){const t=function(e){const{abi:t,data:n}=e,a=hn(n,0,4),s=t.find((e=>"function"===e.type&&a===Da(rt(e))));if(!s)throw new Et(a,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Sn(s.inputs,hn(n,4)):void 0}}({abi:Ir,data:e});if("execute"===t.functionName)return[{to:t.args[0],value:t.args[1],data:t.args[2]}];if("executeBatch"===t.functionName)return t.args[0].map((e=>({to:e.target,value:e.value,data:e.data})));throw new lt(`unable to decode calls for "${t.functionName}"`)},encodeCalls:async e=>1===e.length?Ca({abi:Ir,functionName:"execute",args:[e[0].to,e[0].value??0n,e[0].data??"0x"]}):Ca({abi:Ir,functionName:"executeBatch",args:[e.map((e=>({data:e.data??"0x",target:e.to,value:e.value??0n})))]}),getAddress:async()=>(s??=await _s(t,{...i,functionName:"getAddress",args:[o,a]}),s),async getFactoryArgs(){const e=Ca({abi:i.abi,functionName:"createAccount",args:[o,a]});return{factory:i.address,factoryData:e}},getStubSignature:async()=>"webAuthn"===c.type?"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000001949fc7c88032b9fcb5f6efc7a7b8c63668eae9871b765e23123bb473ff57aa831a7c0d9276168ebcc29f2875a0239cffdf2a9cd1c2007c5c77c071db9264df1d000000000000000000000000000000000000000000000000000000000000002549960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97630500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008a7b2274797065223a22776562617574686e2e676574222c226368616c6c656e6765223a2273496a396e6164474850596759334b7156384f7a4a666c726275504b474f716d59576f4d57516869467773222c226f726967696e223a2268747470733a2f2f7369676e2e636f696e626173652e636f6d222c2263726f73734f726967696e223a66616c73657d00000000000000000000000000000000000000000000":Er({signature:"0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c"}),async sign(e){const n=Pr({address:await this.getAddress(),chainId:t.chain.id,hash:e.hash});return Er({signature:await Ar({hash:n,owner:c})})},async signMessage(e){const{message:n}=e,a=Pr({address:await this.getAddress(),chainId:t.chain.id,hash:Zs(n)});return Er({signature:await Ar({hash:a,owner:c})})},async signTypedData(e){const{domain:n,types:a,primaryType:s,message:r}=e,i=Pr({address:await this.getAddress(),chainId:t.chain.id,hash:er({domain:n,message:r,primaryType:s,types:a})});return Er({signature:await Ar({hash:i,owner:c})})},async signUserOperation(e){const{chainId:n=t.chain.id,...a}=e,s=await this.getAddress(),i=mr({chainId:n,entryPointAddress:r.address,entryPointVersion:r.version,userOperation:{...a,sender:s}});return Er({signature:await Ar({hash:i,owner:c})})},userOperation:{async estimateGas(e){if("webAuthn"===c.type)return{verificationGasLimit:BigInt(Math.max(Number(e.verificationGasLimit??0n),8e5))}}}})}async function Ar({hash:e,owner:t}){if("webAuthn"===t.type){const{signature:n,webauthn:a}=await t.sign({hash:e});return function({webauthn:e,signature:t}){const{r:n,s:a}=function(e){const t="string"==typeof e?be(e):e,n=t.slice(0,32),a=t.slice(32,64);return{r:BigInt(he(n)),s:BigInt(he(a))}}(t);return In([{components:[{name:"authenticatorData",type:"bytes"},{name:"clientDataJSON",type:"bytes"},{name:"challengeIndex",type:"uint256"},{name:"typeIndex",type:"uint256"},{name:"r",type:"uint256"},{name:"s",type:"uint256"}],type:"tuple"}],[{authenticatorData:e.authenticatorData,clientDataJSON:Xt(e.clientDataJSON),challengeIndex:BigInt(e.challengeIndex),typeIndex:BigInt(e.typeIndex),r:n,s:a}])}({signature:n,webauthn:a})}if(t.sign)return t.sign({hash:e});throw new lt("`owner` does not support raw sign.")}function Pr({address:e,chainId:t,hash:n}){return er({domain:{chainId:t,name:"Coinbase Smart Wallet",verifyingContract:e,version:"1"},types:{CoinbaseSmartWalletMessage:[{name:"hash",type:"bytes32"}]},primaryType:"CoinbaseSmartWalletMessage",message:{hash:n}})}function Er(e){const{ownerIndex:t=0}=e;return In([{components:[{name:"ownerIndex",type:"uint8"},{name:"signatureData",type:"bytes"}],type:"tuple"}],[{ownerIndex:t,signatureData:(()=>{if(65!==ct(e.signature))return e.signature;const t=function(e){const{r:t,s:n}=lr.Signature.fromCompact(e.slice(2,130)),a=Number(`0x${e.slice(130)}`),[s,r]=(()=>{if(0===a||1===a)return[void 0,a];if(27===a)return[BigInt(a),0];if(28===a)return[BigInt(a),1];throw new Error("Invalid yParityOrV value")})();return void 0!==s?{r:Yt(t,{size:32}),s:Yt(n,{size:32}),v:s,yParity:r}:{r:Yt(t,{size:32}),s:Yt(n,{size:32}),yParity:r}}(e.signature);return function(e,t){if(e.length!==t.length)throw new vt({expectedLength:e.length,givenLength:t.length});const n=[];for(let a=0;a<e.length;a++){const s=e[a],r=t[a];n.push(qs(s,r))}return En(n)}(["bytes32","bytes32","uint8"],[t.r,t.s,0===t.yParity?27:28])})()}])}const Ir=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"owner",type:"bytes"}],name:"AlreadyOwner",type:"error"},{inputs:[],name:"Initialized",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidEthereumAddressOwner",type:"error"},{inputs:[{name:"key",type:"uint256"}],name:"InvalidNonceKey",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidOwnerBytesLength",type:"error"},{inputs:[],name:"LastOwner",type:"error"},{inputs:[{name:"index",type:"uint256"}],name:"NoOwnerAtIndex",type:"error"},{inputs:[{name:"ownersRemaining",type:"uint256"}],name:"NotLastOwner",type:"error"},{inputs:[{name:"selector",type:"bytes4"}],name:"SelectorNotAllowed",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnauthorizedCallContext",type:"error"},{inputs:[],name:"UpgradeFailed",type:"error"},{inputs:[{name:"index",type:"uint256"},{name:"expectedOwner",type:"bytes"},{name:"actualOwner",type:"bytes"}],name:"WrongOwnerAtIndex",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"AddOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"RemoveOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"REPLAYABLE_NONCE_KEY",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"addOwnerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"addOwnerPublicKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"functionSelector",type:"bytes4"}],name:"canSkipChainIdValidation",outputs:[{name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"entryPoint",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"calls",type:"bytes[]"}],name:"executeWithoutChainIdValidation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHashWithoutChainId",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"$",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"owners",type:"bytes[]"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"isOwnerAddress",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"bytes"}],name:"isOwnerBytes",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"isOwnerPublicKey",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"result",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextOwnerIndex",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"}],name:"ownerAtIndex",outputs:[{name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownerCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeLastOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeOwnerAtIndex",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"removedOwnersCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"}],name:"replaySafeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"newImplementation",type:"address"},{name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"missingAccountFunds",type:"uint256"}],name:"validateUserOp",outputs:[{name:"validationData",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],Or=[{inputs:[{name:"implementation_",type:"address"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"OwnerRequired",type:"error"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"createAccount",outputs:[{name:"account",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"getAddress",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initCodeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"}];class Dr extends lt{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join("\n"),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}async function Br(e,{account:t=e.account,message:n}){if(!t)throw new Dr({docsPath:"/docs/actions/wallet/signMessage"});const a=Ma(t);if(a.signMessage)return a.signMessage({message:n});const s="string"==typeof n?Xt(n):n.raw instanceof Uint8Array?qt(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,a.address]},{retryCount:0})}async function Sr(e,t){const{account:n=e.account,domain:a,message:s,primaryType:r}=t;if(!n)throw new Dr({docsPath:"/docs/actions/wallet/signTypedData"});const i=Ma(n),o={EIP712Domain:Js({domain:a}),...t.types};if(Xs({domain:a,message:s,primaryType:r,types:o}),i.signTypedData)return i.signTypedData({domain:a,message:s,primaryType:r,types:o});const c=function(e){const{domain:t,message:n,primaryType:a,types:s}=e,r=(e,t)=>{const n={...t};for(const t of e){const{name:e,type:a}=t;"address"===a&&(n[e]=n[e].toLowerCase())}return n},i=s.EIP712Domain&&t?r(s.EIP712Domain,t):{},o=(()=>{if("EIP712Domain"!==a)return r(s[a],n)})();return Ra({domain:i,message:o,primaryType:a,types:s})}({domain:a,message:s,primaryType:r,types:o});return e.request({method:"eth_signTypedData_v4",params:[i.address,c]},{retryCount:0})}class Tr extends lt{constructor({cause:e}){super("Smart Account is not deployed.",{cause:e,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(Tr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class Gr extends lt{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Gr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521}),Object.defineProperty(Gr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Fr extends lt{constructor({cause:e}){super("Failed to send funds to beneficiary.",{cause:e,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty(Fr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class $r extends lt{constructor({cause:e}){super("Gas value overflowed.",{cause:e,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty($r,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class Cr extends lt{constructor({cause:e}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:e,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(Cr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class Mr extends lt{constructor({cause:e,factory:t,factoryData:n,initCode:a}){super("Failed to simulate deployment for Smart Account.",{cause:e,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)","- Smart Account deployment execution reverted with an error\n",t&&`factory: ${t}`,n&&`factoryData: ${n}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty(Mr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class Lr extends lt{constructor({cause:e,factory:t,factoryData:n,initCode:a}){super("Smart Account initialization implementation did not create an account.",{cause:e,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid","- Smart Account initialization implementation is incorrect\n",t&&`factory: ${t}`,n&&`factoryData: ${n}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty(Lr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class kr extends lt{constructor({cause:e,factory:t,factoryData:n,initCode:a,sender:s}){super("Smart Account initialization implementation does not return the expected sender.",{cause:e,metaMessages:["This could arise when:","Smart Account initialization implementation does not return a sender address\n",t&&`factory: ${t}`,n&&`factoryData: ${n}`,a&&`initCode: ${a}`,s&&`sender: ${s}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(kr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class Nr extends lt{constructor({cause:e}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:e,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(Nr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class Ur extends lt{constructor({cause:e}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:e,name:"InternalCallOnlyError"})}}Object.defineProperty(Ur,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class Rr extends lt{constructor({cause:e}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:e,name:"InvalidAggregatorError"})}}Object.defineProperty(Rr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class _r extends lt{constructor({cause:e,nonce:t}){super("Invalid Smart Account nonce used for User Operation.",{cause:e,metaMessages:[t&&`nonce: ${t}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(_r,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class zr extends lt{constructor({cause:e}){super("Bundler has not set a beneficiary address.",{cause:e,name:"InvalidBeneficiaryError"})}}Object.defineProperty(zr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class jr extends lt{constructor({cause:e}){super("Invalid fields set on User Operation.",{cause:e,name:"InvalidFieldsError"})}}Object.defineProperty(jr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Vr extends lt{constructor({cause:e,paymasterAndData:t}){super("Paymaster properties provided are invalid.",{cause:e,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",t&&`paymasterAndData: ${t}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(Vr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class Hr extends lt{constructor({cause:e}){super("Paymaster deposit for the User Operation is too low.",{cause:e,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(Hr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508}),Object.defineProperty(Hr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class qr extends lt{constructor({cause:e}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:e,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(qr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class Wr extends lt{constructor({cause:e}){super("The Paymaster contract has not been deployed.",{cause:e,name:"PaymasterNotDeployedError"})}}Object.defineProperty(Wr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class Zr extends lt{constructor({cause:e}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:e,name:"PaymasterRateLimitError"})}}Object.defineProperty(Zr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class Yr extends lt{constructor({cause:e}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:e,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(Yr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class Kr extends lt{constructor({cause:e}){super("Paymaster `postOp` function reverted.",{cause:e,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(Kr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class Xr extends lt{constructor({cause:e,factory:t,factoryData:n,initCode:a}){super("Smart Account has already been deployed.",{cause:e,metaMessages:["Remove the following properties and try again:",t&&"`factory`",n&&"`factoryData`",a&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(Xr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class Jr extends lt{constructor({cause:e}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:e,name:"SignatureCheckFailedError"})}}Object.defineProperty(Jr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class Qr extends lt{constructor({cause:e}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:e,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(Qr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class ei extends lt{constructor({cause:e}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:e,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty(ei,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class ti extends lt{constructor({cause:e}){super("User Operation expired.",{cause:e,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty(ti,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class ni extends lt{constructor({cause:e}){super("Paymaster for User Operation expired.",{cause:e,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(ni,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class ai extends lt{constructor({cause:e}){super("Signature provided for the User Operation is invalid.",{cause:e,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(ai,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class si extends lt{constructor({cause:e}){super("Signature provided for the User Operation is invalid.",{cause:e,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(si,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class ri extends lt{constructor({cause:e}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:e,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(ri,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class ii extends lt{constructor({cause:e}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:e,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(ii,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class oi extends lt{constructor({cause:e}){super("User Operation rejected with op code validation error.",{cause:e,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(oi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class ci extends lt{constructor({cause:e}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:e,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(ci,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class ui extends lt{constructor({cause:e}){super(`An error occurred while executing user operation: ${e?.shortMessage}`,{cause:e,name:"UnknownBundlerError"})}}class di extends lt{constructor({cause:e}){super("User Operation verification gas limit exceeded.",{cause:e,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty(di,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class pi extends lt{constructor({cause:e}){super("User Operation verification gas limit is too low.",{cause:e,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}async function li(e){return new Promise((t=>setTimeout(t,e)))}Object.defineProperty(pi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});const yi={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function fi(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?Vt(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?Vt(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?yi[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=e.authorizationList.map((e=>({contractAddress:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)})))),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(0n===t.v||27n===t.v)return 0;if(1n===t.v||28n===t.v)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip1559"===t.type&&delete t.maxFeePerBlobGas,t}function mi(e){const t=e.transactions?.map((e=>"string"==typeof e?e:fi(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}function hi(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}const bi={"0x0":"reverted","0x1":"success"};class gi extends lt{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function wi(e,t="wei"){return function(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new gi({value:e});let[n,a="0"]=e.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${a}`))&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>t){const[e,s,r]=[a.slice(0,t-1),a.slice(t-1,t),a.slice(t)],i=Math.round(Number(`${s}.${r}`));a=i>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${i}`,a.length>t&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,t)}else a=a.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${a}`)}(e,ja[t])}class vi extends lt{constructor(e,{callData:t,callGasLimit:n,docsPath:a,factory:s,factoryData:r,initCode:i,maxFeePerGas:o,maxPriorityFeePerGas:c,nonce:u,paymaster:d,paymasterAndData:p,paymasterData:l,paymasterPostOpGasLimit:y,paymasterVerificationGasLimit:f,preVerificationGas:m,sender:h,signature:b,verificationGasLimit:g}){const w=Ka({callData:t,callGasLimit:n,factory:s,factoryData:r,initCode:i,maxFeePerGas:void 0!==o&&`${qa(o)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${qa(c)} gwei`,nonce:u,paymaster:d,paymasterAndData:p,paymasterData:l,paymasterPostOpGasLimit:y,paymasterVerificationGasLimit:f,preVerificationGas:m,sender:h,signature:b,verificationGasLimit:g});super(e.shortMessage,{cause:e,docsPath:a,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",w].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class xi extends lt{constructor({hash:e}){super(`User Operation receipt with hash "${e}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class Ai extends lt{constructor({hash:e}){super(`User Operation with hash "${e}" could not be found.`,{name:"UserOperationNotFoundError"})}}class Pi extends lt{constructor({hash:e}){super(`Timed out while waiting for User Operation with hash "${e}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}const Ei=[Gr,jr,Hr,Zr,Yr,Jr,ei,ci,ri,ii,oi];function Ii(e,{calls:t,docsPath:n,...a}){const s=(()=>{const n=function(e,t){const n=(e.details||"").toLowerCase();if(Tr.message.test(n))return new Tr({cause:e});if(Fr.message.test(n))return new Fr({cause:e});if($r.message.test(n))return new $r({cause:e});if(Cr.message.test(n))return new Cr({cause:e});if(Mr.message.test(n))return new Mr({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Lr.message.test(n))return new Lr({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(kr.message.test(n))return new kr({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(Nr.message.test(n))return new Nr({cause:e});if(Ur.message.test(n))return new Ur({cause:e});if(_r.message.test(n))return new _r({cause:e,nonce:t.nonce});if(Rr.message.test(n))return new Rr({cause:e});if(zr.message.test(n))return new zr({cause:e});if(Vr.message.test(n))return new Vr({cause:e});if(Hr.message.test(n))return new Hr({cause:e});if(qr.message.test(n))return new qr({cause:e});if(Wr.message.test(n))return new Wr({cause:e});if(Kr.message.test(n))return new Kr({cause:e});if(Qr.message.test(n))return new Qr({cause:e});if(Xr.message.test(n))return new Xr({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(ti.message.test(n))return new ti({cause:e});if(ni.message.test(n))return new ni({cause:e});if(si.message.test(n))return new si({cause:e});if(ai.message.test(n))return new ai({cause:e});if(di.message.test(n))return new di({cause:e});if(pi.message.test(n))return new pi({cause:e});const a=e.walk((e=>Ei.some((t=>t.code===e.code))));if(a){if(a.code===Gr.code)return new Gr({cause:e,message:a.details});if(a.code===jr.code)return new jr({cause:e});if(a.code===Hr.code)return new Hr({cause:e});if(a.code===Zr.code)return new Zr({cause:e});if(a.code===Yr.code)return new Yr({cause:e});if(a.code===Jr.code)return new Jr({cause:e});if(a.code===ei.code)return new ei({cause:e});if(a.code===ci.code)return new ci({cause:e});if(a.code===ri.code)return new ri({cause:e});if(a.code===ii.code)return new ii({cause:e});if(a.code===oi.code)return new oi({cause:e})}return new ui({cause:e})}(e,a);if(t&&n instanceof Gr){const e=function(e){let t;return e.walk((e=>{const n=e;if("string"==typeof n.data||"string"==typeof n.data?.revertData||!(n instanceof lt)&&"string"==typeof n.message){const e=(n.data?.revertData||n.data||n.message).match?.(/(0x[A-Za-z0-9]*)/);if(e)return t=e[1],!0}return!1})),t}(n),a=t?.filter((e=>e.abi||e.data));if(e&&a.length>0)return function(e){const{calls:t,revertData:n}=e,{abi:a,functionName:s,args:r,to:i}=(()=>{const e=t?.filter((e=>Boolean(e.abi)));if(1===e.length)return e[0];const a=e.filter((e=>{try{return Boolean(Ua({abi:e.abi,data:n}))}catch{return!1}}));return 1===a.length?a[0]:{abi:[],functionName:e.reduce(((e,t)=>`${e?`${e} | `:""}${t.functionName}`),""),args:void 0,to:void 0}})(),o="0x"===n?new ns({functionName:s}):new ts({abi:a,data:n,functionName:s});return new es(o,{abi:a,args:r,contractAddress:i,functionName:s})}({calls:a,revertData:e})}return n})();return new vi(s,{docsPath:n,...a})}function Oi(e){const t={};return void 0!==e.callData&&(t.callData=e.callData),void 0!==e.callGasLimit&&(t.callGasLimit=Yt(e.callGasLimit)),void 0!==e.factory&&(t.factory=e.factory),void 0!==e.factoryData&&(t.factoryData=e.factoryData),void 0!==e.initCode&&(t.initCode=e.initCode),void 0!==e.maxFeePerGas&&(t.maxFeePerGas=Yt(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=Yt(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(t.nonce=Yt(e.nonce)),void 0!==e.paymaster&&(t.paymaster=e.paymaster),void 0!==e.paymasterAndData&&(t.paymasterAndData=e.paymasterAndData||"0x"),void 0!==e.paymasterData&&(t.paymasterData=e.paymasterData),void 0!==e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=Yt(e.paymasterPostOpGasLimit)),void 0!==e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=Yt(e.paymasterVerificationGasLimit)),void 0!==e.preVerificationGas&&(t.preVerificationGas=Yt(e.preVerificationGas)),void 0!==e.sender&&(t.sender=e.sender),void 0!==e.signature&&(t.signature=e.signature),void 0!==e.verificationGasLimit&&(t.verificationGasLimit=Yt(e.verificationGasLimit)),t}class Di extends lt{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Bi extends lt{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Si extends lt{constructor({blockHash:e,blockNumber:t}){let n="Block";e&&(n=`Block at hash "${e}"`),t&&(n=`Block at number "${t}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}async function Ti(e,{blockHash:t,blockNumber:n,blockTag:a,includeTransactions:s}={}){const r=a??"latest",i=s??!1,o=void 0!==n?Yt(n):void 0;let c=null;if(c=t?await e.request({method:"eth_getBlockByHash",params:[t,i]},{dedupe:!0}):await e.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:Boolean(o)}),!c)throw new Si({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||mi)(c)}async function Gi(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function Fi(e,t){return async function(e,t){const{block:n,chain:a=e.chain,request:s,type:r="eip1559"}=t||{},i=await(async()=>"function"==typeof a?.fees?.baseFeeMultiplier?a.fees.baseFeeMultiplier({block:n,client:e,request:s}):a?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new Di;const o=10**(i.toString().split(".")[1]?.length??0),c=e=>e*BigInt(Math.ceil(i*o))/BigInt(o),u=n||await us(e,Ti,"getBlock")({});if("function"==typeof a?.fees?.estimateFeesPerGas){const t=await a.fees.estimateFeesPerGas({block:n,client:e,multiply:c,request:s,type:r});if(null!==t)return t}if("eip1559"===r){if("bigint"!=typeof u.baseFeePerGas)throw new Bi;const t="bigint"==typeof s?.maxPriorityFeePerGas?s.maxPriorityFeePerGas:await async function(e,t){const{block:n,chain:a=e.chain,request:s}=t||{};try{const t=a?.fees?.maxPriorityFeePerGas??a?.fees?.defaultPriorityFee;if("function"==typeof t){const a=n||await us(e,Ti,"getBlock")({}),r=await t({block:a,client:e,request:s});if(null===r)throw new Error;return r}return void 0!==t?t:jt(await e.request({method:"eth_maxPriorityFeePerGas"}))}catch{const[t,a]=await Promise.all([n?Promise.resolve(n):us(e,Ti,"getBlock")({}),us(e,Gi,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new Bi;const s=a-t.baseFeePerGas;return s<0n?0n:s}}(e,{block:u,chain:a,request:s}),n=c(u.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??n+t,maxPriorityFeePerGas:t}}const d=s?.gasPrice??c(await us(e,Gi,"getGasPrice")({}));return{gasPrice:d}}(e,t)}async function $i(e){return Vt(await e.request({method:"eth_chainId"},{dedupe:!0}))}async function Ci(e,t){const{chainId:n,entryPointAddress:a,context:s,...r}=t,i=Oi(r),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterData",params:[{...i,callGasLimit:i.callGasLimit??"0x0",verificationGasLimit:i.verificationGasLimit??"0x0",preVerificationGas:i.preVerificationGas??"0x0"},a,Yt(n),s]});return{...u,...o&&{paymasterPostOpGasLimit:jt(o)},...c&&{paymasterVerificationGasLimit:jt(c)}}}async function Mi(e,t){const{chainId:n,entryPointAddress:a,context:s,...r}=t,i=Oi(r),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterStubData",params:[{...i,callGasLimit:i.callGasLimit??"0x0",verificationGasLimit:i.verificationGasLimit??"0x0",preVerificationGas:i.preVerificationGas??"0x0"},a,Yt(n),s]});return{...u,...o&&{paymasterPostOpGasLimit:jt(o)},...c&&{paymasterVerificationGasLimit:jt(c)}}}const Li=["factory","fees","gas","paymaster","nonce","signature"];async function ki(e,t){const n=t,{account:a=e.account,parameters:s=Li,stateOverride:r}=n;if(!a)throw new Dr;const i=Ma(a),o=e,c=n.paymaster??o?.paymaster,u="string"==typeof c?c:void 0,{getPaymasterStubData:d,getPaymasterData:p}=(()=>{if(!0===c)return{getPaymasterStubData:e=>us(o,Mi,"getPaymasterStubData")(e),getPaymasterData:e=>us(o,Ci,"getPaymasterData")(e)};if("object"==typeof c){const{getPaymasterStubData:e,getPaymasterData:t}=c;return{getPaymasterStubData:t&&e?e:t,getPaymasterData:t&&e?t:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),l=n.paymasterContext?n.paymasterContext:o?.paymasterContext;let y={...n,paymaster:u,sender:i.address};const[f,m,h,b,g]=await Promise.all([(async()=>n.calls?i.encodeCalls(n.calls.map((e=>{const t=e;return"abi"in t?{data:Ca(t),to:t.to,value:t.value}:t}))):n.callData)(),(async()=>{if(!s.includes("factory"))return;if(n.initCode)return{initCode:n.initCode};if(n.factory&&n.factoryData)return{factory:n.factory,factoryData:n.factoryData};const{factory:e,factoryData:t}=await i.getFactoryArgs();return"0.6"===i.entryPoint.version?{initCode:e&&t?Pn([e,t]):void 0}:{factory:e,factoryData:t}})(),(async()=>{if(s.includes("fees")){if("bigint"==typeof n.maxFeePerGas&&"bigint"==typeof n.maxPriorityFeePerGas)return y;if(o?.userOperation?.estimateFeesPerGas){const e=await o.userOperation.estimateFeesPerGas({account:i,bundlerClient:o,userOperation:y});return{...y,...e}}try{const t=o.client??e,a=await us(t,Fi,"estimateFeesPerGas")({chain:t.chain,type:"eip1559"});return{maxFeePerGas:"bigint"==typeof n.maxFeePerGas?n.maxFeePerGas:BigInt(Math.max(Number(2n*a.maxFeePerGas),Number(wi("3")))),maxPriorityFeePerGas:"bigint"==typeof n.maxPriorityFeePerGas?n.maxPriorityFeePerGas:BigInt(Math.max(Number(2n*a.maxPriorityFeePerGas),Number(wi("1"))))}}catch{return}}})(),(async()=>{if(s.includes("nonce"))return"bigint"==typeof n.nonce?n.nonce:i.getNonce()})(),(async()=>{if(s.includes("signature"))return void 0!==n.signature?n.signature:i.getStubSignature()})()]);let w;async function v(){if(w)return w;if(e.chain)return e.chain.id;const t=await us(e,$i,"getChainId")({});return w=t,w}void 0!==f&&(y.callData=f),void 0!==m&&(y={...y,...m}),void 0!==h&&(y={...y,...h}),void 0!==b&&(y.nonce=b),void 0!==g&&(y.signature=g),"0.6"!==i.entryPoint.version||y.initCode||(y.initCode="0x");let x=!1;if(s.includes("paymaster")&&d&&!u&&!n.paymasterAndData){const{isFinal:e=!1,sponsor:t,...n}=await d({chainId:await v(),entryPointAddress:i.entryPoint.address,context:l,...y});x=e,y={...y,...n}}if("0.6"!==i.entryPoint.version||y.paymasterAndData||(y.paymasterAndData="0x"),s.includes("gas")){if(i.userOperation?.estimateGas){const e=await i.userOperation.estimateGas(y);y={...y,...e}}if(void 0===y.callGasLimit||void 0===y.preVerificationGas||void 0===y.verificationGasLimit||y.paymaster&&void 0===y.paymasterPostOpGasLimit||y.paymaster&&void 0===y.paymasterVerificationGasLimit){const e=await us(o,Ni,"estimateUserOperationGas")({account:i,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:r,...y.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...y});y={...y,callGasLimit:y.callGasLimit??e.callGasLimit,preVerificationGas:y.preVerificationGas??e.preVerificationGas,verificationGasLimit:y.verificationGasLimit??e.verificationGasLimit,paymasterPostOpGasLimit:y.paymasterPostOpGasLimit??e.paymasterPostOpGasLimit,paymasterVerificationGasLimit:y.paymasterVerificationGasLimit??e.paymasterVerificationGasLimit}}}if(s.includes("paymaster")&&p&&!u&&!n.paymasterAndData&&!x){const e=await p({chainId:await v(),entryPointAddress:i.entryPoint.address,context:l,...y});y={...y,...e}}return delete y.calls,delete y.parameters,delete y.paymasterContext,"string"!=typeof y.paymaster&&delete y.paymaster,y}async function Ni(e,t){const{account:n=e.account,entryPointAddress:a,stateOverride:s}=t;if(!n&&!t.sender)throw new Dr;const r=n?Ma(n):void 0,i=Ns(s),o=r?await us(e,ki,"prepareUserOperation")({...t,parameters:["factory","nonce","paymaster","signature"]}):t;try{const t=[Oi(o),a??r?.entryPoint?.address];return function(e){const t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}(await e.request({method:"eth_estimateUserOperationGas",params:i?[...t,i]:[...t]}))}catch(e){const n=t.calls;throw Ii(e,{...o,...n?{calls:n}:{}})}}function Ui(e){const t={...e};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}function Ri(e){const t={...e};return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map((e=>hi(e)))),e.receipt&&(t.receipt=function(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>hi(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Vt(e.transactionIndex):null,status:e.status?bi[e.status]:null,type:e.type?yi[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}(t.receipt)),t}async function _i(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!n)throw new xi({hash:t});return Ri(n)}const zi=new Map,ji=new Map;let Vi=0;function Hi(e,t,n){const a=++Vi,s=()=>zi.get(e)||[],r=()=>{const t=ji.get(e);1===s().length&&t&&t(),(()=>{const t=s();zi.set(e,t.filter((e=>e.id!==a)))})()},i=s();if(zi.set(e,[...i,{id:a,fns:t}]),i&&i.length>0)return r;const o={};for(const e in t)o[e]=(...t)=>{const n=s();if(0!==n.length)for(const a of n)a.fns[e]?.(...t)};const c=n(o);return"function"==typeof c&&ji.set(e,c),r}function qi(e,t){const{hash:n,pollingInterval:a=e.pollingInterval,retryCount:s,timeout:r=12e4}=t;let i=0;const o=Ra(["waitForUserOperationReceipt",e.uid,n]);return new Promise(((t,c)=>{const u=Hi(o,{resolve:t,reject:c},(t=>{const o=e=>{c(),e(),u()},c=function(e,{emitOnBegin:t,initialWaitTime:n,interval:a}){let s=!0;const r=()=>s=!1;return(async()=>{let i;t&&(i=await e({unpoll:r}));const o=await(n?.(i))??a;await li(o);const c=async()=>{s&&(await e({unpoll:r}),await li(a),c())};c()})(),r}((async()=>{s&&i>=s&&o((()=>t.reject(new Pi({hash:n}))));try{const a=await us(e,_i,"getUserOperationReceipt")({hash:n});o((()=>t.resolve(a)))}catch(e){const n=e;"UserOperationReceiptNotFoundError"!==n.name&&o((()=>t.reject(n)))}i++}),{emitOnBegin:!0,interval:a});return r&&setTimeout((()=>o((()=>t.reject(new Pi({hash:n}))))),r),c}))}))}function Wi(e){return{estimateUserOperationGas:t=>Ni(e,t),getChainId:()=>$i(e),getSupportedEntryPoints:()=>function(e){return e.request({method:"eth_supportedEntryPoints"})}(e),getUserOperation:t=>async function(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!n)throw new Ai({hash:t});const{blockHash:a,blockNumber:s,entryPoint:r,transactionHash:i,userOperation:o}=n;return{blockHash:a,blockNumber:BigInt(s),entryPoint:r,transactionHash:i,userOperation:Ui(o)}}(e,t),getUserOperationReceipt:t=>_i(e,t),prepareUserOperation:t=>ki(e,t),sendUserOperation:t=>async function(e,t){const{account:n=e.account,entryPointAddress:a}=t;if(!n&&!t.sender)throw new Dr;const s=n?Ma(n):void 0,r=s?await us(e,ki,"prepareUserOperation")(t):t,i=t.signature||await(s?.signUserOperation(r)),o=Oi({...r,signature:i});try{return await e.request({method:"eth_sendUserOperation",params:[o,a??s?.entryPoint.address]},{retryCount:0})}catch(e){const n=t.calls;throw Ii(e,{...r,...n?{calls:n}:{},signature:i})}}(e,t),waitForUserOperationReceipt:t=>qi(e,t)}}function Zi(e){return{getPaymasterData:t=>Ci(e,t),getPaymasterStubData:t=>Mi(e,t)}}const Yi="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",Ki="0x0000000071727De22E5E9d8BAf0edAc6f37da032",Xi=async(e,t)=>{const{address:n,entryPointAddress:a,key:s=BigInt(0)}=t;return await us(e,_s,"readContract")({address:a,abi:[{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getNonce",args:[n,s]})},Ji=[{inputs:[{internalType:"address",name:"_entryPoint",type:"address"},{internalType:"bytes",name:"initCode",type:"bytes"}],stateMutability:"payable",type:"constructor"}],Qi=async(e,n)=>{const{initCode:a,entryPointAddress:s,factory:r,factoryData:i}=n;if(!a&&!r&&!i)throw new Error("Either `initCode` or `factory` and `factoryData` must be provided");const o=a||t.concat([r,i]),{data:c}=await us(e,Rs,"call")({data:t.encodeDeployData({abi:Ji,bytecode:"0x608060405260405161058a38038061058a83398181016040528101906100259190610341565b5f808373ffffffffffffffffffffffffffffffffffffffff16639b249f6960e01b8460405160240161005791906103ed565b604051602081830303815290604052907bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff83818316178352505050506040516100c19190610447565b5f604051808303815f865af19150503d805f81146100fa576040519150601f19603f3d011682016040523d82523d5f602084013e6100ff565b606091505b50915091505f8261015f576004825111156101245760248201519050805f526014600cf35b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610156906104dd565b60405180910390fd5b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101919061056b565b60405180910390fd5b5f604051905090565b5f80fd5b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6101d4826101ab565b9050919050565b6101e4816101ca565b81146101ee575f80fd5b50565b5f815190506101ff816101db565b92915050565b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6102538261020d565b810181811067ffffffffffffffff821117156102725761027161021d565b5b80604052505050565b5f61028461019a565b9050610290828261024a565b919050565b5f67ffffffffffffffff8211156102af576102ae61021d565b5b6102b88261020d565b9050602081019050919050565b8281835e5f83830152505050565b5f6102e56102e084610295565b61027b565b90508281526020810184848401111561030157610300610209565b5b61030c8482856102c5565b509392505050565b5f82601f83011261032857610327610205565b5b81516103388482602086016102d3565b91505092915050565b5f8060408385031215610357576103566101a3565b5b5f610364858286016101f1565b925050602083015167ffffffffffffffff811115610385576103846101a7565b5b61039185828601610314565b9150509250929050565b5f81519050919050565b5f82825260208201905092915050565b5f6103bf8261039b565b6103c981856103a5565b93506103d98185602086016102c5565b6103e28161020d565b840191505092915050565b5f6020820190508181035f83015261040581846103b5565b905092915050565b5f81905092915050565b5f6104218261039b565b61042b818561040d565b935061043b8185602086016102c5565b80840191505092915050565b5f6104528284610417565b915081905092915050565b5f82825260208201905092915050565b7f67657453656e64657241646472657373206661696c656420776974686f7574205f8201527f6461746100000000000000000000000000000000000000000000000000000000602082015250565b5f6104c760248361045d565b91506104d28261046d565b604082019050919050565b5f6020820190508181035f8301526104f4816104bb565b9050919050565b7f67657453656e6465724164647265737320646964206e6f7420726576657274205f8201527f6173206578706563746564000000000000000000000000000000000000000000602082015250565b5f610555602b8361045d565b9150610560826104fb565b604082019050919050565b5f6020820190508181035f83015261058281610549565b905091905056fe",args:[s,o]})});if(!c)throw new Error("Failed to get sender address");return t.getAddress(c)};async function eo({owner:e,address:n}){if("type"in e&&"local"===e.type)return e;let a;if("request"in e){if(!n)try{[n]=await e.request({method:"eth_requestAccounts"})}catch{[n]=await e.request({method:"eth_accounts"})}if(!n)throw new Error("address is required");a=t.createWalletClient({account:n,transport:t.custom(e)})}return a||(a=e),function(e){if("string"==typeof e){if(!un(e,{strict:!1}))throw new Ft({address:e});return{address:e,type:"json-rpc"}}if(!un(e.address,{strict:!1}))throw new Ft({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,experimental_signAuthorization:e.experimental_signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}({address:a.account.address,signMessage:async({message:e})=>a.signMessage({message:e}),signTypedData:async e=>us(a,Sr,"signTypedData")(e),async signTransaction(e){throw new Error("Smart account signer doesn't need to sign transactions")}})}const to=async(e,n=BigInt(0))=>{if(!e)throw new Error("Owner account not found");return t.encodeFunctionData({abi:[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"salt",type:"uint256"}],name:"createAccount",outputs:[{internalType:"contract LightAccount",name:"ret",type:"address"}],stateMutability:"nonpayable",type:"function"}],functionName:"createAccount",args:[e,n]})};async function no(e,t,n,a){return e.signTypedData({domain:{chainId:Number(t),name:"LightAccount",verifyingContract:n,version:"1"},types:{LightAccountMessage:[{name:"message",type:"bytes"}]},message:{message:a},primaryType:"LightAccountMessage"})}const ao={"1.1.0":{factoryAddress:"0x00004EC70002a32400f8ae005A26081065620D20"},"2.0.0":{factoryAddress:"0x0000000000400CdFef5E2714E63d8040b700BC24"}};var so;async function ro(e){const{version:n,factoryAddress:a,address:s,owner:r,client:i,index:o=BigInt(0),nonceKey:c}=e,u=await eo({owner:r}),d={address:e.entryPoint?.address??Ki,abi:"0.6"===(e.entryPoint?.version??"0.7")?yr:fr,version:e.entryPoint?.version??"0.7"},{factoryAddress:p}=((e,{factoryAddress:t})=>({factoryAddress:t??ao[e].factoryAddress}))(n,{factoryAddress:a});let l,y=s;const f=async()=>l||(l=i.chain?i.chain.id:await us(i,$i,"getChainId")({}),l),m=async()=>({factory:p,factoryData:await to(u.address,o)});return vr({client:i,entryPoint:d,getFactoryArgs:m,async getAddress(){if(y)return y;const{factory:e,factoryData:t}=await m();return y=await Qi(i,{factory:e,factoryData:t,entryPointAddress:d.address}),y},async encodeCalls(e){if(e.length>1)return t.encodeFunctionData({abi:[{inputs:[{internalType:"address[]",name:"dest",type:"address[]"},{internalType:"uint256[]",name:"value",type:"uint256[]"},{internalType:"bytes[]",name:"func",type:"bytes[]"}],name:"executeBatch",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"executeBatch",args:[e.map((e=>e.to)),e.map((e=>e.value??0n)),e.map((e=>e.data??"0x"))]});const n=0===e.length?void 0:e[0];if(!n)throw new Error("No calls to encode");return t.encodeFunctionData({abi:[{inputs:[{internalType:"address",name:"dest",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"func",type:"bytes"}],name:"execute",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"execute",args:[n.to,n.value??0n,n.data??"0x"]})},async getNonce(e){return Xi(i,{address:await this.getAddress(),entryPointAddress:d.address,key:c??e?.key})},async getStubSignature(){const e="0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c";switch(n){case"1.1.0":return e;case"2.0.0":return t.concat([so.EOA,e]);default:throw new Error("Unknown Light Account version")}},async sign({hash:e}){return this.signMessage({message:e})},async signMessage({message:e}){const a=await no(u,await f(),await this.getAddress(),t.hashMessage(e));switch(n){case"1.1.0":return a;case"2.0.0":return t.concat([so.EOA,a]);default:throw new Error("Unknown Light Account version")}},async signTypedData(e){const a=await no(u,await f(),await this.getAddress(),t.hashTypedData(e));switch(n){case"1.1.0":return a;case"2.0.0":return t.concat([so.EOA,a]);default:throw new Error("Unknown Light Account version")}},async signUserOperation(e){const{chainId:a=await f(),...s}=e,r=mr({userOperation:{...s,signature:"0x"},entryPointAddress:d.address,entryPointVersion:d.version,chainId:a}),o=await Br(i,{account:u,message:{raw:r}});switch(n){case"1.1.0":return o;case"2.0.0":return t.concat([so.EOA,o]);default:throw new Error("Unknown Light Account version")}}})}function io(e){switch(e){case"call":return"0x00";case"batchcall":return"0x01";case"delegatecall":return"0xff"}}function oo({type:e,revertOnError:n,selector:a,context:s}){return t.encodePacked(["bytes1","bytes1","bytes4","bytes4","bytes22"],[t.toHex(t.toBytes(io(e),{size:1})),t.toHex(t.toBytes(n?"0x01":"0x00",{size:1})),t.toHex(t.toBytes("0x0",{size:4})),t.toHex(t.toBytes(a??"0x",{size:4})),t.toHex(t.toBytes(s??"0x",{size:22}))])}function co({mode:e,callData:n}){if(n.length>1&&"batchcall"!==e?.type)throw new Error(`mode ${JSON.stringify(e)} does not supported for batchcall calldata`);const a=[{type:"function",name:"execute",inputs:[{name:"execMode",type:"bytes32",internalType:"ExecMode"},{name:"executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"}];if(n.length>1)return t.encodeFunctionData({abi:a,functionName:"execute",args:[oo(e),t.encodeAbiParameters([{name:"executionBatch",type:"tuple[]",components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"callData",type:"bytes"}]}],[n.map((e=>({target:e.to,value:e.value??0n,callData:e.data??"0x"})))])]});const s=0===n.length?void 0:n[0];if(!s)throw new Error("No calls to encode");return t.encodeFunctionData({abi:a,functionName:"execute",args:[oo(e),t.concatHex([s.to,t.toHex(s.value??0n,{size:32}),s.data??"0x"])]})}!function(e){e.EOA="0x00"}(so||(so={}));const uo=[{inputs:[{internalType:"bytes",name:"transactions",type:"bytes"}],name:"multiSend",outputs:[],stateMutability:"payable",type:"function"}],po=[{type:"function",name:"initSafe7579",inputs:[{name:"safe7579",type:"address",internalType:"address"},{name:"executors",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"fallbacks",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"hooks",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"attesters",type:"address[]",internalType:"address[]"},{name:"threshold",type:"uint8",internalType:"uint8"}],outputs:[],stateMutability:"nonpayable"}],lo=[{type:"function",name:"preValidationSetup",inputs:[{name:"initHash",type:"bytes32",internalType:"bytes32"},{name:"to",type:"address",internalType:"address"},{name:"preInit",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"}],yo=[{inputs:[{internalType:"address[]",name:"modules",type:"address[]"}],name:"enableModules",outputs:[],stateMutability:"nonpayable",type:"function"}],fo=[{inputs:[{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint256",name:"_threshold",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"address",name:"fallbackHandler",type:"address"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"uint256",name:"payment",type:"uint256"},{internalType:"address payable",name:"paymentReceiver",type:"address"}],name:"setup",outputs:[],stateMutability:"nonpayable",type:"function"}],mo=[{inputs:[{internalType:"address",name:"_singleton",type:"address"},{internalType:"bytes",name:"initializer",type:"bytes"},{internalType:"uint256",name:"saltNonce",type:"uint256"}],name:"createProxyWithNonce",outputs:[{internalType:"contract SafeProxy",name:"proxy",type:"address"}],stateMutability:"nonpayable",type:"function"}],ho=[{type:"function",name:"setupSafe",inputs:[{name:"initData",type:"tuple",internalType:"struct Safe7579Launchpad.InitData",components:[{name:"singleton",type:"address",internalType:"address"},{name:"owners",type:"address[]",internalType:"address[]"},{name:"threshold",type:"uint256",internalType:"uint256"},{name:"setupTo",type:"address",internalType:"address"},{name:"setupData",type:"bytes",internalType:"bytes"},{name:"safe7579",type:"address",internalType:"contract ISafe7579"},{name:"validators",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"}],bo=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint8",name:"operation",type:"uint8"}],name:"executeUserOpWithErrorString",outputs:[],stateMutability:"nonpayable",type:"function"}],go={SafeOp:[{type:"address",name:"safe"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"uint256",name:"callGasLimit"},{type:"uint256",name:"verificationGasLimit"},{type:"uint256",name:"preVerificationGas"},{type:"uint256",name:"maxFeePerGas"},{type:"uint256",name:"maxPriorityFeePerGas"},{type:"bytes",name:"paymasterAndData"},{type:"uint48",name:"validAfter"},{type:"uint48",name:"validUntil"},{type:"address",name:"entryPoint"}]},wo={SafeOp:[{type:"address",name:"safe"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"uint128",name:"verificationGasLimit"},{type:"uint128",name:"callGasLimit"},{type:"uint256",name:"preVerificationGas"},{type:"uint128",name:"maxPriorityFeePerGas"},{type:"uint128",name:"maxFeePerGas"},{type:"bytes",name:"paymasterAndData"},{type:"uint48",name:"validAfter"},{type:"uint48",name:"validUntil"},{type:"address",name:"entryPoint"}]},vo={"1.4.1":{.6:{SAFE_MODULE_SETUP_ADDRESS:"0x8EcD4ec46D4D2a6B64fE960B3D64e8B94B2234eb",SAFE_4337_MODULE_ADDRESS:"0xa581c4A4DB7175302464fF3C06380BC3270b4037",SAFE_PROXY_FACTORY_ADDRESS:"0x4e1DCf7AD4e460CfD30791CCC4F9c8a4f820ec67",SAFE_SINGLETON_ADDRESS:"0x41675C099F32341bf84BFc5382aF534df5C7461a",MULTI_SEND_ADDRESS:"0x38869bf66a61cF6bDB996A6aE40D5853Fd43B526",MULTI_SEND_CALL_ONLY_ADDRESS:"0x9641d764fc13c8B624c04430C7356C1C7C8102e2"},.7:{SAFE_MODULE_SETUP_ADDRESS:"0x2dd68b007B46fBe91B9A7c3EDa5A7a1063cB5b47",SAFE_4337_MODULE_ADDRESS:"0x75cf11467937ce3F2f357CE24ffc3DBF8fD5c226",SAFE_PROXY_FACTORY_ADDRESS:"0x4e1DCf7AD4e460CfD30791CCC4F9c8a4f820ec67",SAFE_SINGLETON_ADDRESS:"0x41675C099F32341bf84BFc5382aF534df5C7461a",MULTI_SEND_ADDRESS:"0x38869bf66a61cF6bDB996A6aE40D5853Fd43B526",MULTI_SEND_CALL_ONLY_ADDRESS:"0x9641d764fc13c8B624c04430C7356C1C7C8102e2"}}},xo=(e,t)=>{let n=Number.parseInt(t.slice(-2),16);if(![0,1,27,28].includes(n))throw new Error("Invalid signature");return"eth_sign"===e&&(n<27&&(n+=27),n+=4),"eth_signTypedData"===e&&n<27&&(n+=27),t.slice(0,-2)+n.toString(16)},Ao=e=>{const n=e;return"string"==typeof n||n.raw?t.hashMessage(n):t.hashTypedData(e)},Po=e=>{const n=`0x${e.map((e=>(e=>t.encodePacked(["uint8","address","uint256","uint256","bytes"],[e.operation,e.to,e.value,BigInt(e.data.slice(2).length/2),e.data]).slice(2))(e))).join("")}`;return t.encodeFunctionData({abi:uo,functionName:"multiSend",args:[n]})},Eo=({safe4337ModuleAddress:e,safeSingletonAddress:n,erc7579LaunchpadAddress:a,owner:s,validators:r,executors:i,fallbacks:o,hooks:c,attesters:u,attestersThreshold:d})=>({singleton:n,owners:[s],threshold:BigInt(1),setupTo:a,setupData:t.encodeFunctionData({abi:po,functionName:"initSafe7579",args:[e,i.map((e=>({module:e.address,initData:e.context}))),o.map((e=>({module:e.address,initData:e.context}))),c.map((e=>({module:e.address,initData:e.context}))),u,d]}),safe7579:e,validators:r}),Io=async({owner:e,safeModuleSetupAddress:n,safe4337ModuleAddress:a,multiSendAddress:s,safeSingletonAddress:r,erc7579LaunchpadAddress:i,setupTransactions:o=[],safeModules:c=[],validators:u=[],executors:d=[],fallbacks:p=[],hooks:l=[],attesters:y=[],attestersThreshold:f=0,paymentToken:m=t.zeroAddress,payment:h=BigInt(0),paymentReceiver:b=t.zeroAddress})=>{if(i){const n=Eo({safe4337ModuleAddress:a,safeSingletonAddress:r,erc7579LaunchpadAddress:i,owner:e,validators:u,executors:d,fallbacks:p,hooks:l,attesters:y,attestersThreshold:f}),s=t.keccak256(t.encodeAbiParameters([{internalType:"address",name:"singleton",type:"address"},{internalType:"address[]",name:"owners",type:"address[]"},{internalType:"uint256",name:"threshold",type:"uint256"},{internalType:"address",name:"setupTo",type:"address"},{internalType:"bytes",name:"setupData",type:"bytes"},{internalType:"contract ISafe7579",name:"safe7579",type:"address"},{internalType:"struct ModuleInit[]",name:"validators",type:"tuple[]",components:[{internalType:"address",name:"module",type:"address"},{internalType:"bytes",name:"initData",type:"bytes"}]}],[n.singleton,n.owners,n.threshold,n.setupTo,n.setupData,n.safe7579,n.validators.map((e=>({module:e.address,initData:e.context})))]));return t.encodeFunctionData({abi:lo,functionName:"preValidationSetup",args:[s,t.zeroAddress,"0x"]})}const g=Po([{to:n,data:t.encodeFunctionData({abi:yo,functionName:"enableModules",args:[[a,...c]]}),value:BigInt(0),operation:1},...o.map((e=>({...e,operation:0})))]);return t.encodeFunctionData({abi:fo,functionName:"setup",args:[[e],BigInt(1),s,g,a,m,h,b]})};const Oo=async({owner:e,safeModuleSetupAddress:n,safe4337ModuleAddress:a,safeSingletonAddress:s,erc7579LaunchpadAddress:r,multiSendAddress:i,paymentToken:o,payment:c,paymentReceiver:u,saltNonce:d=BigInt(0),setupTransactions:p=[],safeModules:l=[],validators:y=[],executors:f=[],fallbacks:m=[],hooks:h=[],attesters:b=[],attestersThreshold:g=0})=>{if(!e)throw new Error("Owner account not found");const w=await Io({owner:e,safeModuleSetupAddress:n,safe4337ModuleAddress:a,multiSendAddress:i,setupTransactions:p,safeSingletonAddress:s,safeModules:l,erc7579LaunchpadAddress:r,validators:y,executors:f,fallbacks:m,hooks:h,attesters:b,attestersThreshold:g,paymentToken:o,payment:c,paymentReceiver:u});return t.encodeFunctionData({abi:mo,functionName:"createProxyWithNonce",args:[r??s,w,d]})};function Do(e){return void 0!==e.erc7579LaunchpadAddress}const Bo=[{inputs:[],name:"proxyCreationCode",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"pure",type:"function"}];async function So(e){const{client:n,owners:a,address:s,version:r,safe4337ModuleAddress:i,safeProxyFactoryAddress:o,safeSingletonAddress:c,erc7579LaunchpadAddress:u,saltNonce:d=BigInt(0),validUntil:p=0,validAfter:l=0,nonceKey:y,paymentToken:f,payment:m,paymentReceiver:h}=e,b=await eo({owner:a[0]}),g={address:e.entryPoint?.address??Ki,abi:"0.6"===(e.entryPoint?.version??"0.7")?yr:fr,version:e.entryPoint?.version??"0.7"};let w,v,x,A,P=[],E=[],I=[],O=[],D=[],B=[],S=0;Do(e)||(w=e.safeModuleSetupAddress,v=e.multiSendAddress,x=e.multiSendCallOnlyAddress,A=e.safeModules,P=e.setupTransactions??[]),Do(e)&&(E=e.validators??[],I=e.executors??[],O=e.fallbacks??[],D=e.hooks??[],B=e.attesters??[],S=e.attestersThreshold??0);const{safeModuleSetupAddress:T,safe4337ModuleAddress:G,safeProxyFactoryAddress:F,safeSingletonAddress:$,multiSendAddress:C,multiSendCallOnlyAddress:M}=((e,t,{addModuleLibAddress:n,safeModuleSetupAddress:a,safe4337ModuleAddress:s,safeProxyFactoryAddress:r,safeSingletonAddress:i,multiSendAddress:o,multiSendCallOnlyAddress:c})=>({safeModuleSetupAddress:a??n??vo[e][t].SAFE_MODULE_SETUP_ADDRESS,safe4337ModuleAddress:s??vo[e][t].SAFE_4337_MODULE_ADDRESS,safeProxyFactoryAddress:r??vo[e][t].SAFE_PROXY_FACTORY_ADDRESS,safeSingletonAddress:i??vo[e][t].SAFE_SINGLETON_ADDRESS,multiSendAddress:o??vo[e][t].MULTI_SEND_ADDRESS,multiSendCallOnlyAddress:c??vo[e][t].MULTI_SEND_CALL_ONLY_ADDRESS}))(r,g.version,{safeModuleSetupAddress:w,safe4337ModuleAddress:i,safeProxyFactoryAddress:o,safeSingletonAddress:c,multiSendAddress:v,multiSendCallOnlyAddress:x});let L,k=s;const N=async()=>L||(L=n.chain?n.chain.id:await us(n,$i,"getChainId")({}),L);return vr({client:n,entryPoint:g,getFactoryArgs:async()=>({factory:F,factoryData:await Oo({owner:b.address,safeModuleSetupAddress:T,safe4337ModuleAddress:G,safeSingletonAddress:$,multiSendAddress:C,erc7579LaunchpadAddress:u,saltNonce:d,setupTransactions:P,safeModules:A,validators:E,executors:I,fallbacks:O,hooks:D,attesters:B,attestersThreshold:S,paymentToken:f,payment:m,paymentReceiver:h})}),getAddress:async()=>k||(k=await(async({client:e,owner:n,safeModuleSetupAddress:a,safe4337ModuleAddress:s,safeProxyFactoryAddress:r,safeSingletonAddress:i,multiSendAddress:o,erc7579LaunchpadAddress:c,paymentToken:u,payment:d,paymentReceiver:p,setupTransactions:l=[],safeModules:y=[],saltNonce:f=BigInt(0),validators:m=[],executors:h=[],fallbacks:b=[],hooks:g=[],attesters:w=[],attestersThreshold:v=0})=>{const x=await _s(e,{abi:Bo,address:r,functionName:"proxyCreationCode"}),A=await Io({owner:n,safeModuleSetupAddress:a,safe4337ModuleAddress:s,multiSendAddress:o,setupTransactions:l,safeSingletonAddress:i,safeModules:y,erc7579LaunchpadAddress:c,validators:m,executors:h,fallbacks:b,hooks:g,attesters:w,attestersThreshold:v,paymentToken:u,payment:d,paymentReceiver:p}),P=t.encodePacked(["bytes","uint256"],[x,t.hexToBigInt(c??i)]),E=t.keccak256(t.encodePacked(["bytes32","uint256"],[t.keccak256(t.encodePacked(["bytes"],[A])),f]));return t.getContractAddress({from:r,salt:E,bytecode:P,opcode:"CREATE2"})})({client:n,owner:b.address,safeModuleSetupAddress:T,safe4337ModuleAddress:G,safeProxyFactoryAddress:F,safeSingletonAddress:$,multiSendAddress:C,erc7579LaunchpadAddress:u,saltNonce:d,setupTransactions:P,safeModules:A,validators:E,executors:I,fallbacks:O,hooks:D,attesters:B,attestersThreshold:S,paymentToken:f,payment:m,paymentReceiver:h}),k),async encodeCalls(e){const a=e.length>1;if(u){const s=await(async(e,t)=>{const n=await hr(e,{address:t});return Boolean(n)})(n,await this.getAddress());if(!s){const n=Eo({safe4337ModuleAddress:G,safeSingletonAddress:$,erc7579LaunchpadAddress:u,owner:b.address,validators:E,executors:I,fallbacks:O,hooks:D,attesters:B,attestersThreshold:S});return t.encodeFunctionData({abi:ho,functionName:"setupSafe",args:[{...n,validators:n.validators.map((e=>({module:e.address,initData:e.context}))),callData:co({mode:{type:a?"batchcall":"call",revertOnError:!1,selector:"0x",context:"0x"},callData:e})}]})}return co({mode:{type:a?"batchcall":"call",revertOnError:!1,selector:"0x",context:"0x"},callData:e})}let s,r,i,o=0;if(a)s=M,r=BigInt(0),i=Po(e.map((e=>({to:e.to,value:e.value??0n,data:e.data??"0x",operation:0})))),o=1;else{const t=0===e.length?void 0:e[0];if(!t)throw new Error("No calls to encode");s=t.to,i=t.data??"0x",r=t.value??0n}return t.encodeFunctionData({abi:bo,functionName:"executeUserOpWithErrorString",args:[s,r,i,o]})},async getNonce(e){return Xi(n,{address:await this.getAddress(),entryPointAddress:g.address,key:y??e?.key})},getStubSignature:async()=>"0x000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",async sign({hash:e}){return this.signMessage({message:e})},async signMessage({message:e}){const n=t.hashTypedData({domain:{chainId:await N(),verifyingContract:await this.getAddress()},types:{SafeMessage:[{name:"message",type:"bytes"}]},primaryType:"SafeMessage",message:{message:Ao(e)}});return xo("eth_sign",await b.signMessage({message:{raw:t.toBytes(n)}}))},async signTypedData(e){return xo("eth_signTypedData",await b.signTypedData({domain:{chainId:await N(),verifyingContract:await this.getAddress()},types:{SafeMessage:[{name:"message",type:"bytes"}]},primaryType:"SafeMessage",message:{message:Ao(e)}}))},async signUserOperation(e){const{chainId:a=await N(),...s}=e,r={safe:await this.getAddress(),callData:s.callData,nonce:s.nonce,initCode:s.initCode??"0x",maxFeePerGas:s.maxFeePerGas,maxPriorityFeePerGas:s.maxPriorityFeePerGas,preVerificationGas:s.preVerificationGas,verificationGasLimit:s.verificationGasLimit,callGasLimit:s.callGasLimit,paymasterAndData:s.paymasterAndData??"0x",validAfter:l,validUntil:p,entryPoint:g.address};var i;"initCode"in s&&(r.paymasterAndData=s.paymasterAndData??"0x"),"factory"in s&&(s.factory&&s.factoryData&&(r.initCode=t.concatHex([s.factory,s.factoryData])),r.paymasterAndData=(i={...s,sender:s.sender??await this.getAddress()}).paymaster?t.concat([i.paymaster,t.pad(t.toHex(i.paymasterVerificationGasLimit||BigInt(0)),{size:16}),t.pad(t.toHex(i.paymasterPostOpGasLimit||BigInt(0)),{size:16}),i.paymasterData||"0x"]):"0x");const o=[{signer:b.address,data:await Sr(n,{account:b,domain:{chainId:a,verifyingContract:G},types:"0.6"===g.version?go:wo,primaryType:"SafeOp",message:r})}];o.sort(((e,t)=>e.signer.toLowerCase().localeCompare(t.signer.toLowerCase())));const c=t.concat(o.map((e=>e.data)));return t.encodePacked(["uint48","uint48","bytes"],[l,p,c])}})}const To=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"enum Operation",name:"",type:"uint8"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Call[]",name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"}],Go=[{inputs:[{internalType:"contract IKernelValidator",name:"_defaultValidator",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"}],Fo=[{type:"function",name:"initialize",inputs:[{name:"_rootValidator",type:"bytes21",internalType:"ValidationId"},{name:"hook",type:"address",internalType:"contract IHook"},{name:"validatorData",type:"bytes",internalType:"bytes"},{name:"hookData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"}],$o=[{type:"function",name:"initialize",inputs:[{name:"_rootValidator",type:"bytes21",internalType:"ValidationId"},{name:"hook",type:"address",internalType:"contract IHook"},{name:"validatorData",type:"bytes",internalType:"bytes"},{name:"hookData",type:"bytes",internalType:"bytes"},{name:"initConfig",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"}],Co=[{type:"function",name:"deployWithFactory",inputs:[{name:"factory",type:"address",internalType:"contract KernelFactory"},{name:"createData",type:"bytes",internalType:"bytes"},{name:"salt",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"payable"}],Mo="0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c",Lo="0x00",ko="0x01";var No;!function(e){e.DEFAULT="0x00",e.ENABLE="0x01"}(No||(No={}));const Uo=e=>/0\.2\.\d+/.test(e),Ro=(e,n,a=0n)=>{if(Uo(e))return a;if(a>t.maxUint16)throw new Error(`nonce key must be equal or less than 2 bytes(maxUint16) for Kernel version ${e}`);const s=No.DEFAULT,r=Lo,i=t.pad(t.concatHex([s,r,n,t.toHex(a,{size:2})]),{size:24});return BigInt(i)},_o=(e,{accountAddress:n,kernelVersion:a,chainId:s})=>{const r=t.domainSeparator({domain:{name:"Kernel",version:a,chainId:s,verifyingContract:n}}),i=Uo(a)?e:t.keccak256(t.encodeAbiParameters([{type:"bytes32"},{type:"bytes32"}],[t.keccak256(t.stringToHex("Kernel(bytes32 hash)")),e]));return t.keccak256(t.concatHex(["0x1901",r,i]))};const zo=[{inputs:[{internalType:"address",name:"_implementation",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"},{internalType:"uint256",name:"_index",type:"uint256"}],name:"createAccount",outputs:[{internalType:"address",name:"proxy",type:"address"}],stateMutability:"payable",type:"function"}],jo={"0.2.1":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0xf048AD83CB2dfd6037A43902a2A5Be04e53cd2Eb",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.2.2":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0x0DA6a956B9488eD4dd761E59f52FDc6c8068E6B5",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.2.3":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0xD3F582F6B4814E989Ee8E96bc3175320B5A540ab",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.2.4":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0xd3082872F8B06073A021b4602e022d5A070d7cfC",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.3.0-beta":{ECDSA_VALIDATOR:"0x8104e3Ad430EA6d354d013A6789fDFc71E671c43",ACCOUNT_LOGIC:"0x94F097E1ebEB4ecA3AAE54cabb08905B239A7D27",FACTORY_ADDRESS:"0x6723b44Abeec4E71eBE3232BD5B455805baDD22f",META_FACTORY_ADDRESS:"0xd703aaE79538628d27099B8c4f621bE4CCd142d5"},"0.3.1":{ECDSA_VALIDATOR:"0x845ADb2C711129d4f3966735eD98a9F09fC4cE57",ACCOUNT_LOGIC:"0xBAC849bB641841b44E965fB01A4Bf5F074f84b4D",FACTORY_ADDRESS:"0xaac5D4240AF87249B3f71BC8E4A2cae074A3E419",META_FACTORY_ADDRESS:"0xd703aaE79538628d27099B8c4f621bE4CCd142d5"}},Vo=e=>t.concatHex([ko,e]),Ho=async({entryPointVersion:e,kernelVersion:n,owner:a,index:s,factoryAddress:r,accountLogicAddress:i,ecdsaValidatorAddress:o})=>{const c=(({entryPoint:{version:e},kernelVersion:n,owner:a,ecdsaValidatorAddress:s})=>"0.6"===e?t.encodeFunctionData({abi:Go,functionName:"initialize",args:[s,a]}):"0.3.0-beta"===n?t.encodeFunctionData({abi:Fo,functionName:"initialize",args:[Vo(s),t.zeroAddress,a,"0x"]}):t.encodeFunctionData({abi:$o,functionName:"initialize",args:[Vo(s),t.zeroAddress,a,"0x",[]]}))({entryPoint:{version:e},kernelVersion:n,ecdsaValidatorAddress:o,owner:a});return"0.6"===e?t.encodeFunctionData({abi:zo,functionName:"createAccount",args:[i,c,s]}):t.encodeFunctionData({abi:Co,functionName:"deployWithFactory",args:[r,c,t.toHex(s,{size:32})]})};async function qo(e){const{client:n,address:a,index:s=0n,owners:r,version:i,ecdsaValidatorAddress:o,factoryAddress:c,metaFactoryAddress:u,accountLogicAddress:d}=e,p=await eo({owner:r[0]}),l={address:e.entryPoint?.address??Ki,abi:"0.6"===(e.entryPoint?.version??"0.7")?yr:fr,version:e.entryPoint?.version??"0.7"},y=((e,t)=>t||("0.6"===e?"0.2.2":"0.3.0-beta"))(l.version,i),{accountLogicAddress:f,ecdsaValidatorAddress:m,factoryAddress:h,metaFactoryAddress:b}=(({ecdsaValidatorAddress:e,accountLogicAddress:n,factoryAddress:a,metaFactoryAddress:s,kernelVersion:r})=>{const i=jo[r];return{ecdsaValidatorAddress:e??i.ECDSA_VALIDATOR,accountLogicAddress:n??i.ACCOUNT_LOGIC,factoryAddress:a??i.FACTORY_ADDRESS,metaFactoryAddress:s??i?.META_FACTORY_ADDRESS??t.zeroAddress}})({ecdsaValidatorAddress:o,accountLogicAddress:d,factoryAddress:c,metaFactoryAddress:u,kernelVersion:y});let g,w=a;const v=async()=>g||(g=n.chain?n.chain.id:await us(n,$i,"getChainId")({}),g),x=async()=>({factory:"0.6"===l.version?h:b,factoryData:await Ho({entryPointVersion:l.version,kernelVersion:y,owner:p.address,index:s,factoryAddress:h,accountLogicAddress:f,ecdsaValidatorAddress:m})});return vr({client:n,entryPoint:l,getFactoryArgs:x,async getAddress(){if(w)return w;const{factory:e,factoryData:t}=await x();return w=await Qi(n,{factory:e,factoryData:t,entryPointAddress:l.address}),w},encodeCalls:async e=>(({kernelVersion:e,calls:n})=>{if(Uo(e)){if(n.length>1)return t.encodeFunctionData({abi:To,functionName:"executeBatch",args:[n.map((e=>({to:e.to,value:e.value??0n,data:e.data??"0x"})))]});const e=0===n.length?void 0:n[0];if(!e)throw new Error("No calls to encode");return t.encodeFunctionData({abi:To,functionName:"execute",args:[e.to,e.value??0n,e.data??"0x",0]})}return co({mode:{type:n.length>1?"batchcall":"call",revertOnError:!1,selector:"0x",context:"0x"},callData:n})})({calls:e,kernelVersion:y}),async getNonce(t){return Xi(n,{address:await this.getAddress(),entryPointAddress:l.address,key:Ro(y,m,e.nonceKey??0n)})},getStubSignature:async()=>Uo(y)?t.concatHex(["0x00000000",Mo]):Mo,async sign({hash:e}){return this.signMessage({message:e})},async signMessage({message:e}){const n=await async function({message:e,owner:n,accountAddress:a,kernelVersion:s,chainId:r}){if("0.2.1"===s||"0.2.2"===s)return n.signMessage({message:e});const i=_o(t.hashMessage(e),{kernelVersion:s,accountAddress:a,chainId:r});return n.signMessage({message:{raw:i}})}({owner:p,message:e,accountAddress:await this.getAddress(),kernelVersion:y,chainId:await v()});return Uo(y)?n:t.concatHex([Vo(m),n])},async signTypedData(e){const n=await async function(e){const{owner:n,accountAddress:a,kernelVersion:s,chainId:r,...i}=e;if("0.2.1"===s||"0.2.2"===s)return n.signTypedData({...i});const{message:o,primaryType:c,types:u,domain:d}=i,p={EIP712Domain:t.getTypesForEIP712Domain({domain:d}),...u};t.validateTypedData({domain:d,message:o,primaryType:c,types:p});const l=t.hashTypedData({message:o,primaryType:c,types:p,domain:d}),y=_o(l,{kernelVersion:s,accountAddress:a,chainId:r});return n.signMessage({message:{raw:y}})}({owner:p,chainId:await v(),...e,accountAddress:await this.getAddress(),kernelVersion:y});return Uo(y)?n:t.concatHex([Vo(m),n])},async signUserOperation(e){const{chainId:n=await v(),...a}=e,s=mr({userOperation:{...a,sender:a.sender??await this.getAddress(),signature:"0x"},entryPointAddress:l.address,entryPointVersion:l.version,chainId:n}),r=await p.signMessage({message:{raw:s}});return Uo(y)?t.concatHex(["0x00000000",r]):r}})}const Wo=[{inputs:[{internalType:"address",name:"moduleSetupContract",type:"address"},{internalType:"bytes",name:"moduleSetupData",type:"bytes"},{internalType:"uint256",name:"index",type:"uint256"}],name:"deployCounterFactualAccount",outputs:[{internalType:"address",name:"proxy",type:"address"}],stateMutability:"nonpayable",type:"function"}],Zo=[{inputs:[{internalType:"address",name:"handler",type:"address"},{internalType:"address",name:"moduleSetupContract",type:"address"},{internalType:"bytes",name:"moduleSetupData",type:"bytes"}],name:"init",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"eoaOwner",type:"address"}],name:"initForSmartAccount",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"dest",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"func",type:"bytes"}],name:"execute_ncC",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"dest",type:"address[]"},{internalType:"uint256[]",name:"value",type:"uint256[]"},{internalType:"bytes[]",name:"func",type:"bytes[]"}],name:"executeBatch_y6U",outputs:[],stateMutability:"nonpayable",type:"function"}],Yo={ECDSA_OWNERSHIP_REGISTRY_MODULE:"0x0000001c5b32F37F5beA87BDD5374eB2aC54eA8e",FACTORY_ADDRESS:"0x000000a56Aaca3e9a4C479ea6b6CD0DbcB6634F5",ACCOUNT_V2_0_LOGIC:"0x0000002512019Dafb59528B82CB92D3c5D2423aC",DEFAULT_FALLBACK_HANDLER_ADDRESS:"0x0bBa6d96BD616BedC6BFaa341742FD43c60b83C1"},Ko=async({owner:e,index:n,ecdsaModuleAddress:a})=>{if(!e)throw new Error("Owner account not found");const s=t.encodeFunctionData({abi:Zo,functionName:"initForSmartAccount",args:[e]});return t.encodeFunctionData({abi:Wo,functionName:"deployCounterFactualAccount",args:[a,s,n]})};async function Xo(e){const{owners:n,client:a,index:s=0n,address:r,accountLogicAddress:i=Yo.ACCOUNT_V2_0_LOGIC,fallbackHandlerAddress:o=Yo.DEFAULT_FALLBACK_HANDLER_ADDRESS,ecdsaModuleAddress:c=Yo.ECDSA_OWNERSHIP_REGISTRY_MODULE,factoryAddress:u=Yo.FACTORY_ADDRESS}=e,d=await eo({owner:n[0]}),p={address:e.entryPoint?.address??Yi,abi:yr,version:e.entryPoint?.version??"0.6"};let l=r;return vr({client:a,entryPoint:p,getFactoryArgs:async()=>({factory:u,factoryData:await Ko({owner:d.address,index:s,ecdsaModuleAddress:c})}),getAddress:async()=>l||(l=await(async({factoryAddress:e,accountLogicAddress:n,fallbackHandlerAddress:a,ecdsaModuleAddress:s,owner:r,index:i=BigInt(0)})=>{const o=t.encodeFunctionData({abi:Zo,functionName:"initForSmartAccount",args:[r]}),c=t.encodeFunctionData({abi:Zo,functionName:"init",args:[a,s,o]}),u=t.encodePacked(["bytes","uint256"],["0x6080346100aa57601f61012038819003918201601f19168301916001600160401b038311848410176100af578084926020946040528339810103126100aa57516001600160a01b0381168082036100aa5715610065573055604051605a90816100c68239f35b60405162461bcd60e51b815260206004820152601e60248201527f496e76616c696420696d706c656d656e746174696f6e206164647265737300006044820152606490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe608060405230546000808092368280378136915af43d82803e156020573d90f35b3d90fdfea2646970667358221220a03b18dce0be0b4c9afe58a9eb85c35205e2cf087da098bbf1d23945bf89496064736f6c63430008110033",t.hexToBigInt(n)]),d=t.keccak256(t.encodePacked(["bytes32","uint256"],[t.keccak256(t.encodePacked(["bytes"],[c])),i]));return t.getContractAddress({from:e,salt:d,bytecode:u,opcode:"CREATE2"})})({owner:d.address,ecdsaModuleAddress:c,factoryAddress:u,accountLogicAddress:i,fallbackHandlerAddress:o,index:s}),l),async getNonce(t){const n=await this.getAddress();return Xi(a,{address:n,entryPointAddress:p.address,key:e?.nonceKey??t?.key})},encodeCalls:async e=>{if(e.length>1)return t.encodeFunctionData({abi:Zo,functionName:"executeBatch_y6U",args:[e.map((e=>e.to)),e.map((e=>e.value??0n)),e.map((e=>e.data??"0x"))]});const n=0===e.length?void 0:e[0];if(!n)throw new Error("No calls to encode");return t.encodeFunctionData({abi:Zo,functionName:"execute_ncC",args:[n.to,n.value??0n,n.data??"0x"]})},getStubSignature:async()=>`0x0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000${c.substring(2).padEnd(40,"0")}000000000000000000000000000000000000000000000000000000000000004181d4b4981670cb18f99f0b4a66446df1bf5b204d24cfcb659bf38ba27a4359b5711649ec2423c5e1247245eba2964679b6a1dbb85c992ae40b9b00c6935b02ff1b00000000000000000000000000000000000000000000000000000000000000`,async sign({hash:e}){return this.signMessage({message:e})},async signMessage({message:e}){let n=await d.signMessage({message:e});const a=Number.parseInt(n.slice(-2),16);if(![27,28].includes(a)){const e=a+27;n=n.slice(0,-2)+e.toString(16)}return t.encodeAbiParameters([{type:"bytes"},{type:"address"}],[n,c])},async signTypedData(e){let n=await d.signTypedData(e);const a=Number.parseInt(n.slice(-2),16);if(![27,28].includes(a)){const e=a+27;n=n.slice(0,-2)+e.toString(16)}return t.encodeAbiParameters([{type:"bytes"},{type:"address"}],[n,c])},async signUserOperation(e){const{chainId:n=a.chain?.id,...s}=e;if(!n)throw new Error("Chain id not found");const r=mr({userOperation:{...s,sender:s.sender??await this.getAddress(),signature:"0x"},entryPointAddress:p.address,entryPointVersion:p.version,chainId:n}),i=await Br(a,{account:d,message:{raw:r}});return t.encodeAbiParameters(t.parseAbiParameters("bytes, address"),[i,c])}})}function Jo(e){if("function"!=typeof e)return null==e||"string"==typeof e||"boolean"==typeof e?e:"bigint"==typeof e?t.toHex(e):null!=e._isBigNumber||"object"!=typeof e?t.toHex(e).replace(/^0x0/,"0x"):Array.isArray(e)?e.map((e=>Jo(e))):Object.keys(e).reduce(((t,n)=>(t[n]=Jo(e[n]),t)),{})}const Qo=({entryPoint:e})=>n=>({getUserOperationGasPrice:async()=>(async e=>{const t=await e.request({method:"pimlico_getUserOperationGasPrice",params:[]});return{slow:{maxFeePerGas:BigInt(t.slow.maxFeePerGas),maxPriorityFeePerGas:BigInt(t.slow.maxPriorityFeePerGas)},standard:{maxFeePerGas:BigInt(t.standard.maxFeePerGas),maxPriorityFeePerGas:BigInt(t.standard.maxPriorityFeePerGas)},fast:{maxFeePerGas:BigInt(t.fast.maxFeePerGas),maxPriorityFeePerGas:BigInt(t.fast.maxPriorityFeePerGas)}}})(n),getUserOperationStatus:async e=>(async(e,{hash:t})=>e.request({method:"pimlico_getUserOperationStatus",params:[t]}))(n,e),sendCompressedUserOperation:async t=>(async(e,t)=>{const{compressedUserOperation:n,inflatorAddress:a,entryPointAddress:s}=t;return e.request({method:"pimlico_sendCompressedUserOperation",params:[n,a,s]})})(n,{...t,entryPointAddress:e.address}),sponsorUserOperation:async t=>(async(e,t)=>{const n=await e.request({method:"pm_sponsorUserOperation",params:t.sponsorshipPolicyId?[Jo(t.userOperation),t.entryPoint.address,{sponsorshipPolicyId:t.sponsorshipPolicyId}]:[Jo(t.userOperation),t.entryPoint.address]});if("0.6"===t.entryPoint.version){const e=n;return{paymasterAndData:e.paymasterAndData,preVerificationGas:BigInt(e.preVerificationGas),verificationGasLimit:BigInt(e.verificationGasLimit),callGasLimit:BigInt(e.callGasLimit)}}const a=n;return{callGasLimit:BigInt(a.callGasLimit),verificationGasLimit:BigInt(a.verificationGasLimit),preVerificationGas:BigInt(a.preVerificationGas),paymaster:a.paymaster,paymasterVerificationGasLimit:BigInt(a.paymasterVerificationGasLimit),paymasterPostOpGasLimit:BigInt(a.paymasterPostOpGasLimit),paymasterData:a.paymasterData}})(n,{...t,entryPoint:e}),validateSponsorshipPolicies:async t=>(async(e,t)=>await e.request({method:"pm_validateSponsorshipPolicies",params:[Jo(t.userOperation),t.entryPointAddress,t.sponsorshipPolicyIds]}))(n,{...t,entryPointAddress:e.address}),getTokenQuotes:async a=>(async(e,n)=>{const a=n.chain?.id??e.chain?.id;if(!a)throw new t.ChainNotFoundError;return(await e.request({method:"pimlico_getTokenQuotes",params:[{tokens:n.tokens},n.entryPointAddress,t.numberToHex(a)]})).quotes.map((e=>({...e,balanceSlot:e.balanceSlot?t.hexToBigInt(e.balanceSlot):void 0,allowanceSlot:e.allowanceSlot?t.hexToBigInt(e.allowanceSlot):void 0,postOpGas:t.hexToBigInt(e.postOpGas),exchangeRate:t.hexToBigInt(e.exchangeRate),exchangeRateNativeToUsd:t.hexToBigInt(e.exchangeRateNativeToUsd)})))})(n,{...a,chain:a.chain,entryPointAddress:e.address})});function ec(e){const{key:n="public",name:a="Pimlico Bundler Client",entryPoint:s}=e;return t.createClient({...e,key:n,name:a,type:"pimlicoClient"}).extend(Wi).extend(Zi).extend(Qo({entryPoint:{address:s?.address??Ki,version:s?.version??"0.7"}}))}const tc={address:Yi,version:"0.6"},nc={address:Ki,version:"0.7"},ac=({owner:e,smartWalletType:t,publicClient:a})=>{switch(t){case n.SAFE:return So({client:a,entryPoint:nc,owners:[e],version:"1.4.1"});case n.KERNEL:return qo({client:a,version:"0.3.1",entryPoint:nc,owners:[e]});case n.BICONOMY:return Xo({client:a,owners:[e],entryPoint:tc});case n.LIGHT_ACCOUNT:return ro({client:a,entryPoint:tc,owner:e,version:"1.1.0"});case n.COINBASE_SMART_WALLET:return async function({client:e,owner:t}){const[n]=await t.request({method:"eth_accounts"});if(!n)throw new Error("Unable to request embedded owner for eth_accounts");const a={type:"local",source:"privy",address:n,sign:async({hash:e})=>await t.request({method:"secp256k1_sign",params:[e]})};return await xr({client:e,owners:[a]})}({client:a,owner:e});default:throw new Error(`Invalid smart account type: ${t}.`)}},sc=["rpc.zerodev.app","public.pimlico.io","api.pimlico.io"];exports.BaseError=lt,exports.HttpRequestError=class extends lt{constructor({body:e,cause:t,details:n,headers:a,status:s,url:r}){super("HTTP request failed.",{cause:t,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${r}`,e&&`Request body: ${Ra(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=a,this.status=s,this.url=r}},exports.InvalidAddressError=Ft,exports.call=Rs,exports.concat=Pn,exports.decodeErrorResult=Ua,exports.encodeAbiParameters=In,exports.getUrl=Ja,exports.isAddress=un,exports.isHex=ot,exports.signerToSmartAccountClient=async({owner:n,smartWalletType:a,chain:s,publicClient:r,bundlerUrl:i,paymasterUrl:o,paymasterContext:c})=>{const u=await ac({owner:n,smartWalletType:a,publicClient:r}),d=ec({transport:t.http(i),entryPoint:u.entryPoint}),p=!!o?ec({transport:t.http(o),entryPoint:u.entryPoint}):void 0;return e.createSmartAccountClient({account:u,chain:s,paymaster:p,paymasterContext:c,bundlerTransport:t.http(i),userOperation:{estimateFeesPerGas:async()=>{if(sc.some((e=>i.includes(e))))return await d.getUserOperationGasPrice().then((e=>e.fast));{const e=await r.estimateFeesPerGas(),t=i.includes("api.developer.coinbase.com")?175n:150n;return{...e,maxFeePerGas:e.maxFeePerGas*t/100n,maxPriorityFeePerGas:e.maxPriorityFeePerGas*t/100n}}}}})},exports.stringify=Ra;
