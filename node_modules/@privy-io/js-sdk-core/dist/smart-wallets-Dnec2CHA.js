import{createSmartAccountClient as e}from"permissionless";import{concat as t,encodeDeployData as n,getAddress as a,createWalletClient as s,custom as r,encodeFunctionData as i,hashMessage as o,hashTypedData as c,encodePacked as u,toHex as d,toBytes as p,encodeAbiParameters as l,concatHex as y,pad as f,hexToBigInt as m,keccak256 as h,getContractAddress as b,zeroAddress as g,maxUint16 as w,domainSeparator as v,stringToHex as x,getTypesForEIP712Domain as A,validateTypedData as P,parseAbiParameters as E,ChainNotFoundError as I,numberToHex as O,createClient as B,http as D}from"viem";import{COINBASE_SMART_WALLET as S,LIGHT_ACCOUNT as T,BICONOMY as G,KERNEL as $,SAFE as F}from"@privy-io/public-api";function M(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function C(e,...t){if(!((n=e)instanceof Uint8Array||null!=n&&"object"==typeof n&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function L(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function k(e,t){C(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const N=BigInt(2**32-1),U=BigInt(32);function R(e,t=!1){return t?{h:Number(e&N),l:Number(e>>U&N)}:{h:0|Number(e>>U&N),l:0|Number(e&N)}}function _(e,t=!1){let n=new Uint32Array(e.length),a=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:r,l:i}=R(e[s],t);[n[s],a[s]]=[r,i]}return[n,a]}const z="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,j=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),V=(e,t)=>e<<32-t|e>>>t,H=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function q(e){for(let n=0;n<e.length;n++)e[n]=(t=e[n])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}const W=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Z(e){C(e);let t="";for(let n=0;n<e.length;n++)t+=W[e[n]];return t}const Y={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function K(e){return e>=Y._0&&e<=Y._9?e-Y._0:e>=Y._A&&e<=Y._F?e-(Y._A-10):e>=Y._a&&e<=Y._f?e-(Y._a-10):void 0}function X(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),C(e),e}class J{clone(){return this._cloneInto()}}function Q(e){const t=t=>e().update(X(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function ee(e=32){if(z&&"function"==typeof z.getRandomValues)return z.getRandomValues(new Uint8Array(e));if(z&&"function"==typeof z.randomBytes)return z.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const te=[],ne=[],ae=[],se=BigInt(0),re=BigInt(1),ie=BigInt(2),oe=BigInt(7),ce=BigInt(256),ue=BigInt(113);for(let e=0,t=re,n=1,a=0;e<24;e++){[n,a]=[a,(2*n+3*a)%5],te.push(2*(5*a+n)),ne.push((e+1)*(e+2)/2%64);let s=se;for(let e=0;e<7;e++)t=(t<<re^(t>>oe)*ue)%ce,t&ie&&(s^=re<<(re<<BigInt(e))-re);ae.push(s)}const[de,pe]=_(ae,!0),le=(e,t,n)=>n>32?((e,t,n)=>t<<n-32|e>>>64-n)(e,t,n):((e,t,n)=>e<<n|t>>>32-n)(e,t,n),ye=(e,t,n)=>n>32?((e,t,n)=>e<<n-32|t>>>64-n)(e,t,n):((e,t,n)=>t<<n|e>>>32-n)(e,t,n);class fe extends J{constructor(e,t,n,a=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=a,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,M(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var r;this.state=new Uint8Array(200),this.state32=(r=this.state,new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)))}keccak(){H||q(this.state32),function(e,t=24){const n=new Uint32Array(10);for(let a=24-t;a<24;a++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const a=(t+8)%10,s=(t+2)%10,r=n[s],i=n[s+1],o=le(r,i,1)^n[a],c=ye(r,i,1)^n[a+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const a=ne[n],r=le(t,s,a),i=ye(t,s,a),o=te[n];t=e[o],s=e[o+1],e[o]=r,e[o+1]=i}for(let t=0;t<50;t+=10){for(let a=0;a<10;a++)n[a]=e[t+a];for(let a=0;a<10;a++)e[t+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=de[a],e[1]^=pe[a]}n.fill(0)}(this.state32,this.rounds),H||q(this.state32),this.posOut=0,this.pos=0}update(e){L(this);const{blockLen:t,state:n}=this,a=(e=X(e)).length;for(let s=0;s<a;){const r=Math.min(t-this.pos,a-s);for(let t=0;t<r;t++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:a}=this;e[n]^=t,0!=(128&t)&&n===a-1&&this.keccak(),e[a-1]^=128,this.keccak()}writeInto(e){L(this,!1),C(e),this.finish();const t=this.state,{blockLen:n}=this;for(let a=0,s=e.length;a<s;){this.posOut>=n&&this.keccak();const r=Math.min(n-this.posOut,s-a);e.set(t.subarray(this.posOut,this.posOut+r),a),this.posOut+=r,a+=r}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return M(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(k(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:a,rounds:s,enableXOF:r}=this;return e||(e=new fe(t,n,a,r,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=a,e.enableXOF=r,e.destroyed=this.destroyed,e}}const me=((e,t,n)=>Q((()=>new fe(t,e,n))))(1,136,32),he=BigInt(0),be=BigInt(1),ge=BigInt(2);function we(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function ve(e){if(!we(e))throw new Error("Uint8Array expected")}function xe(e,t){if("boolean"!=typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)}const Ae=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Pe(e){ve(e);let t="";for(let n=0;n<e.length;n++)t+=Ae[e[n]];return t}function Ee(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Ie(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const Oe={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Be(e){return e>=Oe._0&&e<=Oe._9?e-Oe._0:e>=Oe._A&&e<=Oe._F?e-(Oe._A-10):e>=Oe._a&&e<=Oe._f?e-(Oe._a-10):void 0}function De(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const a=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=Be(e.charCodeAt(s)),r=Be(e.charCodeAt(s+1));if(void 0===n||void 0===r){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}a[t]=16*n+r}return a}function Se(e){return Ie(Pe(e))}function Te(e){return ve(e),Ie(Pe(Uint8Array.from(e).reverse()))}function Ge(e,t){return De(e.toString(16).padStart(2*t,"0"))}function $e(e,t){return Ge(e,t).reverse()}function Fe(e,t,n){let a;if("string"==typeof t)try{a=De(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!we(t))throw new Error(`${e} must be hex string or Uint8Array`);a=Uint8Array.from(t)}const s=a.length;if("number"==typeof n&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return a}function Me(...e){let t=0;for(let n=0;n<e.length;n++){const a=e[n];ve(a),t+=a.length}const n=new Uint8Array(t);for(let t=0,a=0;t<e.length;t++){const s=e[t];n.set(s,a),a+=s.length}return n}const Ce=e=>"bigint"==typeof e&&he<=e;function Le(e,t,n){return Ce(e)&&Ce(t)&&Ce(n)&&t<=e&&e<n}function ke(e,t,n,a){if(!Le(t,n,a))throw new Error(`expected valid ${e}: ${n} <= n < ${a}, got ${typeof t} ${t}`)}function Ne(e){let t;for(t=0;e>he;e>>=be,t+=1);return t}const Ue=e=>(ge<<BigInt(e-1))-be,Re=e=>new Uint8Array(e),_e=e=>Uint8Array.from(e);function ze(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let a=Re(e),s=Re(e),r=0;const i=()=>{a.fill(1),s.fill(0),r=0},o=(...e)=>n(s,a,...e),c=(e=Re())=>{s=o(_e([0]),e),a=o(),0!==e.length&&(s=o(_e([1]),e),a=o())},u=()=>{if(r++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){a=o();const t=a.slice();n.push(t),e+=a.length}return Me(...n)};return(e,t)=>{let n;for(i(),c(e);!(n=t(u()));)c();return i(),n}}const je={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||we(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Ve(e,t,n={}){const a=(t,n,a)=>{const s=je[n];if("function"!=typeof s)throw new Error(`Invalid validator "${n}", expected function`);const r=e[t];if(!(a&&void 0===r||s(r,e)))throw new Error(`Invalid param ${String(t)}=${r} (${typeof r}), expected ${n}`)};for(const[e,n]of Object.entries(t))a(e,n,!1);for(const[e,t]of Object.entries(n))a(e,t,!0);return e}function He(e){const t=new WeakMap;return(n,...a)=>{const s=t.get(n);if(void 0!==s)return s;const r=e(n,...a);return t.set(n,r),r}}var qe=Object.freeze({__proto__:null,aInRange:ke,abool:xe,abytes:ve,bitGet:function(e,t){return e>>BigInt(t)&be},bitLen:Ne,bitMask:Ue,bitSet:function(e,t,n){return e|(n?be:he)<<BigInt(t)},bytesToHex:Pe,bytesToNumberBE:Se,bytesToNumberLE:Te,concatBytes:Me,createHmacDrbg:ze,ensureBytes:Fe,equalBytes:function(e,t){if(e.length!==t.length)return!1;let n=0;for(let a=0;a<e.length;a++)n|=e[a]^t[a];return 0===n},hexToBytes:De,hexToNumber:Ie,inRange:Le,isBytes:we,memoized:He,notImplemented:()=>{throw new Error("not implemented")},numberToBytesBE:Ge,numberToBytesLE:$e,numberToHexUnpadded:Ee,numberToVarBytesBE:function(e){return De(Ee(e))},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},validateObject:Ve});function We(e){return`0x${Z(e)}`}function Ze(e){return function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const a=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=K(e.charCodeAt(s)),r=K(e.charCodeAt(s+1));if(void 0===n||void 0===r){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}a[t]=16*n+r}return a}(e.slice(2))}const Ye=(e,t,n)=>e&t^e&n^t&n;class Ke extends J{constructor(e,t,n,a){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=j(this.buffer)}update(e){L(this);const{view:t,buffer:n,blockLen:a}=this,s=(e=X(e)).length;for(let r=0;r<s;){const i=Math.min(a-this.pos,s-r);if(i!==a)n.set(e.subarray(r,r+i),this.pos),this.pos+=i,r+=i,this.pos===a&&(this.process(t,0),this.pos=0);else{const t=j(e);for(;a<=s-r;r+=a)this.process(t,r)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){L(this),k(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:a,isLE:s}=this;let{pos:r}=this;t[r++]=128,this.buffer.subarray(r).fill(0),this.padOffset>a-r&&(this.process(n,0),r=0);for(let e=r;e<a;e++)t[e]=0;!function(e,t,n,a){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,a);const s=BigInt(32),r=BigInt(4294967295),i=Number(n>>s&r),o=Number(n&r),c=a?4:0,u=a?0:4;e.setUint32(t+c,i,a),e.setUint32(t+u,o,a)}(n,a-8,BigInt(8*this.length),s),this.process(n,0);const i=j(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)i.setUint32(4*e,u[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:a,finished:s,destroyed:r,pos:i}=this;return e.length=a,e.pos=i,e.finished=s,e.destroyed=r,a%t&&e.buffer.set(n),e}}const Xe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Je=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qe=new Uint32Array(64);class et extends Ke{constructor(){super(64,32,8,!1),this.A=0|Je[0],this.B=0|Je[1],this.C=0|Je[2],this.D=0|Je[3],this.E=0|Je[4],this.F=0|Je[5],this.G=0|Je[6],this.H=0|Je[7]}get(){const{A:e,B:t,C:n,D:a,E:s,F:r,G:i,H:o}=this;return[e,t,n,a,s,r,i,o]}set(e,t,n,a,s,r,i,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|a,this.E=0|s,this.F=0|r,this.G=0|i,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)Qe[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Qe[e-15],n=Qe[e-2],a=V(t,7)^V(t,18)^t>>>3,s=V(n,17)^V(n,19)^n>>>10;Qe[e]=s+Qe[e-7]+a+Qe[e-16]|0}let{A:n,B:a,C:s,D:r,E:i,F:o,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(V(i,6)^V(i,11)^V(i,25))+((d=i)&o^~d&c)+Xe[e]+Qe[e]|0,p=(V(n,2)^V(n,13)^V(n,22))+Ye(n,a,s)|0;u=c,c=o,o=i,i=r+t|0,r=s,s=a,a=n,n=t+p|0}var d;n=n+this.A|0,a=a+this.B|0,s=s+this.C|0,r=r+this.D|0,i=i+this.E|0,o=o+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,a,s,r,i,o,c,u)}roundClean(){Qe.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const tt=Q((()=>new et));class nt extends J{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");M(e.outputLen),M(e.blockLen)}(e);const n=X(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,s=new Uint8Array(a);s.set(n.length>a?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return L(this),this.iHash.update(e),this}digestInto(e){L(this),C(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:a,destroyed:s,blockLen:r,outputLen:i}=this;return e.finished=a,e.destroyed=s,e.blockLen=r,e.outputLen=i,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const at=(e,t,n)=>new nt(e,t).update(n).digest();at.create=(e,t)=>new nt(e,t)
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */;const st=BigInt(0),rt=BigInt(1),it=BigInt(2),ot=BigInt(3),ct=BigInt(4),ut=BigInt(5),dt=BigInt(8);function pt(e,t){const n=e%t;return n>=st?n:t+n}function lt(e,t,n){if(n<=st||t<st)throw new Error("Expected power/modulo > 0");if(n===rt)return st;let a=rt;for(;t>st;)t&rt&&(a=a*e%n),e=e*e%n,t>>=rt;return a}function yt(e,t,n){let a=e;for(;t-- >st;)a*=a,a%=n;return a}function ft(e,t){if(e===st||t<=st)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=pt(e,t),a=t,s=st,r=rt;for(;n!==st;){const e=a%n,t=s-r*(a/n);a=n,n=e,s=r,r=t}if(a!==rt)throw new Error("invert: does not exist");return pt(s,t)}function mt(e){if(e%ct===ot){const t=(e+rt)/ct;return function(e,n){const a=e.pow(n,t);if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}if(e%dt===ut){const t=(e-ut)/dt;return function(e,n){const a=e.mul(n,it),s=e.pow(a,t),r=e.mul(n,s),i=e.mul(e.mul(r,it),s),o=e.mul(r,e.sub(i,e.ONE));if(!e.eql(e.sqr(o),n))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-rt)/it;let n,a,s;for(n=e-rt,a=0;n%it===st;n/=it,a++);for(s=it;s<e&&lt(s,t,e)!==e-rt;s++);if(1===a){const t=(e+rt)/ct;return function(e,n){const a=e.pow(n,t);if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}const r=(n+rt)/it;return function(e,i){if(e.pow(i,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=a,c=e.pow(e.mul(e.ONE,s),n),u=e.pow(i,r),d=e.pow(i,n);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(d);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,rt<<BigInt(o-t-1));c=e.sqr(n),u=e.mul(u,n),d=e.mul(d,c),o=t}return u}}(e)}BigInt(9),BigInt(16);const ht=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function bt(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function gt(e,t,n=!1,a={}){if(e<=st)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:r}=bt(e,t);if(r>2048)throw new Error("Field lengths over 2048 bytes are not supported");const i=mt(e),o=Object.freeze({ORDER:e,BITS:s,BYTES:r,MASK:Ue(s),ZERO:st,ONE:rt,create:t=>pt(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return st<=t&&t<e},is0:e=>e===st,isOdd:e=>(e&rt)===rt,neg:t=>pt(-t,e),eql:(e,t)=>e===t,sqr:t=>pt(t*t,e),add:(t,n)=>pt(t+n,e),sub:(t,n)=>pt(t-n,e),mul:(t,n)=>pt(t*n,e),pow:(e,t)=>function(e,t,n){if(n<st)throw new Error("Expected power > 0");if(n===st)return e.ONE;if(n===rt)return t;let a=e.ONE,s=t;for(;n>st;)n&rt&&(a=e.mul(a,s)),s=e.sqr(s),n>>=rt;return a}(o,e,t),div:(t,n)=>pt(t*ft(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ft(t,e),sqrt:a.sqrt||(e=>i(o,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),a=t.reduce(((t,a,s)=>e.is0(a)?t:(n[s]=t,e.mul(t,a))),e.ONE),s=e.inv(a);return t.reduceRight(((t,a,s)=>e.is0(a)?t:(n[s]=e.mul(t,n[s]),e.mul(t,a))),s),n}(o,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?$e(e,r):Ge(e,r),fromBytes:e=>{if(e.length!==r)throw new Error(`Fp.fromBytes: expected ${r}, got ${e.length}`);return n?Te(e):Se(e)}});return Object.freeze(o)}function wt(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function vt(e){const t=wt(e);return t+Math.ceil(t/2)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const xt=BigInt(0),At=BigInt(1),Pt=new WeakMap,Et=new WeakMap;function It(e){return Ve(e.Fp,ht.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),Ve(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...bt(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ot(e){void 0!==e.lowS&&xe("lowS",e.lowS),void 0!==e.prehash&&xe("prehash",e.prehash)}const{bytesToNumberBE:Bt,hexToBytes:Dt}=qe,St={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{const{Err:n}=St;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const a=t.length/2,s=Ee(a);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const r=a>127?Ee(s.length/2|128):"";return`${Ee(e)}${r}${s}${t}`},decode(e,t){const{Err:n}=St;let a=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[a++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[a++];let r=0;if(!!(128&s)){const e=127&s;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const i=t.subarray(a,a+e);if(i.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===i[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of i)r=r<<8|e;if(a+=e,r<128)throw new n("tlv.decode(long): not minimal encoding")}else r=s;const i=t.subarray(a,a+r);if(i.length!==r)throw new n("tlv.decode: wrong value length");return{v:i,l:t.subarray(a+r)}}},_int:{encode(e){const{Err:t}=St;if(e<Tt)throw new t("integer: negative integers are not allowed");let n=Ee(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected assertion");return n},decode(e){const{Err:t}=St;if(128&e[0])throw new t("Invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("Invalid signature integer: unnecessary leading zero");return Bt(e)}},toSig(e){const{Err:t,_int:n,_tlv:a}=St,s="string"==typeof e?Dt(e):e;ve(s);const{v:r,l:i}=a.decode(48,s);if(i.length)throw new t("Invalid signature: left bytes after parsing");const{v:o,l:c}=a.decode(2,r),{v:u,l:d}=a.decode(2,c);if(d.length)throw new t("Invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=St,a=`${t.encode(2,n.encode(e.r))}${t.encode(2,n.encode(e.s))}`;return t.encode(48,a)}},Tt=BigInt(0),Gt=BigInt(1);BigInt(2);const $t=BigInt(3);function Ft(e){const t=function(e){const t=It(e);Ve(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:a,a:s}=t;if(n){if(!a.eql(s,a.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,a=gt(t.n,t.nBitLength),s=t.toBytes||((e,t,a)=>{const s=t.toAffine();return Me(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),r=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function i(e){const{a:a,b:s}=t,r=n.sqr(e),i=n.mul(r,e);return n.add(n.add(i,n.mul(e,a)),s)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){const{allowedPrivateKeyLengths:n,nByteLength:a,wrapPrivateKey:s,n:r}=t;if(n&&"bigint"!=typeof e){if(we(e)&&(e=Pe(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*a,"0")}let i;try{i="bigint"==typeof e?e:Se(Fe("private key",e,a))}catch(t){throw new Error(`private key must be ${a} bytes, hex or bigint, not ${typeof e}`)}return s&&(i=pt(i,r)),ke("private key",i,Gt,r),i}function c(e){if(!(e instanceof p))throw new Error("ProjectivePoint expected")}const u=He(((e,t)=>{const{px:a,py:s,pz:r}=e;if(n.eql(r,n.ONE))return{x:a,y:s};const i=e.is0();null==t&&(t=i?n.ONE:n.inv(r));const o=n.mul(a,t),c=n.mul(s,t),u=n.mul(r,t);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:o,y:c}})),d=He((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:a,y:s}=e.toAffine();if(!n.isValid(a)||!n.isValid(s))throw new Error("bad point: x or y not FE");const r=n.sqr(s),o=i(a);if(!n.eql(r,o))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class p{constructor(e,t,a){if(this.px=e,this.py=t,this.pz=a,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==a||!n.isValid(a))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:a}=e||{};if(!e||!n.isValid(t)||!n.isValid(a))throw new Error("invalid affine point");if(e instanceof p)throw new Error("projective point not allowed");const s=e=>n.eql(e,n.ZERO);return s(t)&&s(a)?p.ZERO:new p(t,a,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(p.fromAffine)}static fromHex(e){const t=p.fromAffine(r(Fe("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return p.BASE.multiply(o(e))}static msm(e,t){return function(e,t,n,a){if(!Array.isArray(n)||!Array.isArray(a)||a.length!==n.length)throw new Error("arrays of points and scalars must have equal length");a.forEach(((e,n)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${n}`)})),n.forEach(((t,n)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${n}`)}));const s=Ne(BigInt(n.length)),r=s>12?s-3:s>4?s-2:s?2:1,i=(1<<r)-1,o=new Array(i+1).fill(e.ZERO),c=Math.floor((t.BITS-1)/r)*r;let u=e.ZERO;for(let t=c;t>=0;t-=r){o.fill(e.ZERO);for(let e=0;e<a.length;e++){const s=a[e],r=Number(s>>BigInt(t)&BigInt(i));o[r]=o[r].add(n[e])}let s=e.ZERO;for(let t=o.length-1,n=e.ZERO;t>0;t--)n=n.add(o[t]),s=s.add(n);if(u=u.add(s),0!==t)for(let e=0;e<r;e++)u=u.double()}return u}(p,a,e,t)}_setWindowSize(e){y.setWindowSize(this,e)}assertValidity(){d(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:a,pz:s}=this,{px:r,py:i,pz:o}=e,u=n.eql(n.mul(t,o),n.mul(r,s)),d=n.eql(n.mul(a,o),n.mul(i,s));return u&&d}negate(){return new p(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:a}=t,s=n.mul(a,$t),{px:r,py:i,pz:o}=this;let c=n.ZERO,u=n.ZERO,d=n.ZERO,l=n.mul(r,r),y=n.mul(i,i),f=n.mul(o,o),m=n.mul(r,i);return m=n.add(m,m),d=n.mul(r,o),d=n.add(d,d),c=n.mul(e,d),u=n.mul(s,f),u=n.add(c,u),c=n.sub(y,u),u=n.add(y,u),u=n.mul(c,u),c=n.mul(m,c),d=n.mul(s,d),f=n.mul(e,f),m=n.sub(l,f),m=n.mul(e,m),m=n.add(m,d),d=n.add(l,l),l=n.add(d,l),l=n.add(l,f),l=n.mul(l,m),u=n.add(u,l),f=n.mul(i,o),f=n.add(f,f),l=n.mul(f,m),c=n.sub(c,l),d=n.mul(f,y),d=n.add(d,d),d=n.add(d,d),new p(c,u,d)}add(e){c(e);const{px:a,py:s,pz:r}=this,{px:i,py:o,pz:u}=e;let d=n.ZERO,l=n.ZERO,y=n.ZERO;const f=t.a,m=n.mul(t.b,$t);let h=n.mul(a,i),b=n.mul(s,o),g=n.mul(r,u),w=n.add(a,s),v=n.add(i,o);w=n.mul(w,v),v=n.add(h,b),w=n.sub(w,v),v=n.add(a,r);let x=n.add(i,u);return v=n.mul(v,x),x=n.add(h,g),v=n.sub(v,x),x=n.add(s,r),d=n.add(o,u),x=n.mul(x,d),d=n.add(b,g),x=n.sub(x,d),y=n.mul(f,v),d=n.mul(m,g),y=n.add(d,y),d=n.sub(b,y),y=n.add(b,y),l=n.mul(d,y),b=n.add(h,h),b=n.add(b,h),g=n.mul(f,g),v=n.mul(m,v),b=n.add(b,g),g=n.sub(h,g),g=n.mul(f,g),v=n.add(v,g),h=n.mul(b,v),l=n.add(l,h),h=n.mul(x,v),d=n.mul(w,d),d=n.sub(d,h),h=n.mul(w,b),y=n.mul(x,y),y=n.add(y,h),new p(d,l,y)}subtract(e){return this.add(e.negate())}is0(){return this.equals(p.ZERO)}wNAF(e){return y.wNAFCached(this,e,p.normalizeZ)}multiplyUnsafe(e){ke("scalar",e,Tt,t.n);const a=p.ZERO;if(e===Tt)return a;if(e===Gt)return this;const{endo:s}=t;if(!s)return y.unsafeLadder(this,e);let{k1neg:r,k1:i,k2neg:o,k2:c}=s.splitScalar(e),u=a,d=a,l=this;for(;i>Tt||c>Tt;)i&Gt&&(u=u.add(l)),c&Gt&&(d=d.add(l)),l=l.double(),i>>=Gt,c>>=Gt;return r&&(u=u.negate()),o&&(d=d.negate()),d=new p(n.mul(d.px,s.beta),d.py,d.pz),u.add(d)}multiply(e){const{endo:a,n:s}=t;let r,i;if(ke("scalar",e,Gt,s),a){const{k1neg:t,k1:s,k2neg:o,k2:c}=a.splitScalar(e);let{p:u,f:d}=this.wNAF(s),{p:l,f:f}=this.wNAF(c);u=y.constTimeNegate(t,u),l=y.constTimeNegate(o,l),l=new p(n.mul(l.px,a.beta),l.py,l.pz),r=u.add(l),i=d.add(f)}else{const{p:t,f:n}=this.wNAF(e);r=t,i=n}return p.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const a=p.BASE,s=(e,t)=>t!==Tt&&t!==Gt&&e.equals(a)?e.multiply(t):e.multiplyUnsafe(t),r=s(this,t).add(s(e,n));return r.is0()?void 0:r}toAffine(e){return u(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Gt)return!0;if(n)return n(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Gt?this:n?n(p,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return xe("isCompressed",e),this.assertValidity(),s(p,this,e)}toHex(e=!0){return xe("isCompressed",e),Pe(this.toRawBytes(e))}}p.BASE=new p(t.Gx,t.Gy,n.ONE),p.ZERO=new p(n.ZERO,n.ONE,n.ZERO);const l=t.nBitLength,y=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},a=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},s=e=>(a(e),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let a=e.ZERO,s=t;for(;n>xt;)n&At&&(a=a.add(s)),s=s.double(),n>>=At;return a},precomputeWindow(e,t){const{windows:n,windowSize:a}=s(t),r=[];let i=e,o=i;for(let e=0;e<n;e++){o=i,r.push(o);for(let e=1;e<a;e++)o=o.add(i),r.push(o);i=o.double()}return r},wNAF(t,a,r){const{windows:i,windowSize:o}=s(t);let c=e.ZERO,u=e.BASE;const d=BigInt(2**t-1),p=2**t,l=BigInt(t);for(let e=0;e<i;e++){const t=e*o;let s=Number(r&d);r>>=l,s>o&&(s-=p,r+=At);const i=t,y=t+Math.abs(s)-1,f=e%2!=0,m=s<0;0===s?u=u.add(n(f,a[i])):c=c.add(n(m,a[y]))}return{p:c,f:u}},wNAFCached(e,t,n){const a=Et.get(e)||1;let s=Pt.get(e);return s||(s=this.precomputeWindow(e,a),1!==a&&Pt.set(e,n(s))),this.wNAF(a,s,t)},setWindowSize(e,t){a(t),Et.set(e,t),Pt.delete(e)}}}(p,t.endo?Math.ceil(l/2):l);return{CURVE:t,ProjectivePoint:p,normPrivateKeyToScalar:o,weierstrassEquation:i,isWithinCurveOrder:function(e){return Le(e,Gt,t.n)}}}function Mt(e){const t=function(e){const t=It(e);return Ve(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:a}=t,s=n.BYTES+1,r=2*n.BYTES+1;function i(e){return pt(e,a)}function o(e){return ft(e,a)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:p}=Ft({...t,toBytes(e,t,a){const s=t.toAffine(),r=n.toBytes(s.x),i=Me;return xe("isCompressed",a),a?i(Uint8Array.from([t.hasEvenY()?2:3]),r):i(Uint8Array.from([4]),r,n.toBytes(s.y))},fromBytes(e){const t=e.length,a=e[0],i=e.subarray(1);if(t!==s||2!==a&&3!==a){if(t===r&&4===a){return{x:n.fromBytes(i.subarray(0,n.BYTES)),y:n.fromBytes(i.subarray(n.BYTES,2*n.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${s} compressed bytes or ${r} uncompressed bytes`)}{const e=Se(i);if(!Le(e,Gt,n.ORDER))throw new Error("Point is not on curve");const t=d(e);let s;try{s=n.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return 1==(1&a)!==((s&Gt)===Gt)&&(s=n.neg(s)),{x:e,y:s}}}}),l=e=>Pe(Ge(e,t.nByteLength));function y(e){return e>a>>Gt}const f=(e,t,n)=>Se(e.slice(t,n));class m{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=Fe("compactSignature",e,2*n),new m(f(e,0,n),f(e,n,2*n))}static fromDER(e){const{r:t,s:n}=St.toSig(Fe("DER",e));return new m(t,n)}assertValidity(){ke("r",this.r,Gt,a),ke("s",this.s,Gt,a)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r:a,s:s,recovery:r}=this,u=w(Fe("msgHash",e));if(null==r||![0,1,2,3].includes(r))throw new Error("recovery id invalid");const d=2===r||3===r?a+t.n:a;if(d>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const p=0==(1&r)?"02":"03",y=c.fromHex(p+l(d)),f=o(d),m=i(-u*f),h=i(s*f),b=c.BASE.multiplyAndAddUnsafe(y,m,h);if(!b)throw new Error("point at infinify");return b.assertValidity(),b}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,i(-this.s),this.recovery):this}toDERRawBytes(){return De(this.toDERHex())}toDERHex(){return St.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return De(this.toCompactHex())}toCompactHex(){return l(this.r)+l(this.s)}}const h={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=vt(t.n);return function(e,t,n=!1){const a=e.length,s=wt(t),r=vt(t);if(a<16||a<r||a>1024)throw new Error(`expected ${r}-1024 bytes of input, got ${a}`);const i=pt(n?Se(e):Te(e),t-rt)+rt;return n?$e(i,s):Ge(i,s)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function b(e){const t=we(e),n="string"==typeof e,a=(t||n)&&e.length;return t?a===s||a===r:n?a===2*s||a===2*r:e instanceof c}const g=t.bits2int||function(e){const n=Se(e),a=8*e.length-t.nBitLength;return a>0?n>>BigInt(a):n},w=t.bits2int_modN||function(e){return i(g(e))},v=Ue(t.nBitLength);function x(e){return ke(`num < 2^${t.nBitLength}`,e,Tt,v),Ge(e,t.nByteLength)}function A(e,a,s=P){if(["recovered","canonical"].some((e=>e in s)))throw new Error("sign() legacy options not supported");const{hash:r,randomBytes:d}=t;let{lowS:l,prehash:f,extraEntropy:h}=s;null==l&&(l=!0),e=Fe("msgHash",e),Ot(s),f&&(e=Fe("prehashed msgHash",r(e)));const b=w(e),v=u(a),A=[x(v),x(b)];if(null!=h&&!1!==h){const e=!0===h?d(n.BYTES):h;A.push(Fe("extraEntropy",e))}const E=Me(...A),I=b;return{seed:E,k2sig:function(e){const t=g(e);if(!p(t))return;const n=o(t),a=c.BASE.multiply(t).toAffine(),s=i(a.x);if(s===Tt)return;const r=i(n*i(I+s*v));if(r===Tt)return;let u=(a.x===s?0:2)|Number(a.y&Gt),d=r;return l&&y(r)&&(d=function(e){return y(e)?i(-e):e}(r),u^=1),new m(s,d,u)}}}const P={lowS:t.lowS,prehash:!1},E={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(b(e))throw new Error("first arg must be private key");if(!b(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(n)},sign:function(e,n,a=P){const{seed:s,k2sig:r}=A(e,n,a),i=t;return ze(i.hash.outputLen,i.nByteLength,i.hmac)(s,r)},verify:function(e,n,a,s=E){const r=e;if(n=Fe("msgHash",n),a=Fe("publicKey",a),"strict"in s)throw new Error("options.strict was renamed to lowS");Ot(s);const{lowS:u,prehash:d}=s;let p,l;try{if("string"==typeof r||we(r))try{p=m.fromDER(r)}catch(e){if(!(e instanceof St.Err))throw e;p=m.fromCompact(r)}else{if("object"!=typeof r||"bigint"!=typeof r.r||"bigint"!=typeof r.s)throw new Error("PARSE");{const{r:e,s:t}=r;p=new m(e,t)}}l=c.fromHex(a)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&p.hasHighS())return!1;d&&(n=t.hash(n));const{r:y,s:f}=p,h=w(n),b=o(f),g=i(h*b),v=i(y*b),x=c.BASE.multiplyAndAddUnsafe(l,g,v)?.toAffine();return!!x&&i(x.x)===y},ProjectivePoint:c,Signature:m,utils:h}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ct(e){return{hash:e,hmac:(t,...n)=>at(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const a=e[n];C(a),t+=a.length}const n=new Uint8Array(t);for(let t=0,a=0;t<e.length;t++){const s=e[t];n.set(s,a),a+=s.length}return n}(...n)),randomBytes:ee}}function Lt(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new cn(e.type);return`${e.name}(${kt(e.inputs,{includeName:t})})`}function kt(e,{includeName:t=!1}={}){return e?e.map((e=>function(e,{includeName:t}){if(e.type.startsWith("tuple"))return`(${kt(e.components,{includeName:t})})${e.type.slice(5)}`;return e.type+(t&&e.name?` ${e.name}`:"")}(e,{includeName:t}))).join(t?", ":","):""}function Nt(e,{strict:t=!0}={}){return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}function Ut(e){return Nt(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}BigInt(4);const Rt="2.21.36";let _t=({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,zt=`viem@${Rt}`,jt=class e extends Error{constructor(t,n={}){const a=n.cause instanceof e?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof e&&n.cause.docsPath||n.docsPath,r=_t?.({...n,docsPath:s});super([t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...r?[`Docs: ${r}`]:[],...a?[`Details: ${a}`]:[],...zt?[`Version: ${zt}`]:[]].join("\n"),n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=a,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Rt}walk(e){return Vt(this,e)}};function Vt(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e?Vt(e.cause,t):t?null:e}class Ht extends jt{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class qt extends jt{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class Wt extends jt{constructor({data:e,params:t,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${kt(t,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=n}}class Zt extends jt{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Yt extends jt{constructor({expectedLength:e,givenLength:t,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${t}`].join("\n"),{name:"AbiEncodingArrayLengthMismatchError"})}}class Kt extends jt{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${Ut(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Xt extends jt{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join("\n"),{name:"AbiEncodingLengthMismatchError"})}}class Jt extends jt{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Qt extends jt{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionNotFoundError"})}}class en extends jt{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}}class tn extends jt{constructor(e,{docsPath:t}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiFunctionSignatureNotFoundError"})}}class nn extends jt{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Lt(e.abiItem)}\`, and`,`\`${t.type}\` in \`${Lt(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class an extends jt{constructor({expectedSize:e,givenSize:t}){super(`Expected bytes${e}, got bytes${t}.`,{name:"BytesSizeMismatchError"})}}class sn extends jt{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiEncodingType"})}}class rn extends jt{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiDecodingType"})}}class on extends jt{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n"),{name:"InvalidArrayError"})}}class cn extends jt{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n"),{name:"InvalidDefinitionTypeError"})}}class un extends jt{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}class dn extends jt{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class pn extends jt{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class ln extends jt{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}class yn extends jt{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${t} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function fn(e,{dir:t,size:n=32}={}){return"string"==typeof e?mn(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new ln({size:e.length,targetSize:n,type:"bytes"});const a=new Uint8Array(n);for(let s=0;s<n;s++){const r="right"===t;a[r?s:n-s-1]=e[r?s:e.length-s-1]}return a}(e,{dir:t,size:n})}function mn(e,{dir:t,size:n=32}={}){if(null===n)return e;const a=e.replace("0x","");if(a.length>2*n)throw new ln({size:Math.ceil(a.length/2),targetSize:n,type:"hex"});return`0x${a["right"===t?"padEnd":"padStart"](2*n,"0")}`}class hn extends jt{constructor({max:e,min:t,signed:n,size:a,value:s}){super(`Number "${s}" is not in safe ${a?`${8*a}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class bn extends jt{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class gn extends jt{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function wn(e,{dir:t="left"}={}){let n="string"==typeof e?e.replace("0x",""):e,a=0;for(let e=0;e<n.length-1&&"0"===n["left"===t?e:n.length-e-1].toString();e++)a++;return n="left"===t?n.slice(a):n.slice(0,n.length-a),"string"==typeof e?(1===n.length&&"right"===t&&(n=`${n}0`),`0x${n.length%2==1?`0${n}`:n}`):n}function vn(e,{size:t}){if(Ut(e)>t)throw new gn({givenSize:Ut(e),maxSize:t})}function xn(e,t={}){const{signed:n}=t;t.size&&vn(e,{size:t.size});const a=BigInt(e);if(!n)return a;const s=(e.length-2)/2;return a<=(1n<<8n*BigInt(s)-1n)-1n?a:a-BigInt(`0x${"f".padStart(2*s,"f")}`)-1n}function An(e,t={}){return Number(xn(e,t))}const Pn=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function En(e,t={}){return"number"==typeof e||"bigint"==typeof e?Bn(e,t):"string"==typeof e?Sn(e,t):"boolean"==typeof e?In(e,t):On(e,t)}function In(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?(vn(n,{size:t.size}),fn(n,{size:t.size})):n}function On(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=Pn[e[t]];const a=`0x${n}`;return"number"==typeof t.size?(vn(a,{size:t.size}),fn(a,{dir:"right",size:t.size})):a}function Bn(e,t={}){const{signed:n,size:a}=t,s=BigInt(e);let r;a?r=n?(1n<<8n*BigInt(a)-1n)-1n:2n**(8n*BigInt(a))-1n:"number"==typeof e&&(r=BigInt(Number.MAX_SAFE_INTEGER));const i="bigint"==typeof r&&n?-r-1n:0;if(r&&s>r||s<i){const t="bigint"==typeof e?"n":"";throw new hn({max:r?`${r}${t}`:void 0,min:`${i}${t}`,signed:n,size:a,value:`${e}${t}`})}const o=`0x${(n&&s<0?(1n<<BigInt(8*a))+BigInt(s):s).toString(16)}`;return a?fn(o,{size:a}):o}const Dn=new TextEncoder;function Sn(e,t={}){return On(Dn.encode(e),t)}const Tn=new TextEncoder;function Gn(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){const n=Bn(e,t);return Mn(n)}(e,t):"boolean"==typeof e?function(e,t={}){const n=new Uint8Array(1);if(n[0]=Number(e),"number"==typeof t.size)return vn(n,{size:t.size}),fn(n,{size:t.size});return n}(e,t):Nt(e)?Mn(e,t):Cn(e,t)}const $n={zero:48,nine:57,A:65,F:70,a:97,f:102};function Fn(e){return e>=$n.zero&&e<=$n.nine?e-$n.zero:e>=$n.A&&e<=$n.F?e-($n.A-10):e>=$n.a&&e<=$n.f?e-($n.a-10):void 0}function Mn(e,t={}){let n=e;t.size&&(vn(n,{size:t.size}),n=fn(n,{dir:"right",size:t.size}));let a=n.slice(2);a.length%2&&(a=`0${a}`);const s=a.length/2,r=new Uint8Array(s);for(let e=0,t=0;e<s;e++){const n=Fn(a.charCodeAt(t++)),s=Fn(a.charCodeAt(t++));if(void 0===n||void 0===s)throw new jt(`Invalid byte sequence ("${a[t-2]}${a[t-1]}" in "${a}").`);r[e]=16*n+s}return r}function Cn(e,t={}){const n=Tn.encode(e);return"number"==typeof t.size?(vn(n,{size:t.size}),fn(n,{dir:"right",size:t.size})):n}function Ln(e,t){const n=t||"hex",a=me(Nt(e,{strict:!1})?Gn(e):e);return"bytes"===n?a:En(a)}class kn extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const Nn=/^0x[a-fA-F0-9]{40}$/,Un=new kn(8192);function Rn(e,t){const{strict:n=!0}=t??{},a=`${e}.${n}`;if(Un.has(a))return Un.get(a);const s=!(!Nn.test(e)||e.toLowerCase()!==e&&n&&zn(e)!==e);return Un.set(a,s),s}const _n=new kn(8192);function zn(e,t){if(_n.has(`${e}.${t}`))return _n.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),a=Ln(Cn(n),"bytes"),s=n.split("");for(let e=0;e<40;e+=2)a[e>>1]>>4>=8&&s[e]&&(s[e]=s[e].toUpperCase()),(15&a[e>>1])>=8&&s[e+1]&&(s[e+1]=s[e+1].toUpperCase());const r=`0x${s.join("")}`;return _n.set(`${e}.${t}`,r),r}class jn extends jt{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Vn extends jt{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Hn extends jt{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const qn={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Hn({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Vn({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new jn({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new jn({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Wn(e,t,n,{strict:a}={}){return Nt(e,{strict:!1})?function(e,t,n,{strict:a}={}){Zn(e,t);const s=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;a&&Yn(s,t,n);return s}(e,t,n,{strict:a}):Kn(e,t,n,{strict:a})}function Zn(e,t){if("number"==typeof t&&t>0&&t>Ut(e)-1)throw new pn({offset:t,position:"start",size:Ut(e)})}function Yn(e,t,n){if("number"==typeof t&&"number"==typeof n&&Ut(e)!==n-t)throw new pn({offset:n,position:"end",size:Ut(e)})}function Kn(e,t,n,{strict:a}={}){Zn(e,t);const s=e.slice(t,n);return a&&Yn(s,t,n),s}function Xn(e,t={}){void 0!==t.size&&vn(e,{size:t.size});return xn(On(e,t),t)}function Jn(e,t={}){let n=e;if(void 0!==t.size&&(vn(n,{size:t.size}),n=wn(n)),n.length>1||n[0]>1)throw new bn(n);return Boolean(n[0])}function Qn(e,t={}){void 0!==t.size&&vn(e,{size:t.size});return An(On(e,t),t)}function ea(e){return"string"==typeof e[0]?ta(e):function(e){let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);let a=0;for(const t of e)n.set(t,a),a+=t.length;return n}(e)}function ta(e){return`0x${e.reduce(((e,t)=>e+t.replace("0x","")),"")}`}function na(e,t){if(e.length!==t.length)throw new Xt({expectedLength:e.length,givenLength:t.length});const n=function({params:e,values:t}){const n=[];for(let a=0;a<e.length;a++)n.push(aa({param:e[a],value:t[a]}));return n}({params:e,values:t}),a=sa(n);return 0===a.length?"0x":a}function aa({param:e,value:t}){const n=ra(e.type);if(n){const[a,s]=n;return function(e,{length:t,param:n}){const a=null===t;if(!Array.isArray(e))throw new on(e);if(!a&&e.length!==t)throw new Yt({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const r=[];for(let t=0;t<e.length;t++){const a=aa({param:n,value:e[t]});a.dynamic&&(s=!0),r.push(a)}if(a||s){const e=sa(r);if(a){const t=Bn(r.length,{size:32});return{dynamic:!0,encoded:r.length>0?ea([t,e]):t}}if(s)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:ea(r.map((({encoded:e})=>e)))}}(t,{length:a,param:{...e,type:s}})}if("tuple"===e.type)return function(e,{param:t}){let n=!1;const a=[];for(let s=0;s<t.components.length;s++){const r=t.components[s],i=aa({param:r,value:e[Array.isArray(e)?s:r.name]});a.push(i),i.dynamic&&(n=!0)}return{dynamic:n,encoded:n?sa(a):ea(a.map((({encoded:e})=>e)))}}(t,{param:e});if("address"===e.type)return function(e){if(!Rn(e))throw new dn({address:e});return{dynamic:!1,encoded:mn(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){if("boolean"!=typeof e)throw new jt(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:mn(In(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){return function(e,{signed:t}){return{dynamic:!1,encoded:Bn(e,{size:32,signed:t})}}(t,{signed:e.type.startsWith("int")})}if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,n]=t.type.split("bytes"),a=Ut(e);if(!n){let t=e;return a%32!=0&&(t=mn(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:ea([mn(Bn(a,{size:32})),t])}}if(a!==Number.parseInt(n))throw new Kt({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:mn(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=Sn(e),n=Math.ceil(Ut(t)/32),a=[];for(let e=0;e<n;e++)a.push(mn(Wn(t,32*e,32*(e+1)),{dir:"right"}));return{dynamic:!0,encoded:ea([mn(Bn(Ut(t),{size:32})),...a])}}(t);throw new sn(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function sa(e){let t=0;for(let n=0;n<e.length;n++){const{dynamic:a,encoded:s}=e[n];t+=a?32:Ut(s)}const n=[],a=[];let s=0;for(let r=0;r<e.length;r++){const{dynamic:i,encoded:o}=e[r];i?(n.push(Bn(t+s,{size:32})),a.push(o),s+=Ut(o)):n.push(o)}return ea([...n,...a])}function ra(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function ia(e,t){const n="string"==typeof t?Mn(t):t,a=function(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(qn);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}(n);if(0===Ut(n)&&e.length>0)throw new Zt;if(Ut(t)&&Ut(t)<32)throw new Wt({data:"string"==typeof t?t:On(t),params:e,size:Ut(t)});let s=0;const r=[];for(let t=0;t<e.length;++t){const n=e[t];a.setPosition(s);const[i,o]=oa(a,n,{staticPosition:0});s+=o,r.push(i)}return r}function oa(e,t,{staticPosition:n}){const a=ra(t.type);if(a){const[s,r]=a;return function(e,t,{length:n,staticPosition:a}){if(!n){const n=a+Qn(e.readBytes(ua)),s=n+ca;e.setPosition(n);const r=Qn(e.readBytes(ca)),i=da(t);let o=0;const c=[];for(let n=0;n<r;++n){e.setPosition(s+(i?32*n:o));const[a,r]=oa(e,t,{staticPosition:s});o+=r,c.push(a)}return e.setPosition(a+32),[c,32]}if(da(t)){const s=a+Qn(e.readBytes(ua)),r=[];for(let a=0;a<n;++a){e.setPosition(s+32*a);const[n]=oa(e,t,{staticPosition:s});r.push(n)}return e.setPosition(a+32),[r,32]}let s=0;const r=[];for(let i=0;i<n;++i){const[n,i]=oa(e,t,{staticPosition:a+s});s+=i,r.push(n)}return[r,s]}(e,{...t,type:r},{length:s,staticPosition:n})}if("tuple"===t.type)return function(e,t,{staticPosition:n}){const a=0===t.components.length||t.components.some((({name:e})=>!e)),s=a?[]:{};let r=0;if(da(t)){const i=n+Qn(e.readBytes(ua));for(let n=0;n<t.components.length;++n){const o=t.components[n];e.setPosition(i+r);const[c,u]=oa(e,o,{staticPosition:i});r+=u,s[a?n:o?.name]=c}return e.setPosition(n+32),[s,32]}for(let i=0;i<t.components.length;++i){const o=t.components[i],[c,u]=oa(e,o,{staticPosition:n});s[a?i:o?.name]=c,r+=u}return[s,r]}(e,t,{staticPosition:n});if("address"===t.type)return function(e){const t=e.readBytes(32);return[zn(On(Kn(t,-20))),32]}(e);if("bool"===t.type)return function(e){return[Jn(e.readBytes(32),{size:32}),32]}(e);if(t.type.startsWith("bytes"))return function(e,t,{staticPosition:n}){const[a,s]=t.type.split("bytes");if(!s){const t=Qn(e.readBytes(32));e.setPosition(n+t);const a=Qn(e.readBytes(32));if(0===a)return e.setPosition(n+32),["0x",32];const s=e.readBytes(a);return e.setPosition(n+32),[On(s),32]}const r=On(e.readBytes(Number.parseInt(s),32));return[r,32]}(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,t){const n=t.type.startsWith("int"),a=Number.parseInt(t.type.split("int")[1]||"256"),s=e.readBytes(32);return[a>48?Xn(s,{signed:n}):Qn(s,{signed:n}),32]}(e,t);if("string"===t.type)return function(e,{staticPosition:t}){const n=Qn(e.readBytes(32)),a=t+n;e.setPosition(a);const s=Qn(e.readBytes(32));if(0===s)return e.setPosition(t+32),["",32];const r=e.readBytes(s,32),i=function(e,t={}){let n=e;return void 0!==t.size&&(vn(n,{size:t.size}),n=wn(n,{dir:"right"})),(new TextDecoder).decode(n)}(wn(r));return e.setPosition(t+32),[i,32]}(e,{staticPosition:n});throw new rn(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const ca=32,ua=32;function da(e){const{type:t}=e;if("string"===t)return!0;if("bytes"===t)return!0;if(t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(da);const n=ra(e.type);return!(!n||!da({...e,type:n[1]}))}const pa=e=>Ln(Gn(e));class la extends Error{constructor(e,t={}){const n=t.cause instanceof la?t.cause.details:t.cause?.message?t.cause.message:t.details,a=t.cause instanceof la&&t.cause.docsPath||t.docsPath;super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...a?[`Docs: https://abitype.dev${a}`]:[],...n?[`Details: ${n}`]:[],"Version: abitype@1.0.6"].join("\n")),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=a,this.metaMessages=t.metaMessages,this.shortMessage=e}}function ya(e,t){const n=e.exec(t);return n?.groups}const fa=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ma=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,ha=/^\(.+?\).*?$/,ba=/^tuple(?<array>(\[(\d*)\])*)$/;function ga(e){let t=e.type;if(ba.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let a=0;a<n;a++){t+=ga(e.components[a]),a<n-1&&(t+=", ")}const a=ya(ba,e.type);return t+=`)${a?.array??""}`,ga({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function wa(e){let t="";const n=e.length;for(let a=0;a<n;a++){t+=ga(e[a]),a!==n-1&&(t+=", ")}return t}const va=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;const xa=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;const Aa=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;const Pa=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Ea(e){return Pa.test(e)}function Ia(e){return ya(Pa,e)}const Oa=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;const Ba=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;const Da=/^receive\(\) external payable$/;const Sa=new Set(["indexed"]),Ta=new Set(["calldata","memory","storage"]);class Ga extends la{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class $a extends la{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Fa extends la{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Ma extends la{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Ca extends la{constructor({param:e,type:t,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class La extends la{constructor({param:e,type:t,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${n}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class ka extends la{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Na extends la{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Ua extends la{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Ra extends la{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class _a extends la{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class za extends la{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}const ja=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Va(e,t={}){if(function(e){return Aa.test(e)}(e)){const n=function(e){return ya(Aa,e)}(e);if(!n)throw new Na({signature:e,type:"function"});const a=Ya(n.parameters),s=[],r=a.length;for(let e=0;e<r;e++)s.push(Za(a[e],{modifiers:Ta,structs:t,type:"function"}));const i=[];if(n.returns){const e=Ya(n.returns),a=e.length;for(let n=0;n<a;n++)i.push(Za(e[n],{modifiers:Ta,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:i}}if(function(e){return xa.test(e)}(e)){const n=function(e){return ya(xa,e)}(e);if(!n)throw new Na({signature:e,type:"event"});const a=Ya(n.parameters),s=[],r=a.length;for(let e=0;e<r;e++)s.push(Za(a[e],{modifiers:Sa,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}if(function(e){return va.test(e)}(e)){const n=function(e){return ya(va,e)}(e);if(!n)throw new Na({signature:e,type:"error"});const a=Ya(n.parameters),s=[],r=a.length;for(let e=0;e<r;e++)s.push(Za(a[e],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}if(function(e){return Oa.test(e)}(e)){const n=function(e){return ya(Oa,e)}(e);if(!n)throw new Na({signature:e,type:"constructor"});const a=Ya(n.parameters),s=[],r=a.length;for(let e=0;e<r;e++)s.push(Za(a[e],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}if(function(e){return Ba.test(e)}(e))return{type:"fallback"};if(function(e){return Da.test(e)}(e))return{type:"receive",stateMutability:"payable"};throw new Ua({signature:e})}const Ha=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,qa=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Wa=/^u?int$/;function Za(e,t){const n=function(e,t){return t?`${t}:${e}`:e}(e,t?.type);if(ja.has(n))return ja.get(n);const a=ha.test(e),s=ya(a?qa:Ha,e);if(!s)throw new Fa({param:e});if(s.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||fa.test(e)||ma.test(e)||Xa.test(e)}(s.name))throw new Ma({param:e,name:s.name});const r=s.name?{name:s.name}:{},i="indexed"===s.modifier?{indexed:!0}:{},o=t?.structs??{};let c,u={};if(a){c="tuple";const e=Ya(s.type),t=[],n=e.length;for(let a=0;a<n;a++)t.push(Za(e[a],{structs:o}));u={components:t}}else if(s.type in o)c="tuple",u={components:o[s.type]};else if(Wa.test(s.type))c=`${s.type}256`;else if(c=s.type,"struct"!==t?.type&&!Ka(c))throw new $a({type:c});if(s.modifier){if(!t?.modifiers?.has?.(s.modifier))throw new Ca({param:e,type:t?.type,modifier:s.modifier});if(Ta.has(s.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(c,!!s.array))throw new La({param:e,type:t?.type,modifier:s.modifier})}const d={type:`${c}${s.array??""}`,...r,...i,...u};return ja.set(n,d),d}function Ya(e,t=[],n="",a=0){const s=e.trim().length;for(let r=0;r<s;r++){const s=e[r],i=e.slice(r+1);switch(s){case",":return 0===a?Ya(i,[...t,n.trim()]):Ya(i,t,`${n}${s}`,a);case"(":return Ya(i,t,`${n}${s}`,a+1);case")":return Ya(i,t,`${n}${s}`,a-1);default:return Ya(i,t,`${n}${s}`,a)}}if(""===n)return t;if(0!==a)throw new za({current:n,depth:a});return t.push(n.trim()),t}function Ka(e){return"address"===e||"bool"===e||"function"===e||"string"===e||fa.test(e)||ma.test(e)}const Xa=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;const Ja=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Qa(e,t,n=new Set){const a=[],s=e.length;for(let r=0;r<s;r++){const s=e[r];if(ha.test(s.type))a.push(s);else{const e=ya(Ja,s.type);if(!e?.type)throw new ka({abiParameter:s});const{array:r,type:i}=e;if(i in t){if(n.has(i))throw new _a({type:i});a.push({...s,type:`tuple${r??""}`,components:Qa(t[i]??[],t,new Set([...n,i]))})}else{if(!Ka(i))throw new Ga({type:i});a.push(s)}}}return a}function es(e){const t=function(e){const t={},n=e.length;for(let a=0;a<n;a++){const n=e[a];if(!Ea(n))continue;const s=Ia(n);if(!s)throw new Na({signature:n,type:"struct"});const r=s.properties.split(";"),i=[],o=r.length;for(let e=0;e<o;e++){const t=r[e].trim();if(!t)continue;const n=Za(t,{type:"struct"});i.push(n)}if(!i.length)throw new Ra({signature:n});t[s.name]=i}const a={},s=Object.entries(t),r=s.length;for(let e=0;e<r;e++){const[n,r]=s[e];a[n]=Qa(r,t)}return a}(e),n=[],a=e.length;for(let s=0;s<a;s++){const a=e[s];Ea(a)||n.push(Va(a,t))}return n}const ts=e=>{var t;return function(e){let t=!0,n="",a=0,s="",r=!1;for(let i=0;i<e.length;i++){const o=e[i];if(["(",")",","].includes(o)&&(t=!0),"("===o&&a++,")"===o&&a--,t)if(0!==a)" "!==o?(s+=o,n+=o):","!==e[i-1]&&","!==n&&",("!==n&&(n="",t=!1);else if(" "===o&&["event","function",""].includes(s))s="";else if(s+=o,")"===o){r=!0;break}}if(!r)throw new jt("Unable to normalize signature.");return s}("string"==typeof e?e:"function"===(t=e).type?`function ${t.name}(${wa(t.inputs)})${t.stateMutability&&"nonpayable"!==t.stateMutability?` ${t.stateMutability}`:""}${t.outputs.length?` returns (${wa(t.outputs)})`:""}`:"event"===t.type?`event ${t.name}(${wa(t.inputs)})`:"error"===t.type?`error ${t.name}(${wa(t.inputs)})`:"constructor"===t.type?`constructor(${wa(t.inputs)})${"payable"===t.stateMutability?" payable":""}`:"fallback"===t.type?"fallback()":"receive() external payable")};function ns(e){return t=ts(e),pa(t);var t}const as=ns,ss=e=>Wn(ns(e),0,4);function rs(e){const{abi:t,args:n=[],name:a}=e,s=Nt(a,{strict:!1}),r=t.filter((e=>s?"function"===e.type?ss(e)===a:"event"===e.type&&as(e)===a:"name"in e&&e.name===a));if(0===r.length)return;if(1===r.length)return r[0];let i;for(const e of r){if(!("inputs"in e))continue;if(!n||0===n.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(!e.inputs)continue;if(0===e.inputs.length)continue;if(e.inputs.length!==n.length)continue;if(n.every(((t,n)=>{const a="inputs"in e&&e.inputs[n];return!!a&&is(t,a)}))){if(i&&"inputs"in i&&i.inputs){const t=os(e.inputs,i.inputs,n);if(t)throw new nn({abiItem:e,type:t[0]},{abiItem:i,type:t[1]})}i=e}}return i||r[0]}function is(e,t){const n=typeof e,a=t.type;switch(a){case"address":return Rn(e,{strict:!1});case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===a&&"components"in t?Object.values(t.components).every(((t,n)=>is(Object.values(e)[n],t))):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(a)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(a)?"string"===n||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(a)&&(Array.isArray(e)&&e.every((e=>is(e,{...t,type:a.replace(/(\[[0-9]{0,}\])$/,"")}))))}}function os(e,t,n){for(const a in e){const s=e[a],r=t[a];if("tuple"===s.type&&"tuple"===r.type&&"components"in s&&"components"in r)return os(s.components,r.components,n[a]);const i=[s.type,r.type];if(!(!i.includes("address")||!i.includes("bytes20"))||(i.includes("address")&&i.includes("string")||!(!i.includes("address")||!i.includes("bytes")))&&Rn(n[a],{strict:!1}))return i}}const cs="/docs/contract/decodeFunctionResult";function us(e){const{abi:t,args:n,functionName:a,data:s}=e;let r=t[0];if(a){const e=rs({abi:t,args:n,name:a});if(!e)throw new Qt(a,{docsPath:cs});r=e}if("function"!==r.type)throw new Qt(void 0,{docsPath:cs});if(!r.outputs)throw new en(r.name,{docsPath:cs});const i=ia(r.outputs,s);return i&&i.length>1?i:i&&1===i.length?i[0]:void 0}const ds="/docs/contract/encodeFunctionData";function ps(e){const{args:t}=e,{abi:n,functionName:a}=1===e.abi.length&&e.functionName?.startsWith("0x")?e:function(e){const{abi:t,args:n,functionName:a}=e;let s=t[0];if(a){const e=rs({abi:t,args:n,name:a});if(!e)throw new Qt(a,{docsPath:ds});s=e}if("function"!==s.type)throw new Qt(void 0,{docsPath:ds});return{abi:[s],functionName:ss(Lt(s))}}(e),s=n[0];return ta([a,("inputs"in s&&s.inputs?na(s.inputs,t??[]):void 0)??"0x"])}function ls(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}const ys={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},fs={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},ms={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function hs(e){const{abi:t,data:n}=e,a=Wn(n,0,4);if("0x"===a)throw new Zt;const s=[...t||[],fs,ms].find((e=>"error"===e.type&&a===ss(Lt(e))));if(!s)throw new Jt(a,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?ia(s.inputs,Wn(n,4)):void 0,errorName:s.name}}const bs=(e,t,n)=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t),n);function gs({abiItem:e,args:t,includeFunctionName:n=!0,includeName:a=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map(((e,n)=>`${a&&e.name?`${e.name}: `:""}${"object"==typeof t[n]?bs(t[n]):t[n]}`)).join(", ")})`}const ws={gwei:9,wei:18},vs={ether:-9,wei:9};function xs(e,t){let n=e.toString();const a=n.startsWith("-");a&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,r]=[n.slice(0,n.length-t),n.slice(n.length-t)];return r=r.replace(/(0+)$/,""),`${a?"-":""}${s||"0"}${r?`.${r}`:""}`}function As(e,t="wei"){return xs(e,ws[t])}function Ps(e,t="wei"){return xs(e,vs[t])}class Es extends jt{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Is extends jt{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Os(e){return e.reduce(((e,{slot:t,value:n})=>`${e}        ${t}: ${n}\n`),"")}function Bs(e){const t=Object.entries(e).map((([e,t])=>void 0===t||!1===t?null:[e,t])).filter(Boolean),n=t.reduce(((e,[t])=>Math.max(e,t.length)),0);return t.map((([e,t])=>`  ${`${e}:`.padEnd(n+1)}  ${t}`)).join("\n")}class Ds extends jt{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n"),{name:"FeeConflictError"})}}const Ss=e=>e;class Ts extends jt{constructor(e,{account:t,docsPath:n,chain:a,data:s,gas:r,gasPrice:i,maxFeePerGas:o,maxPriorityFeePerGas:c,nonce:u,to:d,value:p,stateOverride:l}){const y=t?ls(t):void 0;let f=Bs({from:y?.address,to:d,value:void 0!==p&&`${As(p)} ${a?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:r,gasPrice:void 0!==i&&`${Ps(i)} gwei`,maxFeePerGas:void 0!==o&&`${Ps(o)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${Ps(c)} gwei`,nonce:u});l&&(f+=`\n${function(e){return e.reduce(((e,{address:t,...n})=>{let a=`${e}    ${t}:\n`;return n.nonce&&(a+=`      nonce: ${n.nonce}\n`),n.balance&&(a+=`      balance: ${n.balance}\n`),n.code&&(a+=`      code: ${n.code}\n`),n.state&&(a+="      state:\n",a+=Os(n.state)),n.stateDiff&&(a+="      stateDiff:\n",a+=Os(n.stateDiff)),a}),"  State Override:\n").slice(0,-1)}(l)}`),super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",f].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Gs extends jt{constructor(e,{abi:t,args:n,contractAddress:a,docsPath:s,functionName:r,sender:i}){const o=rs({abi:t,args:n,name:r}),c=o?gs({abiItem:o,args:n,includeFunctionName:!1,includeName:!1}):void 0,u=Bs({address:a&&a,function:o?Lt(o,{includeName:!0}):void 0,args:c&&"()"!==c&&`${[...Array(r?.length??0).keys()].map((()=>" ")).join("")}${c}`,sender:i});super(e.shortMessage||`An unknown error occurred while executing the contract function "${r}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],u&&"Contract Call:",u].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=n,this.cause=e,this.contractAddress=a,this.functionName=r,this.sender=i}}class $s extends jt{constructor({abi:e,data:t,functionName:n,message:a}){let s,r,i,o,c;if(t&&"0x"!==t)try{r=hs({abi:e,data:t});const{abiItem:n,errorName:a,args:s}=r;if("Error"===a)o=s[0];else if("Panic"===a){const[e]=s;o=ys[e]}else{const e=n?Lt(n,{includeName:!0}):void 0,t=n&&s?gs({abiItem:n,args:s,includeFunctionName:!1,includeName:!1}):void 0;i=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array(a?.length??0).keys()].map((()=>" ")).join("")}${t}`:""]}}catch(e){s=e}else a&&(o=a);s instanceof Jt&&(c=s.signature,i=[`Unable to decode signature "${c}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${c}.`]),super(o&&"execution reverted"!==o||c?[`The contract function "${n}" reverted with the following ${c?"signature":"reason"}:`,o||c].join("\n"):`The contract function "${n}" reverted.`,{cause:s,metaMessages:i,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r,this.reason=o,this.signature=c}}class Fs extends jt{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Ms extends jt{constructor({factory:e}){super("Deployment for counterfactual contract call failed"+(e?` for factory "${e}".`:""),{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Cs extends jt{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class Ls extends jt{constructor({body:e,cause:t,details:n,headers:a,status:s,url:r}){super("HTTP request failed.",{cause:t,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${r}`,e&&`Request body: ${bs(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=a,this.status=s,this.url=r}}class ks extends jt{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${n}`,`Request body: ${bs(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code}}class Ns extends jt{constructor(e,{code:t,docsPath:n,metaMessages:a,name:s,shortMessage:r}){super(r,{cause:e,docsPath:n,metaMessages:a||e?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof ks?e.code:t??-1}}class Us extends Ns{constructor(e){super(e,{code:Us.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Us,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});const Rs=3;function _s(e,t,n){const a=e[t.name];if("function"==typeof a)return a;const s=e[n];return"function"==typeof s?s:n=>t(e,n)}const zs=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],js="0x82ad56cb",Vs="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Hs="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";class qs extends jt{constructor({blockNumber:e,chain:t,contract:n}){super(`Chain "${t.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Ws extends jt{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const Zs="/docs/contract/encodeDeployData";function Ys(e){const{abi:t,args:n,bytecode:a}=e;if(!n||0===n.length)return a;const s=t.find((e=>"type"in e&&"constructor"===e.type));if(!s)throw new Ht({docsPath:Zs});if(!("inputs"in s))throw new qt({docsPath:Zs});if(!s.inputs||0===s.inputs.length)throw new qt({docsPath:Zs});return ta([a,na(s.inputs,n)])}let Ks=class extends jt{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}};Object.defineProperty(Ks,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(Ks,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Xs extends jt{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Ps(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Xs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Js extends jt{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Ps(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Js,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Qs extends jt{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Qs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class er extends jt{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(er,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class tr extends jt{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(tr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class nr extends jt{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(nr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class ar extends jt{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(ar,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class sr extends jt{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(sr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class rr extends jt{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(rr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class ir extends jt{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${Ps(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${Ps(n)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(ir,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class or extends jt{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function cr(e,{docsPath:t,...n}){const a=(()=>{const t=function(e,t){const n=(e.details||"").toLowerCase(),a=e instanceof jt?e.walk((e=>e?.code===Ks.code)):e;return a instanceof jt?new Ks({cause:e,message:a.details}):Ks.nodeMessage.test(n)?new Ks({cause:e,message:e.details}):Xs.nodeMessage.test(n)?new Xs({cause:e,maxFeePerGas:t?.maxFeePerGas}):Js.nodeMessage.test(n)?new Js({cause:e,maxFeePerGas:t?.maxFeePerGas}):Qs.nodeMessage.test(n)?new Qs({cause:e,nonce:t?.nonce}):er.nodeMessage.test(n)?new er({cause:e,nonce:t?.nonce}):tr.nodeMessage.test(n)?new tr({cause:e,nonce:t?.nonce}):nr.nodeMessage.test(n)?new nr({cause:e}):ar.nodeMessage.test(n)?new ar({cause:e,gas:t?.gas}):sr.nodeMessage.test(n)?new sr({cause:e,gas:t?.gas}):rr.nodeMessage.test(n)?new rr({cause:e}):ir.nodeMessage.test(n)?new ir({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new or({cause:e})}(e,n);return t instanceof or?e:t})();return new Ts(a,{docsPath:t,...n})}function ur(e,{format:t}){if(!t)return{};const n={};return function t(a){const s=Object.keys(a);for(const r of s)r in e&&(n[r]=e[r]),a[r]&&"object"==typeof a[r]&&!Array.isArray(a[r])&&t(a[r])}(t(e||{})),n}const dr={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function pr(e){const t={};return void 0!==e.authorizationList&&(t.authorizationList=e.authorizationList.map((e=>({address:e.contractAddress,r:e.r,s:e.s,chainId:Bn(e.chainId),nonce:Bn(e.nonce),...void 0!==e.yParity?{yParity:Bn(e.yParity)}:{},...void 0!==e.v&&void 0===e.yParity?{v:Bn(e.v)}:{}})))),void 0!==e.accessList&&(t.accessList=e.accessList),void 0!==e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),void 0!==e.blobs&&("string"!=typeof e.blobs[0]?t.blobs=e.blobs.map((e=>On(e))):t.blobs=e.blobs),void 0!==e.data&&(t.data=e.data),void 0!==e.from&&(t.from=e.from),void 0!==e.gas&&(t.gas=Bn(e.gas)),void 0!==e.gasPrice&&(t.gasPrice=Bn(e.gasPrice)),void 0!==e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=Bn(e.maxFeePerBlobGas)),void 0!==e.maxFeePerGas&&(t.maxFeePerGas=Bn(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=Bn(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(t.nonce=Bn(e.nonce)),void 0!==e.to&&(t.to=e.to),void 0!==e.type&&(t.type=dr[e.type]),void 0!==e.value&&(t.value=Bn(e.value)),t}const lr=new Map;function yr({fn:e,id:t,shouldSplitBatch:n,wait:a=0,sort:s}){const r=async()=>{const t=o();i();const n=t.map((({args:e})=>e));0!==n.length&&e(n).then((e=>{s&&Array.isArray(e)&&e.sort(s);for(let n=0;n<t.length;n++){const{resolve:a}=t[n];a?.([e[n],e])}})).catch((e=>{for(let n=0;n<t.length;n++){const{reject:a}=t[n];a?.(e)}}))},i=()=>lr.delete(t),o=()=>lr.get(t)||[],c=e=>lr.set(t,[...o(),e]);return{flush:i,async schedule(e){const{promise:t,resolve:s,reject:i}=function(){let e=()=>{},t=()=>{};return{promise:new Promise(((n,a)=>{e=n,t=a})),resolve:e,reject:t}}(),u=n?.([...o().map((({args:e})=>e)),e]);u&&r();return o().length>0?(c({args:e,resolve:s,reject:i}),t):(c({args:e,resolve:s,reject:i}),setTimeout(r,a),t)}}}function fr(e){if(e&&0!==e.length)return e.reduce(((e,{slot:t,value:n})=>{if(66!==t.length)throw new yn({size:t.length,targetSize:66,type:"hex"});if(66!==n.length)throw new yn({size:n.length,targetSize:66,type:"hex"});return e[t]=n,e}),{})}function mr(e){const{balance:t,nonce:n,state:a,stateDiff:s,code:r}=e,i={};if(void 0!==r&&(i.code=r),void 0!==t&&(i.balance=Bn(t)),void 0!==n&&(i.nonce=Bn(n)),void 0!==a&&(i.state=fr(a)),void 0!==s){if(i.state)throw new Is;i.stateDiff=fr(s)}return i}function hr(e){if(!e)return;const t={};for(const{address:n,...a}of e){if(!Rn(n,{strict:!1}))throw new dn({address:n});if(t[n])throw new Es({address:n});t[n]=mr(a)}return t}const br=2n**256n-1n;async function gr(e,t){const{account:n=e.account,batch:a=Boolean(e.batch?.multicall),blockNumber:s,blockTag:r="latest",accessList:i,blobs:o,code:c,data:u,factory:d,factoryData:p,gas:l,gasPrice:y,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:h,nonce:b,to:g,value:w,stateOverride:v,...x}=t,A=n?ls(n):void 0;if(c&&(d||p))throw new jt("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(c&&g)throw new jt("Cannot provide both `code` & `to` as parameters.");const P=c&&u,E=d&&p&&g&&u,I=P||E,O=P?function(e){const{code:t,data:n}=e;return Ys({abi:es(["constructor(bytes, bytes)"]),bytecode:Vs,args:[t,n]})}({code:c,data:u}):E?function(e){const{data:t,factory:n,factoryData:a,to:s}=e;return Ys({abi:es(["constructor(address, bytes, address, bytes)"]),bytecode:Hs,args:[s,t,n,a]})}({data:u,factory:d,factoryData:p,to:g}):u;try{!function(e){const{account:t,gasPrice:n,maxFeePerGas:a,maxPriorityFeePerGas:s,to:r}=e,i=t?ls(t):void 0;if(i&&!Rn(i.address))throw new dn({address:i.address});if(r&&!Rn(r))throw new dn({address:r});if(void 0!==n&&(void 0!==a||void 0!==s))throw new Ds;if(a&&a>br)throw new Xs({maxFeePerGas:a});if(s&&a&&s>a)throw new ir({maxFeePerGas:a,maxPriorityFeePerGas:s})}(t);const n=(s?Bn(s):void 0)||r,c=hr(v),u=e.chain?.formatters?.transactionRequest?.format,d=(u||pr)({...ur(x,{format:u}),from:A?.address,accessList:i,blobs:o,data:O,gas:l,gasPrice:y,maxFeePerBlobGas:f,maxFeePerGas:m,maxPriorityFeePerGas:h,nonce:b,to:I?void 0:g,value:w});if(a&&function({request:e}){const{data:t,to:n,...a}=e;return!!t&&(!t.startsWith(js)&&(!!n&&!(Object.values(a).filter((e=>void 0!==e)).length>0)))}({request:d})&&!c)try{return await async function(e,t){const{batchSize:n=1024,wait:a=0}="object"==typeof e.batch?.multicall?e.batch.multicall:{},{blockNumber:s,blockTag:r="latest",data:i,multicallAddress:o,to:c}=t;let u=o;if(!u){if(!e.chain)throw new Ws;u=function({blockNumber:e,chain:t,contract:n}){const a=t?.contracts?.[n];if(!a)throw new qs({chain:t,contract:{name:n}});if(e&&a.blockCreated&&a.blockCreated>e)throw new qs({blockNumber:e,chain:t,contract:{name:n,blockCreated:a.blockCreated}});return a.address}({blockNumber:s,chain:e.chain,contract:"multicall3"})}const d=s?Bn(s):void 0,p=d||r,{schedule:l}=yr({id:`${e.uid}.${p}`,wait:a,shouldSplitBatch(e){const t=e.reduce(((e,{data:t})=>e+(t.length-2)),0);return t>2*n},fn:async t=>{const n=t.map((e=>({allowFailure:!0,callData:e.data,target:e.to}))),a=ps({abi:zs,args:[n],functionName:"aggregate3"}),s=await e.request({method:"eth_call",params:[{data:a,to:u},p]});return us({abi:zs,args:[n],functionName:"aggregate3",data:s||"0x"})}}),[{returnData:y,success:f}]=await l({data:i,to:c});if(!f)throw new Cs({data:y});return"0x"===y?{data:void 0}:{data:y}}(e,{...d,blockNumber:s,blockTag:r})}catch(e){if(!(e instanceof Ws||e instanceof qs))throw e}const p=await e.request({method:"eth_call",params:c?[d,n,c]:[d,n]});return"0x"===p?{data:void 0}:{data:p}}catch(n){const a=function(e){if(!(e instanceof jt))return;const t=e.walk();return"object"==typeof t?.data?t.data?.data:t.data}(n),{offchainLookup:s,offchainLookupSignature:r}=await import("./ccip-C3FaUxoX.js");if(!1!==e.ccipRead&&a?.slice(0,10)===r&&g)return{data:await s(e,{data:a,to:g})};if(I&&"0x101bb98d"===a?.slice(0,10))throw new Ms({factory:d});throw cr(n,{...t,account:A,chain:e.chain})}}async function wr(e,t){const{abi:n,address:a,args:s,functionName:r,...i}=t,o=ps({abi:n,args:s,functionName:r});try{const{data:t}=await _s(e,gr,"call")({...i,data:o,to:a});return us({abi:n,args:s,functionName:r,data:t||"0x"})}catch(e){throw function(e,{abi:t,address:n,args:a,docsPath:s,functionName:r,sender:i}){const{code:o,data:c,message:u,shortMessage:d}=e instanceof Cs?e:e instanceof jt?e.walk((e=>"data"in e))||e.walk():{},p=e instanceof Zt?new Fs({functionName:r}):[Rs,Us.code].includes(o)&&(c||u||d)?new $s({abi:t,data:"object"==typeof c?c.data:c,functionName:r,message:d??u}):e;return new Gs(p,{abi:t,args:a,contractAddress:n,docsPath:s,functionName:r,sender:i})}(e,{abi:n,address:a,args:s,docsPath:"/docs/contract/readContract",functionName:r})}}const vr="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789";const xr=/^(.*)\[([0-9]*)\]$/,Ar=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Pr=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Er(e,t,n=!1){if("address"===e){const e=t;if(!Rn(e))throw new dn({address:e});return fn(e.toLowerCase(),{size:n?32:null})}if("string"===e)return Sn(t);if("bytes"===e)return t;if("bool"===e)return fn(In(t),{size:n?32:1});const a=e.match(Pr);if(a){const[e,s,r="256"]=a,i=Number.parseInt(r)/8;return Bn(t,{size:n?32:i,signed:"int"===s})}const s=e.match(Ar);if(s){const[e,a]=s;if(Number.parseInt(a)!==(t.length-2)/2)throw new an({expectedSize:Number.parseInt(a),givenSize:(t.length-2)/2});return fn(t,{dir:"right",size:n?32:null})}const r=e.match(xr);if(r&&Array.isArray(t)){const[e,n]=r,a=[];for(let e=0;e<t.length;e++)a.push(Er(n,t[e],!0));return 0===a.length?"0x":ta(a)}throw new un(e)}const Ir="Ethereum Signed Message:\n";function Or(e,t){return Ln(function(e){const t="string"==typeof e?Sn(e):"string"==typeof e.raw?e.raw:On(e.raw);return ea([Sn(`${Ir}${Ut(t)}`),t])}(e),t)}class Br extends jt{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Dr extends jt{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Sr(e){const{domain:t,message:n,primaryType:a,types:s}=e,r=(e,t)=>{for(const n of e){const{name:e,type:a}=n,i=t[e],o=a.match(Pr);if(o&&("number"==typeof i||"bigint"==typeof i)){const[e,t,n]=o;Bn(i,{signed:"int"===t,size:Number.parseInt(n)/8})}if("address"===a&&"string"==typeof i&&!Rn(i))throw new dn({address:i});const c=a.match(Ar);if(c){const[e,t]=c;if(t&&Ut(i)!==Number.parseInt(t))throw new an({expectedSize:Number.parseInt(t),givenSize:Ut(i)})}const u=s[a];u&&(Gr(a),r(u,i))}};if(s.EIP712Domain&&t&&r(s.EIP712Domain,t),"EIP712Domain"!==a){if(!s[a])throw new Br({primaryType:a,types:s});r(s[a],n)}}function Tr({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},"number"==typeof e?.chainId&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Gr(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Dr({type:e})}function $r(e){const{domain:t={},message:n,primaryType:a}=e,s={EIP712Domain:Tr({domain:t}),...e.types};Sr({domain:t,message:n,primaryType:a,types:s});const r=["0x1901"];return t&&r.push(function({domain:e,types:t}){return Fr({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:s})),"EIP712Domain"!==a&&r.push(Fr({data:n,primaryType:a,types:s})),Ln(ea(r))}function Fr({data:e,primaryType:t,types:n}){return Ln(Mr({data:e,primaryType:t,types:n}))}function Mr({data:e,primaryType:t,types:n}){const a=[{type:"bytes32"}],s=[Cr({primaryType:t,types:n})];for(const r of n[t]){const[t,i]=kr({types:n,name:r.name,type:r.type,value:e[r.name]});a.push(t),s.push(i)}return na(a,s)}function Cr({primaryType:e,types:t}){const n=En(function({primaryType:e,types:t}){let n="";const a=Lr({primaryType:e,types:t});a.delete(e);const s=[e,...Array.from(a).sort()];for(const e of s)n+=`${e}(${t[e].map((({name:e,type:t})=>`${t} ${e}`)).join(",")})`;return n}({primaryType:e,types:t}));return Ln(n)}function Lr({primaryType:e,types:t},n=new Set){const a=e.match(/^\w*/u),s=a?.[0];if(n.has(s)||void 0===t[s])return n;n.add(s);for(const e of t[s])Lr({primaryType:e.type,types:t},n);return n}function kr({types:e,name:t,type:n,value:a}){if(void 0!==e[n])return[{type:"bytes32"},Ln(Mr({data:a,primaryType:n,types:e}))];if("bytes"===n){return[{type:"bytes32"},Ln(a=`0x${(a.length%2?"0":"")+a.slice(2)}`)]}if("string"===n)return[{type:"bytes32"},Ln(En(a))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),r=a.map((n=>kr({name:t,type:s,types:e,value:n})));return[{type:"bytes32"},Ln(na(r.map((([e])=>e)),r.map((([,e])=>e))))]}return[{type:n},a]}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nr=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ur=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Rr=BigInt(1),_r=BigInt(2),zr=(e,t)=>(e+t/_r)/t;const jr=gt(Nr,void 0,void 0,{sqrt:function(e){const t=Nr,n=BigInt(3),a=BigInt(6),s=BigInt(11),r=BigInt(22),i=BigInt(23),o=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,p=yt(d,n,t)*d%t,l=yt(p,n,t)*d%t,y=yt(l,_r,t)*u%t,f=yt(y,s,t)*y%t,m=yt(f,r,t)*f%t,h=yt(m,o,t)*m%t,b=yt(h,c,t)*h%t,g=yt(b,o,t)*m%t,w=yt(g,n,t)*d%t,v=yt(w,i,t)*f%t,x=yt(v,a,t)*u%t,A=yt(x,_r,t);if(!jr.eql(jr.sqr(A),e))throw new Error("Cannot find square root");return A}}),Vr=function(e,t){const n=t=>Mt({...e,...Ct(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:jr,n:Ur,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ur,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),a=-Rr*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),r=n,i=BigInt("0x100000000000000000000000000000000"),o=zr(r*e,t),c=zr(-a*e,t);let u=pt(e-o*n-c*s,t),d=pt(-o*a-c*r,t);const p=u>i,l=d>i;if(p&&(u=t-u),l&&(d=t-d),u>i||d>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:p,k1:u,k2neg:l,k2:d}}}},tt);BigInt(0),Vr.ProjectivePoint;const Hr=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],qr=[{inputs:[{name:"success",type:"bool"},{name:"ret",type:"bytes"}],name:"DelegateAndRevert",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"},{name:"inner",type:"bytes"}],name:"FailedOpWithRevert",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"PostOpReverted",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"PostOpRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"}],name:"UserOperationPrefundTooLow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"data",type:"bytes"}],name:"delegateAndRevert",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint256"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint256"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"paymasterVerificationGasLimit",type:"uint256"},{name:"paymasterPostOpGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function Wr(e){const{chainId:t,entryPointAddress:n,entryPointVersion:a}=e,s=e.userOperation,{callData:r,callGasLimit:i,initCode:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:d,paymasterAndData:p,preVerificationGas:l,sender:y,verificationGasLimit:f}=s,m=(()=>{if("0.6"===a)return na([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[y,d,Ln(o??"0x"),Ln(r??"0x"),i,f,l,c,u,Ln(p??"0x")]);if("0.7"===a){const e=ea([fn(Bn(s.verificationGasLimit),{size:16}),fn(Bn(s.callGasLimit),{size:16})]),t=Ln(r),n=ea([fn(Bn(s.maxPriorityFeePerGas),{size:16}),fn(Bn(s.maxFeePerGas),{size:16})]),a=Ln(s.factory&&s.factoryData?ea([s.factory,s.factoryData]):"0x"),i=Ln(s.paymaster?ea([s.paymaster,fn(Bn(s.paymasterVerificationGasLimit||0),{size:16}),fn(Bn(s.paymasterPostOpGasLimit||0),{size:16}),s.paymasterData||"0x"]):"0x");return na([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[y,d,a,t,e,l,n,i])}throw new Error(`entryPointVersion "${a}" not supported.`)})();return Ln(na([{type:"bytes32"},{type:"address"},{type:"uint256"}],[Ln(m),n,BigInt(t)]))}async function Zr(e,{address:t,blockNumber:n,blockTag:a="latest"}){const s=void 0!==n?Bn(n):void 0,r=await e.request({method:"eth_getCode",params:[t,s||a]},{dedupe:Boolean(s)});if("0x"!==r)return r}function Yr(e){const{source:t}=e,n=new Map,a=new kn(8192),s=new Map,r=({address:e,chainId:t})=>`${e}.${t}`;return{async consume({address:e,chainId:n,client:s}){const i=r({address:e,chainId:n}),o=this.get({address:e,chainId:n,client:s});this.increment({address:e,chainId:n});const c=await o;return await t.set({address:e,chainId:n},c),a.set(i,c),c},async increment({address:e,chainId:t}){const a=r({address:e,chainId:t}),s=n.get(a)??0;n.set(a,s+1)},async get({address:e,chainId:i,client:o}){const c=r({address:e,chainId:i});let u=s.get(c);u||(u=(async()=>{try{const n=await t.get({address:e,chainId:i,client:o}),s=a.get(c)??0;return s>0&&n<=s?s+1:(a.delete(c),n)}finally{this.reset({address:e,chainId:i})}})(),s.set(c,u));return(n.get(c)??0)+await u},reset({address:e,chainId:t}){const a=r({address:e,chainId:t});n.delete(a),s.delete(a)}}}const Kr="0x6492649264926492649264926492649264926492649264926492649264926492";function Xr(e){const{address:t,data:n,signature:a,to:s="hex"}=e,r=ta([na([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,a]),Kr]);return"hex"===s?r:Mn(r)}async function Jr(e){const{extend:t,nonceKeyManager:n=Yr({source:{get:()=>Date.now(),set(){}}}),...a}=e;let s=!1;const r=await e.getAddress();return{...t,...a,address:r,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(t){const a=t?.key??BigInt(await n.consume({address:r,chainId:e.client.chain.id,client:e.client}));if(e.getNonce)return await e.getNonce({...t,key:a});return await wr(e.client,{abi:es(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[r,a]})},async isDeployed(){if(s)return!0;const t=await _s(e.client,Zr,"getCode")({address:r});return s=Boolean(t),s},...e.sign?{async sign(t){const[{factory:n,factoryData:a},s]=await Promise.all([this.getFactoryArgs(),e.sign(t)]);return n&&a?Xr({address:n,data:a,signature:s}):s}}:{},async signMessage(t){const[{factory:n,factoryData:a},s]=await Promise.all([this.getFactoryArgs(),e.signMessage(t)]);return n&&a?Xr({address:n,data:a,signature:s}):s},async signTypedData(t){const[{factory:n,factoryData:a},s]=await Promise.all([this.getFactoryArgs(),e.signTypedData(t)]);return n&&a?Xr({address:n,data:a,signature:s}):s},type:"smart"}}async function Qr(e){const{client:t,owners:n,nonce:a=0n}=e;let s=e.address;const r={abi:Hr,address:vr,version:"0.6"},i={abi:si,address:"0x0ba5ed0c6aa8c49038f819e587e2633c4a9f428a"},o=n.map((e=>"webAuthn"===e.type?e.publicKey:fn(e.address))),c=n[0];return Jr({client:t,entryPoint:r,extend:{abi:ai,factory:i},async decodeCalls(e){const t=function(e){const{abi:t,data:n}=e,a=Wn(n,0,4),s=t.find((e=>"function"===e.type&&a===ss(Lt(e))));if(!s)throw new tn(a,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?ia(s.inputs,Wn(n,4)):void 0}}({abi:ai,data:e});if("execute"===t.functionName)return[{to:t.args[0],value:t.args[1],data:t.args[2]}];if("executeBatch"===t.functionName)return t.args[0].map((e=>({to:e.target,value:e.value,data:e.data})));throw new jt(`unable to decode calls for "${t.functionName}"`)},encodeCalls:async e=>1===e.length?ps({abi:ai,functionName:"execute",args:[e[0].to,e[0].value??0n,e[0].data??"0x"]}):ps({abi:ai,functionName:"executeBatch",args:[e.map((e=>({data:e.data??"0x",target:e.to,value:e.value??0n})))]}),getAddress:async()=>(s??=await wr(t,{...i,functionName:"getAddress",args:[o,a]}),s),async getFactoryArgs(){const e=ps({abi:i.abi,functionName:"createAccount",args:[o,a]});return{factory:i.address,factoryData:e}},getStubSignature:async()=>"webAuthn"===c.type?"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000001949fc7c88032b9fcb5f6efc7a7b8c63668eae9871b765e23123bb473ff57aa831a7c0d9276168ebcc29f2875a0239cffdf2a9cd1c2007c5c77c071db9264df1d000000000000000000000000000000000000000000000000000000000000002549960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97630500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008a7b2274797065223a22776562617574686e2e676574222c226368616c6c656e6765223a2273496a396e6164474850596759334b7156384f7a4a666c726275504b474f716d59576f4d57516869467773222c226f726967696e223a2268747470733a2f2f7369676e2e636f696e626173652e636f6d222c2263726f73734f726967696e223a66616c73657d00000000000000000000000000000000000000000000":ni({signature:"0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c"}),async sign(e){const n=ti({address:await this.getAddress(),chainId:t.chain.id,hash:e.hash});return ni({signature:await ei({hash:n,owner:c})})},async signMessage(e){const{message:n}=e,a=ti({address:await this.getAddress(),chainId:t.chain.id,hash:Or(n)});return ni({signature:await ei({hash:a,owner:c})})},async signTypedData(e){const{domain:n,types:a,primaryType:s,message:r}=e,i=ti({address:await this.getAddress(),chainId:t.chain.id,hash:$r({domain:n,message:r,primaryType:s,types:a})});return ni({signature:await ei({hash:i,owner:c})})},async signUserOperation(e){const{chainId:n=t.chain.id,...a}=e,s=await this.getAddress(),i=Wr({chainId:n,entryPointAddress:r.address,entryPointVersion:r.version,userOperation:{...a,sender:s}});return ni({signature:await ei({hash:i,owner:c})})},userOperation:{async estimateGas(e){if("webAuthn"===c.type)return{verificationGasLimit:BigInt(Math.max(Number(e.verificationGasLimit??0n),8e5))}}}})}async function ei({hash:e,owner:t}){if("webAuthn"===t.type){const{signature:n,webauthn:a}=await t.sign({hash:e});return function({webauthn:e,signature:t}){const{r:n,s:a}=function(e){const t="string"==typeof e?Ze(e):e,n=t.slice(0,32),a=t.slice(32,64);return{r:BigInt(We(n)),s:BigInt(We(a))}}(t);return na([{components:[{name:"authenticatorData",type:"bytes"},{name:"clientDataJSON",type:"bytes"},{name:"challengeIndex",type:"uint256"},{name:"typeIndex",type:"uint256"},{name:"r",type:"uint256"},{name:"s",type:"uint256"}],type:"tuple"}],[{authenticatorData:e.authenticatorData,clientDataJSON:Sn(e.clientDataJSON),challengeIndex:BigInt(e.challengeIndex),typeIndex:BigInt(e.typeIndex),r:n,s:a}])}({signature:n,webauthn:a})}if(t.sign)return t.sign({hash:e});throw new jt("`owner` does not support raw sign.")}function ti({address:e,chainId:t,hash:n}){return $r({domain:{chainId:t,name:"Coinbase Smart Wallet",verifyingContract:e,version:"1"},types:{CoinbaseSmartWalletMessage:[{name:"hash",type:"bytes32"}]},primaryType:"CoinbaseSmartWalletMessage",message:{hash:n}})}function ni(e){const{ownerIndex:t=0}=e;return na([{components:[{name:"ownerIndex",type:"uint8"},{name:"signatureData",type:"bytes"}],type:"tuple"}],[{ownerIndex:t,signatureData:(()=>{if(65!==Ut(e.signature))return e.signature;const t=function(e){const{r:t,s:n}=Vr.Signature.fromCompact(e.slice(2,130)),a=Number(`0x${e.slice(130)}`),[s,r]=(()=>{if(0===a||1===a)return[void 0,a];if(27===a)return[BigInt(a),0];if(28===a)return[BigInt(a),1];throw new Error("Invalid yParityOrV value")})();return void 0!==s?{r:Bn(t,{size:32}),s:Bn(n,{size:32}),v:s,yParity:r}:{r:Bn(t,{size:32}),s:Bn(n,{size:32}),yParity:r}}(e.signature);return function(e,t){if(e.length!==t.length)throw new Xt({expectedLength:e.length,givenLength:t.length});const n=[];for(let a=0;a<e.length;a++){const s=e[a],r=t[a];n.push(Er(s,r))}return ta(n)}(["bytes32","bytes32","uint8"],[t.r,t.s,0===t.yParity?27:28])})()}])}const ai=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"owner",type:"bytes"}],name:"AlreadyOwner",type:"error"},{inputs:[],name:"Initialized",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidEthereumAddressOwner",type:"error"},{inputs:[{name:"key",type:"uint256"}],name:"InvalidNonceKey",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidOwnerBytesLength",type:"error"},{inputs:[],name:"LastOwner",type:"error"},{inputs:[{name:"index",type:"uint256"}],name:"NoOwnerAtIndex",type:"error"},{inputs:[{name:"ownersRemaining",type:"uint256"}],name:"NotLastOwner",type:"error"},{inputs:[{name:"selector",type:"bytes4"}],name:"SelectorNotAllowed",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnauthorizedCallContext",type:"error"},{inputs:[],name:"UpgradeFailed",type:"error"},{inputs:[{name:"index",type:"uint256"},{name:"expectedOwner",type:"bytes"},{name:"actualOwner",type:"bytes"}],name:"WrongOwnerAtIndex",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"AddOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"RemoveOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"REPLAYABLE_NONCE_KEY",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"addOwnerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"addOwnerPublicKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"functionSelector",type:"bytes4"}],name:"canSkipChainIdValidation",outputs:[{name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"entryPoint",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"calls",type:"bytes[]"}],name:"executeWithoutChainIdValidation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHashWithoutChainId",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"$",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"owners",type:"bytes[]"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"isOwnerAddress",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"bytes"}],name:"isOwnerBytes",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"isOwnerPublicKey",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"result",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextOwnerIndex",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"}],name:"ownerAtIndex",outputs:[{name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownerCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeLastOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeOwnerAtIndex",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"removedOwnersCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"}],name:"replaySafeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"newImplementation",type:"address"},{name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"missingAccountFunds",type:"uint256"}],name:"validateUserOp",outputs:[{name:"validationData",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],si=[{inputs:[{name:"implementation_",type:"address"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"OwnerRequired",type:"error"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"createAccount",outputs:[{name:"account",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"getAddress",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initCodeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"}];class ri extends jt{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join("\n"),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}async function ii(e,{account:t=e.account,message:n}){if(!t)throw new ri({docsPath:"/docs/actions/wallet/signMessage"});const a=ls(t);if(a.signMessage)return a.signMessage({message:n});const s="string"==typeof n?Sn(n):n.raw instanceof Uint8Array?En(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,a.address]},{retryCount:0})}async function oi(e,t){const{account:n=e.account,domain:a,message:s,primaryType:r}=t;if(!n)throw new ri({docsPath:"/docs/actions/wallet/signTypedData"});const i=ls(n),o={EIP712Domain:Tr({domain:a}),...t.types};if(Sr({domain:a,message:s,primaryType:r,types:o}),i.signTypedData)return i.signTypedData({domain:a,message:s,primaryType:r,types:o});const c=function(e){const{domain:t,message:n,primaryType:a,types:s}=e,r=(e,t)=>{const n={...t};for(const t of e){const{name:e,type:a}=t;"address"===a&&(n[e]=n[e].toLowerCase())}return n},i=s.EIP712Domain&&t?r(s.EIP712Domain,t):{},o=(()=>{if("EIP712Domain"!==a)return r(s[a],n)})();return bs({domain:i,message:o,primaryType:a,types:s})}({domain:a,message:s,primaryType:r,types:o});return e.request({method:"eth_signTypedData_v4",params:[i.address,c]},{retryCount:0})}class ci extends jt{constructor({cause:e}){super("Smart Account is not deployed.",{cause:e,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(ci,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class ui extends jt{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(ui,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521}),Object.defineProperty(ui,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class di extends jt{constructor({cause:e}){super("Failed to send funds to beneficiary.",{cause:e,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty(di,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class pi extends jt{constructor({cause:e}){super("Gas value overflowed.",{cause:e,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty(pi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class li extends jt{constructor({cause:e}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:e,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(li,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class yi extends jt{constructor({cause:e,factory:t,factoryData:n,initCode:a}){super("Failed to simulate deployment for Smart Account.",{cause:e,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)","- Smart Account deployment execution reverted with an error\n",t&&`factory: ${t}`,n&&`factoryData: ${n}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty(yi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class fi extends jt{constructor({cause:e,factory:t,factoryData:n,initCode:a}){super("Smart Account initialization implementation did not create an account.",{cause:e,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid","- Smart Account initialization implementation is incorrect\n",t&&`factory: ${t}`,n&&`factoryData: ${n}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty(fi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class mi extends jt{constructor({cause:e,factory:t,factoryData:n,initCode:a,sender:s}){super("Smart Account initialization implementation does not return the expected sender.",{cause:e,metaMessages:["This could arise when:","Smart Account initialization implementation does not return a sender address\n",t&&`factory: ${t}`,n&&`factoryData: ${n}`,a&&`initCode: ${a}`,s&&`sender: ${s}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(mi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class hi extends jt{constructor({cause:e}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:e,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(hi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class bi extends jt{constructor({cause:e}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:e,name:"InternalCallOnlyError"})}}Object.defineProperty(bi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class gi extends jt{constructor({cause:e}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:e,name:"InvalidAggregatorError"})}}Object.defineProperty(gi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class wi extends jt{constructor({cause:e,nonce:t}){super("Invalid Smart Account nonce used for User Operation.",{cause:e,metaMessages:[t&&`nonce: ${t}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(wi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class vi extends jt{constructor({cause:e}){super("Bundler has not set a beneficiary address.",{cause:e,name:"InvalidBeneficiaryError"})}}Object.defineProperty(vi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class xi extends jt{constructor({cause:e}){super("Invalid fields set on User Operation.",{cause:e,name:"InvalidFieldsError"})}}Object.defineProperty(xi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ai extends jt{constructor({cause:e,paymasterAndData:t}){super("Paymaster properties provided are invalid.",{cause:e,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",t&&`paymasterAndData: ${t}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(Ai,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class Pi extends jt{constructor({cause:e}){super("Paymaster deposit for the User Operation is too low.",{cause:e,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(Pi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508}),Object.defineProperty(Pi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class Ei extends jt{constructor({cause:e}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:e,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(Ei,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class Ii extends jt{constructor({cause:e}){super("The Paymaster contract has not been deployed.",{cause:e,name:"PaymasterNotDeployedError"})}}Object.defineProperty(Ii,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class Oi extends jt{constructor({cause:e}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:e,name:"PaymasterRateLimitError"})}}Object.defineProperty(Oi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class Bi extends jt{constructor({cause:e}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:e,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(Bi,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class Di extends jt{constructor({cause:e}){super("Paymaster `postOp` function reverted.",{cause:e,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(Di,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class Si extends jt{constructor({cause:e,factory:t,factoryData:n,initCode:a}){super("Smart Account has already been deployed.",{cause:e,metaMessages:["Remove the following properties and try again:",t&&"`factory`",n&&"`factoryData`",a&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(Si,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class Ti extends jt{constructor({cause:e}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:e,name:"SignatureCheckFailedError"})}}Object.defineProperty(Ti,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class Gi extends jt{constructor({cause:e}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:e,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(Gi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class $i extends jt{constructor({cause:e}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:e,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty($i,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class Fi extends jt{constructor({cause:e}){super("User Operation expired.",{cause:e,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty(Fi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class Mi extends jt{constructor({cause:e}){super("Paymaster for User Operation expired.",{cause:e,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(Mi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class Ci extends jt{constructor({cause:e}){super("Signature provided for the User Operation is invalid.",{cause:e,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(Ci,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class Li extends jt{constructor({cause:e}){super("Signature provided for the User Operation is invalid.",{cause:e,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(Li,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class ki extends jt{constructor({cause:e}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:e,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(ki,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class Ni extends jt{constructor({cause:e}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:e,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(Ni,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class Ui extends jt{constructor({cause:e}){super("User Operation rejected with op code validation error.",{cause:e,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(Ui,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class Ri extends jt{constructor({cause:e}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:e,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(Ri,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class _i extends jt{constructor({cause:e}){super(`An error occurred while executing user operation: ${e?.shortMessage}`,{cause:e,name:"UnknownBundlerError"})}}class zi extends jt{constructor({cause:e}){super("User Operation verification gas limit exceeded.",{cause:e,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty(zi,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class ji extends jt{constructor({cause:e}){super("User Operation verification gas limit is too low.",{cause:e,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}async function Vi(e){return new Promise((t=>setTimeout(t,e)))}Object.defineProperty(ji,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});const Hi={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function qi(e){const t={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?An(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?An(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?Hi[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(t.authorizationList=e.authorizationList.map((e=>({contractAddress:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)})))),t.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof t.v){if(0n===t.v||27n===t.v)return 0;if(1n===t.v||28n===t.v)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),"legacy"===t.type&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),"eip2930"===t.type&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),"eip1559"===t.type&&delete t.maxFeePerBlobGas,t}function Wi(e){const t=e.transactions?.map((e=>"string"==typeof e?e:qi(e)));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}function Zi(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}const Yi={"0x0":"reverted","0x1":"success"};class Ki extends jt{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Xi(e,t="wei"){return function(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new Ki({value:e});let[n,a="0"]=e.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),a=a.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${a}`))&&(n=`${BigInt(n)+1n}`),a="";else if(a.length>t){const[e,s,r]=[a.slice(0,t-1),a.slice(t-1,t),a.slice(t)],i=Math.round(Number(`${s}.${r}`));a=i>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${i}`,a.length>t&&(a=a.slice(1),n=`${BigInt(n)+1n}`),a=a.slice(0,t)}else a=a.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${a}`)}(e,vs[t])}class Ji extends jt{constructor(e,{callData:t,callGasLimit:n,docsPath:a,factory:s,factoryData:r,initCode:i,maxFeePerGas:o,maxPriorityFeePerGas:c,nonce:u,paymaster:d,paymasterAndData:p,paymasterData:l,paymasterPostOpGasLimit:y,paymasterVerificationGasLimit:f,preVerificationGas:m,sender:h,signature:b,verificationGasLimit:g}){const w=Bs({callData:t,callGasLimit:n,factory:s,factoryData:r,initCode:i,maxFeePerGas:void 0!==o&&`${Ps(o)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${Ps(c)} gwei`,nonce:u,paymaster:d,paymasterAndData:p,paymasterData:l,paymasterPostOpGasLimit:y,paymasterVerificationGasLimit:f,preVerificationGas:m,sender:h,signature:b,verificationGasLimit:g});super(e.shortMessage,{cause:e,docsPath:a,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",w].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Qi extends jt{constructor({hash:e}){super(`User Operation receipt with hash "${e}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class eo extends jt{constructor({hash:e}){super(`User Operation with hash "${e}" could not be found.`,{name:"UserOperationNotFoundError"})}}class to extends jt{constructor({hash:e}){super(`Timed out while waiting for User Operation with hash "${e}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}const no=[ui,xi,Pi,Oi,Bi,Ti,$i,Ri,ki,Ni,Ui];function ao(e,{calls:t,docsPath:n,...a}){const s=(()=>{const n=function(e,t){const n=(e.details||"").toLowerCase();if(ci.message.test(n))return new ci({cause:e});if(di.message.test(n))return new di({cause:e});if(pi.message.test(n))return new pi({cause:e});if(li.message.test(n))return new li({cause:e});if(yi.message.test(n))return new yi({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(fi.message.test(n))return new fi({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(mi.message.test(n))return new mi({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(hi.message.test(n))return new hi({cause:e});if(bi.message.test(n))return new bi({cause:e});if(wi.message.test(n))return new wi({cause:e,nonce:t.nonce});if(gi.message.test(n))return new gi({cause:e});if(vi.message.test(n))return new vi({cause:e});if(Ai.message.test(n))return new Ai({cause:e});if(Pi.message.test(n))return new Pi({cause:e});if(Ei.message.test(n))return new Ei({cause:e});if(Ii.message.test(n))return new Ii({cause:e});if(Di.message.test(n))return new Di({cause:e});if(Gi.message.test(n))return new Gi({cause:e});if(Si.message.test(n))return new Si({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Fi.message.test(n))return new Fi({cause:e});if(Mi.message.test(n))return new Mi({cause:e});if(Li.message.test(n))return new Li({cause:e});if(Ci.message.test(n))return new Ci({cause:e});if(zi.message.test(n))return new zi({cause:e});if(ji.message.test(n))return new ji({cause:e});const a=e.walk((e=>no.some((t=>t.code===e.code))));if(a){if(a.code===ui.code)return new ui({cause:e,message:a.details});if(a.code===xi.code)return new xi({cause:e});if(a.code===Pi.code)return new Pi({cause:e});if(a.code===Oi.code)return new Oi({cause:e});if(a.code===Bi.code)return new Bi({cause:e});if(a.code===Ti.code)return new Ti({cause:e});if(a.code===$i.code)return new $i({cause:e});if(a.code===Ri.code)return new Ri({cause:e});if(a.code===ki.code)return new ki({cause:e});if(a.code===Ni.code)return new Ni({cause:e});if(a.code===Ui.code)return new Ui({cause:e})}return new _i({cause:e})}(e,a);if(t&&n instanceof ui){const e=function(e){let t;return e.walk((e=>{const n=e;if("string"==typeof n.data||"string"==typeof n.data?.revertData||!(n instanceof jt)&&"string"==typeof n.message){const e=(n.data?.revertData||n.data||n.message).match?.(/(0x[A-Za-z0-9]*)/);if(e)return t=e[1],!0}return!1})),t}(n),a=t?.filter((e=>e.abi||e.data));if(e&&a.length>0)return function(e){const{calls:t,revertData:n}=e,{abi:a,functionName:s,args:r,to:i}=(()=>{const e=t?.filter((e=>Boolean(e.abi)));if(1===e.length)return e[0];const a=e.filter((e=>{try{return Boolean(hs({abi:e.abi,data:n}))}catch{return!1}}));return 1===a.length?a[0]:{abi:[],functionName:e.reduce(((e,t)=>`${e?`${e} | `:""}${t.functionName}`),""),args:void 0,to:void 0}})(),o="0x"===n?new Fs({functionName:s}):new $s({abi:a,data:n,functionName:s});return new Gs(o,{abi:a,args:r,contractAddress:i,functionName:s})}({calls:a,revertData:e})}return n})();return new Ji(s,{docsPath:n,...a})}function so(e){const t={};return void 0!==e.callData&&(t.callData=e.callData),void 0!==e.callGasLimit&&(t.callGasLimit=Bn(e.callGasLimit)),void 0!==e.factory&&(t.factory=e.factory),void 0!==e.factoryData&&(t.factoryData=e.factoryData),void 0!==e.initCode&&(t.initCode=e.initCode),void 0!==e.maxFeePerGas&&(t.maxFeePerGas=Bn(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=Bn(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(t.nonce=Bn(e.nonce)),void 0!==e.paymaster&&(t.paymaster=e.paymaster),void 0!==e.paymasterAndData&&(t.paymasterAndData=e.paymasterAndData||"0x"),void 0!==e.paymasterData&&(t.paymasterData=e.paymasterData),void 0!==e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=Bn(e.paymasterPostOpGasLimit)),void 0!==e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=Bn(e.paymasterVerificationGasLimit)),void 0!==e.preVerificationGas&&(t.preVerificationGas=Bn(e.preVerificationGas)),void 0!==e.sender&&(t.sender=e.sender),void 0!==e.signature&&(t.signature=e.signature),void 0!==e.verificationGasLimit&&(t.verificationGasLimit=Bn(e.verificationGasLimit)),t}class ro extends jt{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class io extends jt{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class oo extends jt{constructor({blockHash:e,blockNumber:t}){let n="Block";e&&(n=`Block at hash "${e}"`),t&&(n=`Block at number "${t}"`),super(`${n} could not be found.`,{name:"BlockNotFoundError"})}}async function co(e,{blockHash:t,blockNumber:n,blockTag:a,includeTransactions:s}={}){const r=a??"latest",i=s??!1,o=void 0!==n?Bn(n):void 0;let c=null;if(c=t?await e.request({method:"eth_getBlockByHash",params:[t,i]},{dedupe:!0}):await e.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:Boolean(o)}),!c)throw new oo({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||Wi)(c)}async function uo(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function po(e,t){return async function(e,t){const{block:n,chain:a=e.chain,request:s,type:r="eip1559"}=t||{},i=await(async()=>"function"==typeof a?.fees?.baseFeeMultiplier?a.fees.baseFeeMultiplier({block:n,client:e,request:s}):a?.fees?.baseFeeMultiplier??1.2)();if(i<1)throw new ro;const o=10**(i.toString().split(".")[1]?.length??0),c=e=>e*BigInt(Math.ceil(i*o))/BigInt(o),u=n||await _s(e,co,"getBlock")({});if("function"==typeof a?.fees?.estimateFeesPerGas){const t=await a.fees.estimateFeesPerGas({block:n,client:e,multiply:c,request:s,type:r});if(null!==t)return t}if("eip1559"===r){if("bigint"!=typeof u.baseFeePerGas)throw new io;const t="bigint"==typeof s?.maxPriorityFeePerGas?s.maxPriorityFeePerGas:await async function(e,t){const{block:n,chain:a=e.chain,request:s}=t||{};try{const t=a?.fees?.maxPriorityFeePerGas??a?.fees?.defaultPriorityFee;if("function"==typeof t){const a=n||await _s(e,co,"getBlock")({}),r=await t({block:a,client:e,request:s});if(null===r)throw new Error;return r}return void 0!==t?t:xn(await e.request({method:"eth_maxPriorityFeePerGas"}))}catch{const[t,a]=await Promise.all([n?Promise.resolve(n):_s(e,co,"getBlock")({}),_s(e,uo,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new io;const s=a-t.baseFeePerGas;return s<0n?0n:s}}(e,{block:u,chain:a,request:s}),n=c(u.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??n+t,maxPriorityFeePerGas:t}}const d=s?.gasPrice??c(await _s(e,uo,"getGasPrice")({}));return{gasPrice:d}}(e,t)}async function lo(e){return An(await e.request({method:"eth_chainId"},{dedupe:!0}))}async function yo(e,t){const{chainId:n,entryPointAddress:a,context:s,...r}=t,i=so(r),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterData",params:[{...i,callGasLimit:i.callGasLimit??"0x0",verificationGasLimit:i.verificationGasLimit??"0x0",preVerificationGas:i.preVerificationGas??"0x0"},a,Bn(n),s]});return{...u,...o&&{paymasterPostOpGasLimit:xn(o)},...c&&{paymasterVerificationGasLimit:xn(c)}}}async function fo(e,t){const{chainId:n,entryPointAddress:a,context:s,...r}=t,i=so(r),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterStubData",params:[{...i,callGasLimit:i.callGasLimit??"0x0",verificationGasLimit:i.verificationGasLimit??"0x0",preVerificationGas:i.preVerificationGas??"0x0"},a,Bn(n),s]});return{...u,...o&&{paymasterPostOpGasLimit:xn(o)},...c&&{paymasterVerificationGasLimit:xn(c)}}}const mo=["factory","fees","gas","paymaster","nonce","signature"];async function ho(e,t){const n=t,{account:a=e.account,parameters:s=mo,stateOverride:r}=n;if(!a)throw new ri;const i=ls(a),o=e,c=n.paymaster??o?.paymaster,u="string"==typeof c?c:void 0,{getPaymasterStubData:d,getPaymasterData:p}=(()=>{if(!0===c)return{getPaymasterStubData:e=>_s(o,fo,"getPaymasterStubData")(e),getPaymasterData:e=>_s(o,yo,"getPaymasterData")(e)};if("object"==typeof c){const{getPaymasterStubData:e,getPaymasterData:t}=c;return{getPaymasterStubData:t&&e?e:t,getPaymasterData:t&&e?t:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),l=n.paymasterContext?n.paymasterContext:o?.paymasterContext;let y={...n,paymaster:u,sender:i.address};const[f,m,h,b,g]=await Promise.all([(async()=>n.calls?i.encodeCalls(n.calls.map((e=>{const t=e;return"abi"in t?{data:ps(t),to:t.to,value:t.value}:t}))):n.callData)(),(async()=>{if(!s.includes("factory"))return;if(n.initCode)return{initCode:n.initCode};if(n.factory&&n.factoryData)return{factory:n.factory,factoryData:n.factoryData};const{factory:e,factoryData:t}=await i.getFactoryArgs();return"0.6"===i.entryPoint.version?{initCode:e&&t?ea([e,t]):void 0}:{factory:e,factoryData:t}})(),(async()=>{if(s.includes("fees")){if("bigint"==typeof n.maxFeePerGas&&"bigint"==typeof n.maxPriorityFeePerGas)return y;if(o?.userOperation?.estimateFeesPerGas){const e=await o.userOperation.estimateFeesPerGas({account:i,bundlerClient:o,userOperation:y});return{...y,...e}}try{const t=o.client??e,a=await _s(t,po,"estimateFeesPerGas")({chain:t.chain,type:"eip1559"});return{maxFeePerGas:"bigint"==typeof n.maxFeePerGas?n.maxFeePerGas:BigInt(Math.max(Number(2n*a.maxFeePerGas),Number(Xi("3")))),maxPriorityFeePerGas:"bigint"==typeof n.maxPriorityFeePerGas?n.maxPriorityFeePerGas:BigInt(Math.max(Number(2n*a.maxPriorityFeePerGas),Number(Xi("1"))))}}catch{return}}})(),(async()=>{if(s.includes("nonce"))return"bigint"==typeof n.nonce?n.nonce:i.getNonce()})(),(async()=>{if(s.includes("signature"))return void 0!==n.signature?n.signature:i.getStubSignature()})()]);let w;async function v(){if(w)return w;if(e.chain)return e.chain.id;const t=await _s(e,lo,"getChainId")({});return w=t,w}void 0!==f&&(y.callData=f),void 0!==m&&(y={...y,...m}),void 0!==h&&(y={...y,...h}),void 0!==b&&(y.nonce=b),void 0!==g&&(y.signature=g),"0.6"!==i.entryPoint.version||y.initCode||(y.initCode="0x");let x=!1;if(s.includes("paymaster")&&d&&!u&&!n.paymasterAndData){const{isFinal:e=!1,sponsor:t,...n}=await d({chainId:await v(),entryPointAddress:i.entryPoint.address,context:l,...y});x=e,y={...y,...n}}if("0.6"!==i.entryPoint.version||y.paymasterAndData||(y.paymasterAndData="0x"),s.includes("gas")){if(i.userOperation?.estimateGas){const e=await i.userOperation.estimateGas(y);y={...y,...e}}if(void 0===y.callGasLimit||void 0===y.preVerificationGas||void 0===y.verificationGasLimit||y.paymaster&&void 0===y.paymasterPostOpGasLimit||y.paymaster&&void 0===y.paymasterVerificationGasLimit){const e=await _s(o,bo,"estimateUserOperationGas")({account:i,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:r,...y.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...y});y={...y,callGasLimit:y.callGasLimit??e.callGasLimit,preVerificationGas:y.preVerificationGas??e.preVerificationGas,verificationGasLimit:y.verificationGasLimit??e.verificationGasLimit,paymasterPostOpGasLimit:y.paymasterPostOpGasLimit??e.paymasterPostOpGasLimit,paymasterVerificationGasLimit:y.paymasterVerificationGasLimit??e.paymasterVerificationGasLimit}}}if(s.includes("paymaster")&&p&&!u&&!n.paymasterAndData&&!x){const e=await p({chainId:await v(),entryPointAddress:i.entryPoint.address,context:l,...y});y={...y,...e}}return delete y.calls,delete y.parameters,delete y.paymasterContext,"string"!=typeof y.paymaster&&delete y.paymaster,y}async function bo(e,t){const{account:n=e.account,entryPointAddress:a,stateOverride:s}=t;if(!n&&!t.sender)throw new ri;const r=n?ls(n):void 0,i=hr(s),o=r?await _s(e,ho,"prepareUserOperation")({...t,parameters:["factory","nonce","paymaster","signature"]}):t;try{const t=[so(o),a??r?.entryPoint?.address];return function(e){const t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}(await e.request({method:"eth_estimateUserOperationGas",params:i?[...t,i]:[...t]}))}catch(e){const n=t.calls;throw ao(e,{...o,...n?{calls:n}:{}})}}function go(e){const t={...e};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}function wo(e){const t={...e};return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map((e=>Zi(e)))),e.receipt&&(t.receipt=function(e){const t={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map((e=>Zi(e))):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?An(e.transactionIndex):null,status:e.status?Yi[e.status]:null,type:e.type?Hi[e.type]||e.type:null};return e.blobGasPrice&&(t.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(t.blobGasUsed=BigInt(e.blobGasUsed)),t}(t.receipt)),t}async function vo(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!n)throw new Qi({hash:t});return wo(n)}const xo=new Map,Ao=new Map;let Po=0;function Eo(e,t,n){const a=++Po,s=()=>xo.get(e)||[],r=()=>{const t=Ao.get(e);1===s().length&&t&&t(),(()=>{const t=s();xo.set(e,t.filter((e=>e.id!==a)))})()},i=s();if(xo.set(e,[...i,{id:a,fns:t}]),i&&i.length>0)return r;const o={};for(const e in t)o[e]=(...t)=>{const n=s();if(0!==n.length)for(const a of n)a.fns[e]?.(...t)};const c=n(o);return"function"==typeof c&&Ao.set(e,c),r}function Io(e,t){const{hash:n,pollingInterval:a=e.pollingInterval,retryCount:s,timeout:r=12e4}=t;let i=0;const o=bs(["waitForUserOperationReceipt",e.uid,n]);return new Promise(((t,c)=>{const u=Eo(o,{resolve:t,reject:c},(t=>{const o=e=>{c(),e(),u()},c=function(e,{emitOnBegin:t,initialWaitTime:n,interval:a}){let s=!0;const r=()=>s=!1;return(async()=>{let i;t&&(i=await e({unpoll:r}));const o=await(n?.(i))??a;await Vi(o);const c=async()=>{s&&(await e({unpoll:r}),await Vi(a),c())};c()})(),r}((async()=>{s&&i>=s&&o((()=>t.reject(new to({hash:n}))));try{const a=await _s(e,vo,"getUserOperationReceipt")({hash:n});o((()=>t.resolve(a)))}catch(e){const n=e;"UserOperationReceiptNotFoundError"!==n.name&&o((()=>t.reject(n)))}i++}),{emitOnBegin:!0,interval:a});return r&&setTimeout((()=>o((()=>t.reject(new to({hash:n}))))),r),c}))}))}function Oo(e){return{estimateUserOperationGas:t=>bo(e,t),getChainId:()=>lo(e),getSupportedEntryPoints:()=>function(e){return e.request({method:"eth_supportedEntryPoints"})}(e),getUserOperation:t=>async function(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!n)throw new eo({hash:t});const{blockHash:a,blockNumber:s,entryPoint:r,transactionHash:i,userOperation:o}=n;return{blockHash:a,blockNumber:BigInt(s),entryPoint:r,transactionHash:i,userOperation:go(o)}}(e,t),getUserOperationReceipt:t=>vo(e,t),prepareUserOperation:t=>ho(e,t),sendUserOperation:t=>async function(e,t){const{account:n=e.account,entryPointAddress:a}=t;if(!n&&!t.sender)throw new ri;const s=n?ls(n):void 0,r=s?await _s(e,ho,"prepareUserOperation")(t):t,i=t.signature||await(s?.signUserOperation(r)),o=so({...r,signature:i});try{return await e.request({method:"eth_sendUserOperation",params:[o,a??s?.entryPoint.address]},{retryCount:0})}catch(e){const n=t.calls;throw ao(e,{...r,...n?{calls:n}:{},signature:i})}}(e,t),waitForUserOperationReceipt:t=>Io(e,t)}}function Bo(e){return{getPaymasterData:t=>yo(e,t),getPaymasterStubData:t=>fo(e,t)}}const Do="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",So="0x0000000071727De22E5E9d8BAf0edAc6f37da032",To=async(e,t)=>{const{address:n,entryPointAddress:a,key:s=BigInt(0)}=t;return await _s(e,wr,"readContract")({address:a,abi:[{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getNonce",args:[n,s]})},Go=[{inputs:[{internalType:"address",name:"_entryPoint",type:"address"},{internalType:"bytes",name:"initCode",type:"bytes"}],stateMutability:"payable",type:"constructor"}],$o=async(e,s)=>{const{initCode:r,entryPointAddress:i,factory:o,factoryData:c}=s;if(!r&&!o&&!c)throw new Error("Either `initCode` or `factory` and `factoryData` must be provided");const u=r||t([o,c]),{data:d}=await _s(e,gr,"call")({data:n({abi:Go,bytecode:"0x608060405260405161058a38038061058a83398181016040528101906100259190610341565b5f808373ffffffffffffffffffffffffffffffffffffffff16639b249f6960e01b8460405160240161005791906103ed565b604051602081830303815290604052907bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19166020820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff83818316178352505050506040516100c19190610447565b5f604051808303815f865af19150503d805f81146100fa576040519150601f19603f3d011682016040523d82523d5f602084013e6100ff565b606091505b50915091505f8261015f576004825111156101245760248201519050805f526014600cf35b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610156906104dd565b60405180910390fd5b6040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101919061056b565b60405180910390fd5b5f604051905090565b5f80fd5b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6101d4826101ab565b9050919050565b6101e4816101ca565b81146101ee575f80fd5b50565b5f815190506101ff816101db565b92915050565b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6102538261020d565b810181811067ffffffffffffffff821117156102725761027161021d565b5b80604052505050565b5f61028461019a565b9050610290828261024a565b919050565b5f67ffffffffffffffff8211156102af576102ae61021d565b5b6102b88261020d565b9050602081019050919050565b8281835e5f83830152505050565b5f6102e56102e084610295565b61027b565b90508281526020810184848401111561030157610300610209565b5b61030c8482856102c5565b509392505050565b5f82601f83011261032857610327610205565b5b81516103388482602086016102d3565b91505092915050565b5f8060408385031215610357576103566101a3565b5b5f610364858286016101f1565b925050602083015167ffffffffffffffff811115610385576103846101a7565b5b61039185828601610314565b9150509250929050565b5f81519050919050565b5f82825260208201905092915050565b5f6103bf8261039b565b6103c981856103a5565b93506103d98185602086016102c5565b6103e28161020d565b840191505092915050565b5f6020820190508181035f83015261040581846103b5565b905092915050565b5f81905092915050565b5f6104218261039b565b61042b818561040d565b935061043b8185602086016102c5565b80840191505092915050565b5f6104528284610417565b915081905092915050565b5f82825260208201905092915050565b7f67657453656e64657241646472657373206661696c656420776974686f7574205f8201527f6461746100000000000000000000000000000000000000000000000000000000602082015250565b5f6104c760248361045d565b91506104d28261046d565b604082019050919050565b5f6020820190508181035f8301526104f4816104bb565b9050919050565b7f67657453656e6465724164647265737320646964206e6f7420726576657274205f8201527f6173206578706563746564000000000000000000000000000000000000000000602082015250565b5f610555602b8361045d565b9150610560826104fb565b604082019050919050565b5f6020820190508181035f83015261058281610549565b905091905056fe",args:[i,u]})});if(!d)throw new Error("Failed to get sender address");return a(d)};async function Fo({owner:e,address:t}){if("type"in e&&"local"===e.type)return e;let n;if("request"in e){if(!t)try{[t]=await e.request({method:"eth_requestAccounts"})}catch{[t]=await e.request({method:"eth_accounts"})}if(!t)throw new Error("address is required");n=s({account:t,transport:r(e)})}return n||(n=e),function(e){if("string"==typeof e){if(!Rn(e,{strict:!1}))throw new dn({address:e});return{address:e,type:"json-rpc"}}if(!Rn(e.address,{strict:!1}))throw new dn({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,experimental_signAuthorization:e.experimental_signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}({address:n.account.address,signMessage:async({message:e})=>n.signMessage({message:e}),signTypedData:async e=>_s(n,oi,"signTypedData")(e),async signTransaction(e){throw new Error("Smart account signer doesn't need to sign transactions")}})}const Mo=async(e,t=BigInt(0))=>{if(!e)throw new Error("Owner account not found");return i({abi:[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"salt",type:"uint256"}],name:"createAccount",outputs:[{internalType:"contract LightAccount",name:"ret",type:"address"}],stateMutability:"nonpayable",type:"function"}],functionName:"createAccount",args:[e,t]})};async function Co(e,t,n,a){return e.signTypedData({domain:{chainId:Number(t),name:"LightAccount",verifyingContract:n,version:"1"},types:{LightAccountMessage:[{name:"message",type:"bytes"}]},message:{message:a},primaryType:"LightAccountMessage"})}const Lo={"1.1.0":{factoryAddress:"0x00004EC70002a32400f8ae005A26081065620D20"},"2.0.0":{factoryAddress:"0x0000000000400CdFef5E2714E63d8040b700BC24"}};var ko;async function No(e){const{version:n,factoryAddress:a,address:s,owner:r,client:u,index:d=BigInt(0),nonceKey:p}=e,l=await Fo({owner:r}),y={address:e.entryPoint?.address??So,abi:"0.6"===(e.entryPoint?.version??"0.7")?Hr:qr,version:e.entryPoint?.version??"0.7"},{factoryAddress:f}=((e,{factoryAddress:t})=>({factoryAddress:t??Lo[e].factoryAddress}))(n,{factoryAddress:a});let m,h=s;const b=async()=>m||(m=u.chain?u.chain.id:await _s(u,lo,"getChainId")({}),m),g=async()=>({factory:f,factoryData:await Mo(l.address,d)});return Jr({client:u,entryPoint:y,getFactoryArgs:g,async getAddress(){if(h)return h;const{factory:e,factoryData:t}=await g();return h=await $o(u,{factory:e,factoryData:t,entryPointAddress:y.address}),h},async encodeCalls(e){if(e.length>1)return i({abi:[{inputs:[{internalType:"address[]",name:"dest",type:"address[]"},{internalType:"uint256[]",name:"value",type:"uint256[]"},{internalType:"bytes[]",name:"func",type:"bytes[]"}],name:"executeBatch",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"executeBatch",args:[e.map((e=>e.to)),e.map((e=>e.value??0n)),e.map((e=>e.data??"0x"))]});const t=0===e.length?void 0:e[0];if(!t)throw new Error("No calls to encode");return i({abi:[{inputs:[{internalType:"address",name:"dest",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"func",type:"bytes"}],name:"execute",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"execute",args:[t.to,t.value??0n,t.data??"0x"]})},async getNonce(e){return To(u,{address:await this.getAddress(),entryPointAddress:y.address,key:p??e?.key})},async getStubSignature(){const e="0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c";switch(n){case"1.1.0":return e;case"2.0.0":return t([ko.EOA,e]);default:throw new Error("Unknown Light Account version")}},async sign({hash:e}){return this.signMessage({message:e})},async signMessage({message:e}){const a=await Co(l,await b(),await this.getAddress(),o(e));switch(n){case"1.1.0":return a;case"2.0.0":return t([ko.EOA,a]);default:throw new Error("Unknown Light Account version")}},async signTypedData(e){const a=await Co(l,await b(),await this.getAddress(),c(e));switch(n){case"1.1.0":return a;case"2.0.0":return t([ko.EOA,a]);default:throw new Error("Unknown Light Account version")}},async signUserOperation(e){const{chainId:a=await b(),...s}=e,r=Wr({userOperation:{...s,signature:"0x"},entryPointAddress:y.address,entryPointVersion:y.version,chainId:a}),i=await ii(u,{account:l,message:{raw:r}});switch(n){case"1.1.0":return i;case"2.0.0":return t([ko.EOA,i]);default:throw new Error("Unknown Light Account version")}}})}function Uo(e){switch(e){case"call":return"0x00";case"batchcall":return"0x01";case"delegatecall":return"0xff"}}function Ro({type:e,revertOnError:t,selector:n,context:a}){return u(["bytes1","bytes1","bytes4","bytes4","bytes22"],[d(p(Uo(e),{size:1})),d(p(t?"0x01":"0x00",{size:1})),d(p("0x0",{size:4})),d(p(n??"0x",{size:4})),d(p(a??"0x",{size:22}))])}function _o({mode:e,callData:t}){if(t.length>1&&"batchcall"!==e?.type)throw new Error(`mode ${JSON.stringify(e)} does not supported for batchcall calldata`);const n=[{type:"function",name:"execute",inputs:[{name:"execMode",type:"bytes32",internalType:"ExecMode"},{name:"executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"}];if(t.length>1)return i({abi:n,functionName:"execute",args:[Ro(e),l([{name:"executionBatch",type:"tuple[]",components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"callData",type:"bytes"}]}],[t.map((e=>({target:e.to,value:e.value??0n,callData:e.data??"0x"})))])]});const a=0===t.length?void 0:t[0];if(!a)throw new Error("No calls to encode");return i({abi:n,functionName:"execute",args:[Ro(e),y([a.to,d(a.value??0n,{size:32}),a.data??"0x"])]})}!function(e){e.EOA="0x00"}(ko||(ko={}));const zo=[{inputs:[{internalType:"bytes",name:"transactions",type:"bytes"}],name:"multiSend",outputs:[],stateMutability:"payable",type:"function"}],jo=[{type:"function",name:"initSafe7579",inputs:[{name:"safe7579",type:"address",internalType:"address"},{name:"executors",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"fallbacks",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"hooks",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"attesters",type:"address[]",internalType:"address[]"},{name:"threshold",type:"uint8",internalType:"uint8"}],outputs:[],stateMutability:"nonpayable"}],Vo=[{type:"function",name:"preValidationSetup",inputs:[{name:"initHash",type:"bytes32",internalType:"bytes32"},{name:"to",type:"address",internalType:"address"},{name:"preInit",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"}],Ho=[{inputs:[{internalType:"address[]",name:"modules",type:"address[]"}],name:"enableModules",outputs:[],stateMutability:"nonpayable",type:"function"}],qo=[{inputs:[{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint256",name:"_threshold",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"address",name:"fallbackHandler",type:"address"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"uint256",name:"payment",type:"uint256"},{internalType:"address payable",name:"paymentReceiver",type:"address"}],name:"setup",outputs:[],stateMutability:"nonpayable",type:"function"}],Wo=[{inputs:[{internalType:"address",name:"_singleton",type:"address"},{internalType:"bytes",name:"initializer",type:"bytes"},{internalType:"uint256",name:"saltNonce",type:"uint256"}],name:"createProxyWithNonce",outputs:[{internalType:"contract SafeProxy",name:"proxy",type:"address"}],stateMutability:"nonpayable",type:"function"}],Zo=[{type:"function",name:"setupSafe",inputs:[{name:"initData",type:"tuple",internalType:"struct Safe7579Launchpad.InitData",components:[{name:"singleton",type:"address",internalType:"address"},{name:"owners",type:"address[]",internalType:"address[]"},{name:"threshold",type:"uint256",internalType:"uint256"},{name:"setupTo",type:"address",internalType:"address"},{name:"setupData",type:"bytes",internalType:"bytes"},{name:"safe7579",type:"address",internalType:"contract ISafe7579"},{name:"validators",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"}],Yo=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint8",name:"operation",type:"uint8"}],name:"executeUserOpWithErrorString",outputs:[],stateMutability:"nonpayable",type:"function"}],Ko={SafeOp:[{type:"address",name:"safe"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"uint256",name:"callGasLimit"},{type:"uint256",name:"verificationGasLimit"},{type:"uint256",name:"preVerificationGas"},{type:"uint256",name:"maxFeePerGas"},{type:"uint256",name:"maxPriorityFeePerGas"},{type:"bytes",name:"paymasterAndData"},{type:"uint48",name:"validAfter"},{type:"uint48",name:"validUntil"},{type:"address",name:"entryPoint"}]},Xo={SafeOp:[{type:"address",name:"safe"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"uint128",name:"verificationGasLimit"},{type:"uint128",name:"callGasLimit"},{type:"uint256",name:"preVerificationGas"},{type:"uint128",name:"maxPriorityFeePerGas"},{type:"uint128",name:"maxFeePerGas"},{type:"bytes",name:"paymasterAndData"},{type:"uint48",name:"validAfter"},{type:"uint48",name:"validUntil"},{type:"address",name:"entryPoint"}]},Jo={"1.4.1":{.6:{SAFE_MODULE_SETUP_ADDRESS:"0x8EcD4ec46D4D2a6B64fE960B3D64e8B94B2234eb",SAFE_4337_MODULE_ADDRESS:"0xa581c4A4DB7175302464fF3C06380BC3270b4037",SAFE_PROXY_FACTORY_ADDRESS:"0x4e1DCf7AD4e460CfD30791CCC4F9c8a4f820ec67",SAFE_SINGLETON_ADDRESS:"0x41675C099F32341bf84BFc5382aF534df5C7461a",MULTI_SEND_ADDRESS:"0x38869bf66a61cF6bDB996A6aE40D5853Fd43B526",MULTI_SEND_CALL_ONLY_ADDRESS:"0x9641d764fc13c8B624c04430C7356C1C7C8102e2"},.7:{SAFE_MODULE_SETUP_ADDRESS:"0x2dd68b007B46fBe91B9A7c3EDa5A7a1063cB5b47",SAFE_4337_MODULE_ADDRESS:"0x75cf11467937ce3F2f357CE24ffc3DBF8fD5c226",SAFE_PROXY_FACTORY_ADDRESS:"0x4e1DCf7AD4e460CfD30791CCC4F9c8a4f820ec67",SAFE_SINGLETON_ADDRESS:"0x41675C099F32341bf84BFc5382aF534df5C7461a",MULTI_SEND_ADDRESS:"0x38869bf66a61cF6bDB996A6aE40D5853Fd43B526",MULTI_SEND_CALL_ONLY_ADDRESS:"0x9641d764fc13c8B624c04430C7356C1C7C8102e2"}}},Qo=(e,t)=>{let n=Number.parseInt(t.slice(-2),16);if(![0,1,27,28].includes(n))throw new Error("Invalid signature");return"eth_sign"===e&&(n<27&&(n+=27),n+=4),"eth_signTypedData"===e&&n<27&&(n+=27),t.slice(0,-2)+n.toString(16)},ec=e=>{const t=e;return"string"==typeof t||t.raw?o(t):c(e)},tc=e=>{const t=`0x${e.map((e=>(e=>u(["uint8","address","uint256","uint256","bytes"],[e.operation,e.to,e.value,BigInt(e.data.slice(2).length/2),e.data]).slice(2))(e))).join("")}`;return i({abi:zo,functionName:"multiSend",args:[t]})},nc=({safe4337ModuleAddress:e,safeSingletonAddress:t,erc7579LaunchpadAddress:n,owner:a,validators:s,executors:r,fallbacks:o,hooks:c,attesters:u,attestersThreshold:d})=>({singleton:t,owners:[a],threshold:BigInt(1),setupTo:n,setupData:i({abi:jo,functionName:"initSafe7579",args:[e,r.map((e=>({module:e.address,initData:e.context}))),o.map((e=>({module:e.address,initData:e.context}))),c.map((e=>({module:e.address,initData:e.context}))),u,d]}),safe7579:e,validators:s}),ac=async({owner:e,safeModuleSetupAddress:t,safe4337ModuleAddress:n,multiSendAddress:a,safeSingletonAddress:s,erc7579LaunchpadAddress:r,setupTransactions:o=[],safeModules:c=[],validators:u=[],executors:d=[],fallbacks:p=[],hooks:y=[],attesters:f=[],attestersThreshold:m=0,paymentToken:b=g,payment:w=BigInt(0),paymentReceiver:v=g})=>{if(r){const t=nc({safe4337ModuleAddress:n,safeSingletonAddress:s,erc7579LaunchpadAddress:r,owner:e,validators:u,executors:d,fallbacks:p,hooks:y,attesters:f,attestersThreshold:m}),a=h(l([{internalType:"address",name:"singleton",type:"address"},{internalType:"address[]",name:"owners",type:"address[]"},{internalType:"uint256",name:"threshold",type:"uint256"},{internalType:"address",name:"setupTo",type:"address"},{internalType:"bytes",name:"setupData",type:"bytes"},{internalType:"contract ISafe7579",name:"safe7579",type:"address"},{internalType:"struct ModuleInit[]",name:"validators",type:"tuple[]",components:[{internalType:"address",name:"module",type:"address"},{internalType:"bytes",name:"initData",type:"bytes"}]}],[t.singleton,t.owners,t.threshold,t.setupTo,t.setupData,t.safe7579,t.validators.map((e=>({module:e.address,initData:e.context})))]));return i({abi:Vo,functionName:"preValidationSetup",args:[a,g,"0x"]})}const x=tc([{to:t,data:i({abi:Ho,functionName:"enableModules",args:[[n,...c]]}),value:BigInt(0),operation:1},...o.map((e=>({...e,operation:0})))]);return i({abi:qo,functionName:"setup",args:[[e],BigInt(1),a,x,n,b,w,v]})};const sc=async({owner:e,safeModuleSetupAddress:t,safe4337ModuleAddress:n,safeSingletonAddress:a,erc7579LaunchpadAddress:s,multiSendAddress:r,paymentToken:o,payment:c,paymentReceiver:u,saltNonce:d=BigInt(0),setupTransactions:p=[],safeModules:l=[],validators:y=[],executors:f=[],fallbacks:m=[],hooks:h=[],attesters:b=[],attestersThreshold:g=0})=>{if(!e)throw new Error("Owner account not found");const w=await ac({owner:e,safeModuleSetupAddress:t,safe4337ModuleAddress:n,multiSendAddress:r,setupTransactions:p,safeSingletonAddress:a,safeModules:l,erc7579LaunchpadAddress:s,validators:y,executors:f,fallbacks:m,hooks:h,attesters:b,attestersThreshold:g,paymentToken:o,payment:c,paymentReceiver:u});return i({abi:Wo,functionName:"createProxyWithNonce",args:[s??a,w,d]})};function rc(e){return void 0!==e.erc7579LaunchpadAddress}const ic=[{inputs:[],name:"proxyCreationCode",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"pure",type:"function"}];async function oc(e){const{client:n,owners:a,address:s,version:r,safe4337ModuleAddress:o,safeProxyFactoryAddress:l,safeSingletonAddress:g,erc7579LaunchpadAddress:w,saltNonce:v=BigInt(0),validUntil:x=0,validAfter:A=0,nonceKey:P,paymentToken:E,payment:I,paymentReceiver:O}=e,B=await Fo({owner:a[0]}),D={address:e.entryPoint?.address??So,abi:"0.6"===(e.entryPoint?.version??"0.7")?Hr:qr,version:e.entryPoint?.version??"0.7"};let S,T,G,$,F=[],M=[],C=[],L=[],k=[],N=[],U=0;rc(e)||(S=e.safeModuleSetupAddress,T=e.multiSendAddress,G=e.multiSendCallOnlyAddress,$=e.safeModules,F=e.setupTransactions??[]),rc(e)&&(M=e.validators??[],C=e.executors??[],L=e.fallbacks??[],k=e.hooks??[],N=e.attesters??[],U=e.attestersThreshold??0);const{safeModuleSetupAddress:R,safe4337ModuleAddress:_,safeProxyFactoryAddress:z,safeSingletonAddress:j,multiSendAddress:V,multiSendCallOnlyAddress:H}=((e,t,{addModuleLibAddress:n,safeModuleSetupAddress:a,safe4337ModuleAddress:s,safeProxyFactoryAddress:r,safeSingletonAddress:i,multiSendAddress:o,multiSendCallOnlyAddress:c})=>({safeModuleSetupAddress:a??n??Jo[e][t].SAFE_MODULE_SETUP_ADDRESS,safe4337ModuleAddress:s??Jo[e][t].SAFE_4337_MODULE_ADDRESS,safeProxyFactoryAddress:r??Jo[e][t].SAFE_PROXY_FACTORY_ADDRESS,safeSingletonAddress:i??Jo[e][t].SAFE_SINGLETON_ADDRESS,multiSendAddress:o??Jo[e][t].MULTI_SEND_ADDRESS,multiSendCallOnlyAddress:c??Jo[e][t].MULTI_SEND_CALL_ONLY_ADDRESS}))(r,D.version,{safeModuleSetupAddress:S,safe4337ModuleAddress:o,safeProxyFactoryAddress:l,safeSingletonAddress:g,multiSendAddress:T,multiSendCallOnlyAddress:G});let q,W=s;const Z=async()=>q||(q=n.chain?n.chain.id:await _s(n,lo,"getChainId")({}),q);return Jr({client:n,entryPoint:D,getFactoryArgs:async()=>({factory:z,factoryData:await sc({owner:B.address,safeModuleSetupAddress:R,safe4337ModuleAddress:_,safeSingletonAddress:j,multiSendAddress:V,erc7579LaunchpadAddress:w,saltNonce:v,setupTransactions:F,safeModules:$,validators:M,executors:C,fallbacks:L,hooks:k,attesters:N,attestersThreshold:U,paymentToken:E,payment:I,paymentReceiver:O})}),getAddress:async()=>W||(W=await(async({client:e,owner:t,safeModuleSetupAddress:n,safe4337ModuleAddress:a,safeProxyFactoryAddress:s,safeSingletonAddress:r,multiSendAddress:i,erc7579LaunchpadAddress:o,paymentToken:c,payment:d,paymentReceiver:p,setupTransactions:l=[],safeModules:y=[],saltNonce:f=BigInt(0),validators:g=[],executors:w=[],fallbacks:v=[],hooks:x=[],attesters:A=[],attestersThreshold:P=0})=>{const E=await wr(e,{abi:ic,address:s,functionName:"proxyCreationCode"}),I=await ac({owner:t,safeModuleSetupAddress:n,safe4337ModuleAddress:a,multiSendAddress:i,setupTransactions:l,safeSingletonAddress:r,safeModules:y,erc7579LaunchpadAddress:o,validators:g,executors:w,fallbacks:v,hooks:x,attesters:A,attestersThreshold:P,paymentToken:c,payment:d,paymentReceiver:p}),O=u(["bytes","uint256"],[E,m(o??r)]),B=h(u(["bytes32","uint256"],[h(u(["bytes"],[I])),f]));return b({from:s,salt:B,bytecode:O,opcode:"CREATE2"})})({client:n,owner:B.address,safeModuleSetupAddress:R,safe4337ModuleAddress:_,safeProxyFactoryAddress:z,safeSingletonAddress:j,multiSendAddress:V,erc7579LaunchpadAddress:w,saltNonce:v,setupTransactions:F,safeModules:$,validators:M,executors:C,fallbacks:L,hooks:k,attesters:N,attestersThreshold:U,paymentToken:E,payment:I,paymentReceiver:O}),W),async encodeCalls(e){const t=e.length>1;if(w){const a=await(async(e,t)=>{const n=await Zr(e,{address:t});return Boolean(n)})(n,await this.getAddress());if(!a){const n=nc({safe4337ModuleAddress:_,safeSingletonAddress:j,erc7579LaunchpadAddress:w,owner:B.address,validators:M,executors:C,fallbacks:L,hooks:k,attesters:N,attestersThreshold:U});return i({abi:Zo,functionName:"setupSafe",args:[{...n,validators:n.validators.map((e=>({module:e.address,initData:e.context}))),callData:_o({mode:{type:t?"batchcall":"call",revertOnError:!1,selector:"0x",context:"0x"},callData:e})}]})}return _o({mode:{type:t?"batchcall":"call",revertOnError:!1,selector:"0x",context:"0x"},callData:e})}let a,s,r,o=0;if(t)a=H,s=BigInt(0),r=tc(e.map((e=>({to:e.to,value:e.value??0n,data:e.data??"0x",operation:0})))),o=1;else{const t=0===e.length?void 0:e[0];if(!t)throw new Error("No calls to encode");a=t.to,r=t.data??"0x",s=t.value??0n}return i({abi:Yo,functionName:"executeUserOpWithErrorString",args:[a,s,r,o]})},async getNonce(e){return To(n,{address:await this.getAddress(),entryPointAddress:D.address,key:P??e?.key})},getStubSignature:async()=>"0x000000000000000000000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",async sign({hash:e}){return this.signMessage({message:e})},async signMessage({message:e}){const t=c({domain:{chainId:await Z(),verifyingContract:await this.getAddress()},types:{SafeMessage:[{name:"message",type:"bytes"}]},primaryType:"SafeMessage",message:{message:ec(e)}});return Qo("eth_sign",await B.signMessage({message:{raw:p(t)}}))},async signTypedData(e){return Qo("eth_signTypedData",await B.signTypedData({domain:{chainId:await Z(),verifyingContract:await this.getAddress()},types:{SafeMessage:[{name:"message",type:"bytes"}]},primaryType:"SafeMessage",message:{message:ec(e)}}))},async signUserOperation(e){const{chainId:a=await Z(),...s}=e,r={safe:await this.getAddress(),callData:s.callData,nonce:s.nonce,initCode:s.initCode??"0x",maxFeePerGas:s.maxFeePerGas,maxPriorityFeePerGas:s.maxPriorityFeePerGas,preVerificationGas:s.preVerificationGas,verificationGasLimit:s.verificationGasLimit,callGasLimit:s.callGasLimit,paymasterAndData:s.paymasterAndData??"0x",validAfter:A,validUntil:x,entryPoint:D.address};var i;"initCode"in s&&(r.paymasterAndData=s.paymasterAndData??"0x"),"factory"in s&&(s.factory&&s.factoryData&&(r.initCode=y([s.factory,s.factoryData])),r.paymasterAndData=(i={...s,sender:s.sender??await this.getAddress()}).paymaster?t([i.paymaster,f(d(i.paymasterVerificationGasLimit||BigInt(0)),{size:16}),f(d(i.paymasterPostOpGasLimit||BigInt(0)),{size:16}),i.paymasterData||"0x"]):"0x");const o=[{signer:B.address,data:await oi(n,{account:B,domain:{chainId:a,verifyingContract:_},types:"0.6"===D.version?Ko:Xo,primaryType:"SafeOp",message:r})}];o.sort(((e,t)=>e.signer.toLowerCase().localeCompare(t.signer.toLowerCase())));const c=t(o.map((e=>e.data)));return u(["uint48","uint48","bytes"],[A,x,c])}})}const cc=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"enum Operation",name:"",type:"uint8"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Call[]",name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"}],uc=[{inputs:[{internalType:"contract IKernelValidator",name:"_defaultValidator",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"}],dc=[{type:"function",name:"initialize",inputs:[{name:"_rootValidator",type:"bytes21",internalType:"ValidationId"},{name:"hook",type:"address",internalType:"contract IHook"},{name:"validatorData",type:"bytes",internalType:"bytes"},{name:"hookData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"}],pc=[{type:"function",name:"initialize",inputs:[{name:"_rootValidator",type:"bytes21",internalType:"ValidationId"},{name:"hook",type:"address",internalType:"contract IHook"},{name:"validatorData",type:"bytes",internalType:"bytes"},{name:"hookData",type:"bytes",internalType:"bytes"},{name:"initConfig",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"}],lc=[{type:"function",name:"deployWithFactory",inputs:[{name:"factory",type:"address",internalType:"contract KernelFactory"},{name:"createData",type:"bytes",internalType:"bytes"},{name:"salt",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"payable"}],yc="0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c",fc="0x00",mc="0x01";var hc;!function(e){e.DEFAULT="0x00",e.ENABLE="0x01"}(hc||(hc={}));const bc=e=>/0\.2\.\d+/.test(e),gc=(e,t,n=0n)=>{if(bc(e))return n;if(n>w)throw new Error(`nonce key must be equal or less than 2 bytes(maxUint16) for Kernel version ${e}`);const a=hc.DEFAULT,s=f(y([a,fc,t,d(n,{size:2})]),{size:24});return BigInt(s)},wc=(e,{accountAddress:t,kernelVersion:n,chainId:a})=>{const s=v({domain:{name:"Kernel",version:n,chainId:a,verifyingContract:t}}),r=bc(n)?e:h(l([{type:"bytes32"},{type:"bytes32"}],[h(x("Kernel(bytes32 hash)")),e]));return h(y(["0x1901",s,r]))};const vc=[{inputs:[{internalType:"address",name:"_implementation",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"},{internalType:"uint256",name:"_index",type:"uint256"}],name:"createAccount",outputs:[{internalType:"address",name:"proxy",type:"address"}],stateMutability:"payable",type:"function"}],xc={"0.2.1":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0xf048AD83CB2dfd6037A43902a2A5Be04e53cd2Eb",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.2.2":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0x0DA6a956B9488eD4dd761E59f52FDc6c8068E6B5",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.2.3":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0xD3F582F6B4814E989Ee8E96bc3175320B5A540ab",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.2.4":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0xd3082872F8B06073A021b4602e022d5A070d7cfC",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.3.0-beta":{ECDSA_VALIDATOR:"0x8104e3Ad430EA6d354d013A6789fDFc71E671c43",ACCOUNT_LOGIC:"0x94F097E1ebEB4ecA3AAE54cabb08905B239A7D27",FACTORY_ADDRESS:"0x6723b44Abeec4E71eBE3232BD5B455805baDD22f",META_FACTORY_ADDRESS:"0xd703aaE79538628d27099B8c4f621bE4CCd142d5"},"0.3.1":{ECDSA_VALIDATOR:"0x845ADb2C711129d4f3966735eD98a9F09fC4cE57",ACCOUNT_LOGIC:"0xBAC849bB641841b44E965fB01A4Bf5F074f84b4D",FACTORY_ADDRESS:"0xaac5D4240AF87249B3f71BC8E4A2cae074A3E419",META_FACTORY_ADDRESS:"0xd703aaE79538628d27099B8c4f621bE4CCd142d5"}},Ac=e=>y([mc,e]),Pc=async({entryPointVersion:e,kernelVersion:t,owner:n,index:a,factoryAddress:s,accountLogicAddress:r,ecdsaValidatorAddress:o})=>{const c=(({entryPoint:{version:e},kernelVersion:t,owner:n,ecdsaValidatorAddress:a})=>i("0.6"===e?{abi:uc,functionName:"initialize",args:[a,n]}:"0.3.0-beta"===t?{abi:dc,functionName:"initialize",args:[Ac(a),g,n,"0x"]}:{abi:pc,functionName:"initialize",args:[Ac(a),g,n,"0x",[]]}))({entryPoint:{version:e},kernelVersion:t,ecdsaValidatorAddress:o,owner:n});return i("0.6"===e?{abi:vc,functionName:"createAccount",args:[r,c,a]}:{abi:lc,functionName:"deployWithFactory",args:[s,c,d(a,{size:32})]})};async function Ec(e){const{client:t,address:n,index:a=0n,owners:s,version:r,ecdsaValidatorAddress:u,factoryAddress:d,metaFactoryAddress:p,accountLogicAddress:l}=e,f=await Fo({owner:s[0]}),m={address:e.entryPoint?.address??So,abi:"0.6"===(e.entryPoint?.version??"0.7")?Hr:qr,version:e.entryPoint?.version??"0.7"},h=((e,t)=>t||("0.6"===e?"0.2.2":"0.3.0-beta"))(m.version,r),{accountLogicAddress:b,ecdsaValidatorAddress:w,factoryAddress:v,metaFactoryAddress:x}=(({ecdsaValidatorAddress:e,accountLogicAddress:t,factoryAddress:n,metaFactoryAddress:a,kernelVersion:s})=>{const r=xc[s];return{ecdsaValidatorAddress:e??r.ECDSA_VALIDATOR,accountLogicAddress:t??r.ACCOUNT_LOGIC,factoryAddress:n??r.FACTORY_ADDRESS,metaFactoryAddress:a??r?.META_FACTORY_ADDRESS??g}})({ecdsaValidatorAddress:u,accountLogicAddress:l,factoryAddress:d,metaFactoryAddress:p,kernelVersion:h});let E,I=n;const O=async()=>E||(E=t.chain?t.chain.id:await _s(t,lo,"getChainId")({}),E),B=async()=>({factory:"0.6"===m.version?v:x,factoryData:await Pc({entryPointVersion:m.version,kernelVersion:h,owner:f.address,index:a,factoryAddress:v,accountLogicAddress:b,ecdsaValidatorAddress:w})});return Jr({client:t,entryPoint:m,getFactoryArgs:B,async getAddress(){if(I)return I;const{factory:e,factoryData:n}=await B();return I=await $o(t,{factory:e,factoryData:n,entryPointAddress:m.address}),I},encodeCalls:async e=>(({kernelVersion:e,calls:t})=>{if(bc(e)){if(t.length>1)return i({abi:cc,functionName:"executeBatch",args:[t.map((e=>({to:e.to,value:e.value??0n,data:e.data??"0x"})))]});const e=0===t.length?void 0:t[0];if(!e)throw new Error("No calls to encode");return i({abi:cc,functionName:"execute",args:[e.to,e.value??0n,e.data??"0x",0]})}return _o({mode:{type:t.length>1?"batchcall":"call",revertOnError:!1,selector:"0x",context:"0x"},callData:t})})({calls:e,kernelVersion:h}),async getNonce(n){return To(t,{address:await this.getAddress(),entryPointAddress:m.address,key:gc(h,w,e.nonceKey??0n)})},getStubSignature:async()=>bc(h)?y(["0x00000000",yc]):yc,async sign({hash:e}){return this.signMessage({message:e})},async signMessage({message:e}){const t=await async function({message:e,owner:t,accountAddress:n,kernelVersion:a,chainId:s}){if("0.2.1"===a||"0.2.2"===a)return t.signMessage({message:e});const r=wc(o(e),{kernelVersion:a,accountAddress:n,chainId:s});return t.signMessage({message:{raw:r}})}({owner:f,message:e,accountAddress:await this.getAddress(),kernelVersion:h,chainId:await O()});return bc(h)?t:y([Ac(w),t])},async signTypedData(e){const t=await async function(e){const{owner:t,accountAddress:n,kernelVersion:a,chainId:s,...r}=e;if("0.2.1"===a||"0.2.2"===a)return t.signTypedData({...r});const{message:i,primaryType:o,types:u,domain:d}=r,p={EIP712Domain:A({domain:d}),...u};P({domain:d,message:i,primaryType:o,types:p});const l=c({message:i,primaryType:o,types:p,domain:d}),y=wc(l,{kernelVersion:a,accountAddress:n,chainId:s});return t.signMessage({message:{raw:y}})}({owner:f,chainId:await O(),...e,accountAddress:await this.getAddress(),kernelVersion:h});return bc(h)?t:y([Ac(w),t])},async signUserOperation(e){const{chainId:t=await O(),...n}=e,a=Wr({userOperation:{...n,sender:n.sender??await this.getAddress(),signature:"0x"},entryPointAddress:m.address,entryPointVersion:m.version,chainId:t}),s=await f.signMessage({message:{raw:a}});return bc(h)?y(["0x00000000",s]):s}})}const Ic=[{inputs:[{internalType:"address",name:"moduleSetupContract",type:"address"},{internalType:"bytes",name:"moduleSetupData",type:"bytes"},{internalType:"uint256",name:"index",type:"uint256"}],name:"deployCounterFactualAccount",outputs:[{internalType:"address",name:"proxy",type:"address"}],stateMutability:"nonpayable",type:"function"}],Oc=[{inputs:[{internalType:"address",name:"handler",type:"address"},{internalType:"address",name:"moduleSetupContract",type:"address"},{internalType:"bytes",name:"moduleSetupData",type:"bytes"}],name:"init",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"eoaOwner",type:"address"}],name:"initForSmartAccount",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"dest",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"func",type:"bytes"}],name:"execute_ncC",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"dest",type:"address[]"},{internalType:"uint256[]",name:"value",type:"uint256[]"},{internalType:"bytes[]",name:"func",type:"bytes[]"}],name:"executeBatch_y6U",outputs:[],stateMutability:"nonpayable",type:"function"}],Bc={ECDSA_OWNERSHIP_REGISTRY_MODULE:"0x0000001c5b32F37F5beA87BDD5374eB2aC54eA8e",FACTORY_ADDRESS:"0x000000a56Aaca3e9a4C479ea6b6CD0DbcB6634F5",ACCOUNT_V2_0_LOGIC:"0x0000002512019Dafb59528B82CB92D3c5D2423aC",DEFAULT_FALLBACK_HANDLER_ADDRESS:"0x0bBa6d96BD616BedC6BFaa341742FD43c60b83C1"},Dc=async({owner:e,index:t,ecdsaModuleAddress:n})=>{if(!e)throw new Error("Owner account not found");const a=i({abi:Oc,functionName:"initForSmartAccount",args:[e]});return i({abi:Ic,functionName:"deployCounterFactualAccount",args:[n,a,t]})};async function Sc(e){const{owners:t,client:n,index:a=0n,address:s,accountLogicAddress:r=Bc.ACCOUNT_V2_0_LOGIC,fallbackHandlerAddress:o=Bc.DEFAULT_FALLBACK_HANDLER_ADDRESS,ecdsaModuleAddress:c=Bc.ECDSA_OWNERSHIP_REGISTRY_MODULE,factoryAddress:d=Bc.FACTORY_ADDRESS}=e,p=await Fo({owner:t[0]}),y={address:e.entryPoint?.address??Do,abi:Hr,version:e.entryPoint?.version??"0.6"};let f=s;return Jr({client:n,entryPoint:y,getFactoryArgs:async()=>({factory:d,factoryData:await Dc({owner:p.address,index:a,ecdsaModuleAddress:c})}),getAddress:async()=>f||(f=await(async({factoryAddress:e,accountLogicAddress:t,fallbackHandlerAddress:n,ecdsaModuleAddress:a,owner:s,index:r=BigInt(0)})=>{const o=i({abi:Oc,functionName:"initForSmartAccount",args:[s]}),c=i({abi:Oc,functionName:"init",args:[n,a,o]}),d=u(["bytes","uint256"],["0x6080346100aa57601f61012038819003918201601f19168301916001600160401b038311848410176100af578084926020946040528339810103126100aa57516001600160a01b0381168082036100aa5715610065573055604051605a90816100c68239f35b60405162461bcd60e51b815260206004820152601e60248201527f496e76616c696420696d706c656d656e746174696f6e206164647265737300006044820152606490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe608060405230546000808092368280378136915af43d82803e156020573d90f35b3d90fdfea2646970667358221220a03b18dce0be0b4c9afe58a9eb85c35205e2cf087da098bbf1d23945bf89496064736f6c63430008110033",m(t)]),p=h(u(["bytes32","uint256"],[h(u(["bytes"],[c])),r]));return b({from:e,salt:p,bytecode:d,opcode:"CREATE2"})})({owner:p.address,ecdsaModuleAddress:c,factoryAddress:d,accountLogicAddress:r,fallbackHandlerAddress:o,index:a}),f),async getNonce(t){const a=await this.getAddress();return To(n,{address:a,entryPointAddress:y.address,key:e?.nonceKey??t?.key})},encodeCalls:async e=>{if(e.length>1)return i({abi:Oc,functionName:"executeBatch_y6U",args:[e.map((e=>e.to)),e.map((e=>e.value??0n)),e.map((e=>e.data??"0x"))]});const t=0===e.length?void 0:e[0];if(!t)throw new Error("No calls to encode");return i({abi:Oc,functionName:"execute_ncC",args:[t.to,t.value??0n,t.data??"0x"]})},getStubSignature:async()=>`0x0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000${c.substring(2).padEnd(40,"0")}000000000000000000000000000000000000000000000000000000000000004181d4b4981670cb18f99f0b4a66446df1bf5b204d24cfcb659bf38ba27a4359b5711649ec2423c5e1247245eba2964679b6a1dbb85c992ae40b9b00c6935b02ff1b00000000000000000000000000000000000000000000000000000000000000`,async sign({hash:e}){return this.signMessage({message:e})},async signMessage({message:e}){let t=await p.signMessage({message:e});const n=Number.parseInt(t.slice(-2),16);if(![27,28].includes(n)){const e=n+27;t=t.slice(0,-2)+e.toString(16)}return l([{type:"bytes"},{type:"address"}],[t,c])},async signTypedData(e){let t=await p.signTypedData(e);const n=Number.parseInt(t.slice(-2),16);if(![27,28].includes(n)){const e=n+27;t=t.slice(0,-2)+e.toString(16)}return l([{type:"bytes"},{type:"address"}],[t,c])},async signUserOperation(e){const{chainId:t=n.chain?.id,...a}=e;if(!t)throw new Error("Chain id not found");const s=Wr({userOperation:{...a,sender:a.sender??await this.getAddress(),signature:"0x"},entryPointAddress:y.address,entryPointVersion:y.version,chainId:t}),r=await ii(n,{account:p,message:{raw:s}});return l(E("bytes, address"),[r,c])}})}function Tc(e){if("function"!=typeof e)return null==e||"string"==typeof e||"boolean"==typeof e?e:"bigint"==typeof e?d(e):null!=e._isBigNumber||"object"!=typeof e?d(e).replace(/^0x0/,"0x"):Array.isArray(e)?e.map((e=>Tc(e))):Object.keys(e).reduce(((t,n)=>(t[n]=Tc(e[n]),t)),{})}const Gc=({entryPoint:e})=>t=>({getUserOperationGasPrice:async()=>(async e=>{const t=await e.request({method:"pimlico_getUserOperationGasPrice",params:[]});return{slow:{maxFeePerGas:BigInt(t.slow.maxFeePerGas),maxPriorityFeePerGas:BigInt(t.slow.maxPriorityFeePerGas)},standard:{maxFeePerGas:BigInt(t.standard.maxFeePerGas),maxPriorityFeePerGas:BigInt(t.standard.maxPriorityFeePerGas)},fast:{maxFeePerGas:BigInt(t.fast.maxFeePerGas),maxPriorityFeePerGas:BigInt(t.fast.maxPriorityFeePerGas)}}})(t),getUserOperationStatus:async e=>(async(e,{hash:t})=>e.request({method:"pimlico_getUserOperationStatus",params:[t]}))(t,e),sendCompressedUserOperation:async n=>(async(e,t)=>{const{compressedUserOperation:n,inflatorAddress:a,entryPointAddress:s}=t;return e.request({method:"pimlico_sendCompressedUserOperation",params:[n,a,s]})})(t,{...n,entryPointAddress:e.address}),sponsorUserOperation:async n=>(async(e,t)=>{const n=await e.request({method:"pm_sponsorUserOperation",params:t.sponsorshipPolicyId?[Tc(t.userOperation),t.entryPoint.address,{sponsorshipPolicyId:t.sponsorshipPolicyId}]:[Tc(t.userOperation),t.entryPoint.address]});if("0.6"===t.entryPoint.version){const e=n;return{paymasterAndData:e.paymasterAndData,preVerificationGas:BigInt(e.preVerificationGas),verificationGasLimit:BigInt(e.verificationGasLimit),callGasLimit:BigInt(e.callGasLimit)}}const a=n;return{callGasLimit:BigInt(a.callGasLimit),verificationGasLimit:BigInt(a.verificationGasLimit),preVerificationGas:BigInt(a.preVerificationGas),paymaster:a.paymaster,paymasterVerificationGasLimit:BigInt(a.paymasterVerificationGasLimit),paymasterPostOpGasLimit:BigInt(a.paymasterPostOpGasLimit),paymasterData:a.paymasterData}})(t,{...n,entryPoint:e}),validateSponsorshipPolicies:async n=>(async(e,t)=>await e.request({method:"pm_validateSponsorshipPolicies",params:[Tc(t.userOperation),t.entryPointAddress,t.sponsorshipPolicyIds]}))(t,{...n,entryPointAddress:e.address}),getTokenQuotes:async n=>(async(e,t)=>{const n=t.chain?.id??e.chain?.id;if(!n)throw new I;return(await e.request({method:"pimlico_getTokenQuotes",params:[{tokens:t.tokens},t.entryPointAddress,O(n)]})).quotes.map((e=>({...e,balanceSlot:e.balanceSlot?m(e.balanceSlot):void 0,allowanceSlot:e.allowanceSlot?m(e.allowanceSlot):void 0,postOpGas:m(e.postOpGas),exchangeRate:m(e.exchangeRate),exchangeRateNativeToUsd:m(e.exchangeRateNativeToUsd)})))})(t,{...n,chain:n.chain,entryPointAddress:e.address})});function $c(e){const{key:t="public",name:n="Pimlico Bundler Client",entryPoint:a}=e;return B({...e,key:t,name:n,type:"pimlicoClient"}).extend(Oo).extend(Bo).extend(Gc({entryPoint:{address:a?.address??So,version:a?.version??"0.7"}}))}const Fc={address:Do,version:"0.6"},Mc={address:So,version:"0.7"},Cc=({owner:e,smartWalletType:t,publicClient:n})=>{switch(t){case F:return oc({client:n,entryPoint:Mc,owners:[e],version:"1.4.1"});case $:return Ec({client:n,version:"0.3.1",entryPoint:Mc,owners:[e]});case G:return Sc({client:n,owners:[e],entryPoint:Fc});case T:return No({client:n,entryPoint:Fc,owner:e,version:"1.1.0"});case S:return async function({client:e,owner:t}){const[n]=await t.request({method:"eth_accounts"});if(!n)throw new Error("Unable to request embedded owner for eth_accounts");const a={type:"local",source:"privy",address:n,sign:async({hash:e})=>await t.request({method:"secp256k1_sign",params:[e]})};return await Qr({client:e,owners:[a]})}({client:n,owner:e});default:throw new Error(`Invalid smart account type: ${t}.`)}},Lc=["rpc.zerodev.app","public.pimlico.io","api.pimlico.io"],kc=async({owner:t,smartWalletType:n,chain:a,publicClient:s,bundlerUrl:r,paymasterUrl:i,paymasterContext:o})=>{const c=await Cc({owner:t,smartWalletType:n,publicClient:s}),u=$c({transport:D(r),entryPoint:c.entryPoint}),d=!!i?$c({transport:D(i),entryPoint:c.entryPoint}):void 0;return e({account:c,chain:a,paymaster:d,paymasterContext:o,bundlerTransport:D(r),userOperation:{estimateFeesPerGas:async()=>{if(Lc.some((e=>r.includes(e))))return await u.getUserOperationGasPrice().then((e=>e.fast));{const e=await s.estimateFeesPerGas(),t=r.includes("api.developer.coinbase.com")?175n:150n;return{...e,maxFeePerGas:e.maxFeePerGas*t/100n,maxPriorityFeePerGas:e.maxPriorityFeePerGas*t/100n}}}}})};export{jt as B,Ls as H,dn as I,ea as a,Nt as b,gr as c,hs as d,na as e,kc as f,Ss as g,Rn as i,bs as s};
